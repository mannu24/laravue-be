import{_ as V,k as q,t as U,j as B,f as _,o,w as k,D as s,d as g,u as r,z as m,H as A,A as c,b as p,x as b,F,E as O,G as R,ae as I,I as M,p as w,q as z,K as G,a6 as H,l as T}from"./app-BusCMfsw.js";import{_ as K}from"./Card-rloiMM0U.js";import{_ as J}from"./CardContent-DRH463jB.js";import{_ as E}from"./index-CTbBREyF.js";import{U as Q}from"./user-CaHqtWKQ.js";import{C as W}from"./calendar-B1aSQWq4.js";import{S as X}from"./star-B8JIQlIP.js";import{E as Y}from"./eye-dx6brfk1.js";import{A as Z}from"./arrow-right-CqIEQI_B.js";import{_ as ee}from"./EmptyState-NxnJnIdz.js";import{L}from"./loader-circle-C3MxRGn-.js";const te={class:"relative overflow-hidden"},se=["src","alt"],ae={class:"absolute top-4 right-4"},re={class:"flex items-start justify-between mb-4"},oe={class:"flex-1"},le={class:"flex items-center gap-2 mb-3 text-sm text-muted-foreground"},ne={key:0,class:"text-lg font-semibold text-yellow-500"},ie={class:"flex flex-wrap gap-2 mb-4"},ce={class:"flex items-center space-x-4 text-sm text-muted-foreground"},ue={class:"flex items-center"},de={__name:"ProjectCard",props:{project:{type:Object,required:!0},showActions:{type:Boolean,default:!0}},emits:["upvoted","viewed"],setup(e,{emit:P}){const u=e,C=P,S=q(),h=U(),l=B(),d=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",y=async a=>{if(!l.isAuthenticated){I({title:"Authentication Required",description:"Please login to upvote projects",variant:"destructive"});return}try{const t=await M.post(`/api/v1/projects/${a.slug}/upvote`,{},l.config);a.is_upvoted_by_user=t.data.data.is_upvoted,a.upvotes_count=t.data.data.upvotes_count,C("upvoted",a),I({title:"Success",description:t.data.message})}catch(t){console.error("Error upvoting project:",t),I({title:"Error",description:"Failed to upvote project",variant:"destructive"})}},f=()=>{S.push(`/projects/${u.project.slug}`),C("viewed",u.project)};return(a,t)=>(o(),_(r(K),{class:m(["group transition-all duration-300 hover:-translate-y-2 border-0 shadow-xl cursor-pointer overflow-hidden",r(h).isDark?"bg-gray-800/90 hover:bg-gray-800":"bg-white/90 hover:bg-white"]),onClick:f},{default:k(()=>[s("div",te,[s("img",{src:e.project.featured_image||"https://picsum.photos/400/250?random="+e.project.id,alt:e.project.title,class:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"},null,8,se),t[1]||(t[1]=s("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"},null,-1)),s("div",ae,[g(r(E),{class:m(["text-white font-medium shadow-lg",e.project.is_sellable?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-green-500 to-emerald-500"])},{default:k(()=>[A(c(e.project.is_sellable?"Premium":"Open Source"),1)]),_:1},8,["class"])])]),g(r(J),{class:"p-6"},{default:k(()=>{var x,j,$,n;return[s("div",re,[s("div",oe,[s("h3",{class:m(["text-xl font-semibold mb-2 group-hover:text-blue-500 transition-colors duration-300",r(h).isDark?"text-white":"text-gray-900"])},c(e.project.title),3),s("div",le,[g(r(Q),{class:"h-4 w-4"}),s("span",null,c((x=e.project.user)==null?void 0:x.name),1),t[2]||(t[2]=s("span",null,"â€¢",-1)),g(r(W),{class:"h-4 w-4"}),s("span",null,c(d(e.project.created_at)),1)])]),e.project.selling_price?(o(),p("div",ne," $"+c(e.project.selling_price),1)):b("",!0)]),s("p",{class:m(["text-sm mb-4 line-clamp-3 leading-relaxed",r(h).isDark?"text-gray-300":"text-gray-600"])},c(e.project.description),3),s("div",ie,[(o(!0),p(F,null,O((j=e.project.technologies)==null?void 0:j.slice(0,3),i=>(o(),_(r(E),{key:i.id,variant:"secondary",class:"text-xs"},{default:k(()=>[A(c(i.name),1)]),_:2},1024))),128)),(($=e.project.technologies)==null?void 0:$.length)>3?(o(),_(r(E),{key:0,variant:"secondary",class:"text-xs"},{default:k(()=>[A(" +"+c(e.project.technologies.length-3),1)]),_:1})):b("",!0)]),e.showActions?(o(),p("div",{key:0,class:m(["flex items-center justify-between pt-4 border-t",r(h).isDark?"border-gray-700":"border-gray-200"])},[s("div",ce,[s("button",{onClick:t[0]||(t[0]=R(i=>y(e.project),["stop"])),class:m(["flex items-center hover:text-blue-500 transition-colors",e.project.is_upvoted_by_user?"text-blue-500":""])},[g(r(X),{class:m(["h-4 w-4 mr-1",e.project.is_upvoted_by_user?"fill-current":""])},null,8,["class"]),s("span",null,c(e.project.upvotes_count||0),1)],2),s("div",ue,[g(r(Y),{class:"h-4 w-4 mr-1"}),s("span",null,c(((n=e.project.views)==null?void 0:n.toLocaleString())||0),1)])]),g(r(Z),{class:"h-4 w-4 text-muted-foreground group-hover:text-blue-500 group-hover:translate-x-1 transition-all duration-300"})],2)):b("",!0)]}),_:1})]),_:1},8,["class"]))}},ve=V(de,[["__scopeId","data-v-d2b2a54b"]]),me={class:"w-full"},pe={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},fe={key:1,class:"text-center py-20"},ge={key:2,class:"text-center py-8"},Ie={__name:"ProjectsInfiniteList",props:{userId:{type:Number,default:null},filters:{type:Object,default:()=>({})},perPage:{type:Number,default:12}},emits:["loaded"],setup(e,{emit:P}){const u=e,C=P,S=B(),h=U(),l=w([]),d=w(!1),y=w(1),f=w(!0),a=w(null),t=w(null),x=async(n=!1)=>{if(!(d.value||!f.value&&!n)){d.value=!0;try{const i={page:n?1:y.value,per_page:u.perPage,...u.filters};u.userId&&(i.user_id=u.userId);const v=await M.get("/api/v1/projects",{params:i,...S.isAuthenticated?S.config:{}}),N=v.data.data||[],D=v.data;n?(l.value=N,y.value=1):l.value=[...l.value,...N],f.value=D.current_page<D.last_page,!n&&f.value?y.value=D.current_page+1:n&&f.value&&(y.value=2),C("loaded",l.value)}catch(i){console.error("Error fetching projects:",i),I({title:"Error",description:"Failed to load projects",variant:"destructive"})}finally{d.value=!1}}},j=()=>{if(!a.value)return;const n={root:null,rootMargin:"200px",threshold:.1};t.value=new IntersectionObserver(i=>{i.forEach(v=>{v.isIntersecting&&f.value&&!d.value&&x()})},n),t.value.observe(a.value)},$=n=>{const i=l.value.findIndex(v=>v.id===n.id);i!==-1&&(l.value[i]={...n})};return z(async()=>{await x(!0),await G(),setTimeout(()=>{j()},300)}),H(()=>{t.value&&a.value&&t.value.unobserve(a.value)}),T(()=>u.filters,()=>{t.value&&a.value&&t.value.unobserve(a.value),x(!0),setTimeout(()=>{j()},300)},{deep:!0}),T(()=>u.userId,()=>{t.value&&a.value&&t.value.unobserve(a.value),x(!0),setTimeout(()=>{j()},300)}),(n,i)=>(o(),p("div",me,[l.value.length>0?(o(),p("div",pe,[(o(!0),p(F,null,O(l.value,v=>(o(),_(ve,{key:v.id,project:v,onUpvoted:$},null,8,["project"]))),128))])):b("",!0),d.value&&l.value.length===0?(o(),p("div",fe,[g(r(L),{class:"h-12 w-12 animate-spin mx-auto mb-4 text-blue-500"}),s("p",{class:m(["text-lg",r(h).isDark?"text-gray-300":"text-gray-600"])}," Loading projects... ",2)])):b("",!0),l.value.length>0?(o(),p("div",ge,[s("div",{ref_key:"observerTarget",ref:a,class:"h-1 w-full"},null,512),d.value?(o(),_(r(L),{key:0,class:"h-8 w-8 animate-spin mx-auto text-blue-500 mt-4"})):f.value?b("",!0):(o(),p("p",{key:1,class:m(["text-sm mt-4",r(h).isDark?"text-gray-400":"text-gray-500"])}," No more projects to load ",2))])):!d.value&&l.value.length===0?(o(),_(ee,{key:3,icon:"Code2",title:"No Projects Found",subtitle:e.userId?"This user hasn't shared any projects yet.":"No projects match your criteria."},null,8,["subtitle"])):b("",!0)]))}};export{Ie as _};
//# sourceMappingURL=ProjectsInfiniteList-DYUllWHv.js.map
