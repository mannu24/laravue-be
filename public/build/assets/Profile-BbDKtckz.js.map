{"version":3,"file":"Profile-BbDKtckz.js","sources":["../../../node_modules/lucide-vue-next/dist/esm/icons/layout-dashboard.js","../../../resources/js/views/Profile.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LayoutDashboard = createLucideIcon(\"LayoutDashboardIcon\", [\n  [\"rect\", { width: \"7\", height: \"9\", x: \"3\", y: \"3\", rx: \"1\", key: \"10lvy0\" }],\n  [\"rect\", { width: \"7\", height: \"5\", x: \"14\", y: \"3\", rx: \"1\", key: \"16une8\" }],\n  [\"rect\", { width: \"7\", height: \"9\", x: \"14\", y: \"12\", rx: \"1\", key: \"1hutg5\" }],\n  [\"rect\", { width: \"7\", height: \"5\", x: \"3\", y: \"16\", rx: \"1\", key: \"ldoo1y\" }]\n]);\n\nexport { LayoutDashboard as default };\n//# sourceMappingURL=layout-dashboard.js.map\n","<script setup>\nimport {\n  Bookmark,\n  LayoutDashboard,\n  Code2,\n  Users\n} from 'lucide-vue-next'\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport ProfileTabs from '../components/profile/ProfileTabs.vue'\nimport ProfileCard from '../components/profile/ProfileCard.vue'\nimport { useThemeStore } from '../stores/theme'\nimport { useAuthStore } from '../stores/auth'\nimport { useGlobalDataStore } from '../stores/globalData'\nimport axios from 'axios'\n\n// Declare emits to avoid Vue warnings\ndefineEmits(['share_url'])\n\nconst themeStore = useThemeStore()\nconst authStore = useAuthStore()\nconst globalDataStore = useGlobalDataStore()\nconst router = useRouter()\nconst route = useRoute()\n\nconst user = ref(null)\nconst isLoading = ref(true)\nconst projects = ref([])\nconst socialLinks = ref([])\n\n// Get user data from available sources (authStore or globalDataStore)\n// Priority: globalDataStore.user > authStore.user\nconst getUserData = () => {\n  // Try globalDataStore first (has more complete data including social_links)\n  const globalUser = globalDataStore.user\n  const authUser = authStore.user\n  \n  if (globalUser) {\n    return {\n      ...globalUser,\n      // Merge with authStore data if globalData doesn't have some fields\n      ...(authUser && {\n        // Only override if globalData doesn't have the field\n        ...Object.fromEntries(\n          Object.entries(authUser).filter(([key]) => !globalUser.hasOwnProperty(key))\n        )\n      })\n    }\n  }\n  \n  // Fallback to authStore user\n  return authUser\n}\n\n// Initialize user data from available sources\nconst initializeUserData = () => {\n  if (!authStore.isAuthenticated) {\n    router.push({ name: 'login' })\n    return\n  }\n\n  isLoading.value = true\n  \n  // If globalData is already loaded, use it immediately\n  if (globalDataStore.payload) {\n    const userData = getUserData()\n    if (userData) {\n      user.value = userData\n      socialLinks.value = userData.social_links || []\n      isLoading.value = false\n      return\n    }\n  }\n  \n  // If global-data is still loading, wait for it\n  if (globalDataStore.loading) {\n    // Use authStore.user as fallback while waiting\n    if (authStore.user) {\n      user.value = authStore.user\n      socialLinks.value = authStore.user?.social_links || []\n    }\n    // Keep loading state - will be updated by watcher when global-data loads\n    return\n  }\n  \n  // If we have authStore user, use it (global-data might not be available yet)\n  if (authStore.user) {\n    user.value = authStore.user\n    socialLinks.value = authStore.user?.social_links || []\n    isLoading.value = false\n  } else {\n    // No user data available at all\n    isLoading.value = false\n  }\n}\n\nconst logout = async () => {\n  isLoading.value = true\n  try {\n    await axios.get('/api/v1/logout', authStore.config)\n    authStore.clearAuthData()\n    router.push('/login')\n  } catch (error) {\n    console.error('Logout error:', error)\n    // Even if API call fails, clear local auth data and redirect\n    authStore.clearAuthData()\n    router.push('/login')\n  } finally {\n    isLoading.value = false\n  }\n}\n\n// Watch for globalDataStore changes to update user data when it loads\nwatch(() => globalDataStore.user, (newUser) => {\n  if (newUser && authStore.isAuthenticated) {\n    const userData = getUserData()\n    if (userData) {\n      user.value = userData\n      socialLinks.value = userData.social_links || []\n      isLoading.value = false\n    }\n  }\n}, { immediate: false })\n\n// Watch for globalDataStore loading state\nwatch(() => globalDataStore.loading, (isLoadingGlobal) => {\n  if (!isLoadingGlobal && globalDataStore.payload && authStore.isAuthenticated) {\n    // Global data finished loading, update user data\n    const userData = getUserData()\n    if (userData) {\n      user.value = userData\n      socialLinks.value = userData.social_links || []\n      isLoading.value = false\n    }\n  }\n})\n\nonMounted(() => {\n  initializeUserData()\n})\n\n// Computed for gamification data\nconst gamificationSummary = computed(() => globalDataStore.gamificationSummary)\n\n</script>\n\n<template>\n  <div class=\"min-h-screen\">\n    <!-- Loading State -->\n    <div v-if=\"isLoading\" class=\"flex items-center justify-center min-h-screen\">\n      <div class=\"text-center\">\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4\" :class=\"[\n          themeStore.isDark ? 'border-white' : 'border-gray-900'\n        ]\"></div>\n        <p :class=\"[\n          themeStore.isDark ? 'text-gray-400' : 'text-gray-600'\n        ]\">Loading profile...</p>\n      </div>\n    </div>\n\n    <!-- Profile Content -->\n    <div v-else-if=\"user\">\n    <!-- Hero Section with Profile Header -->\n    <ProfileCard\n      :user=\"user\"\n      :social-links=\"socialLinks\"\n      :gamification-summary=\"gamificationSummary\"\n      :is-logging-out=\"isLoading\"\n      @update-profile=\"router.push('/profile/update')\"\n      @settings=\"router.push('/settings')\"\n      @logout=\"logout\"\n    />\n\n    <!-- Main Content -->\n    <div class=\"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-8\">\n      <ProfileTabs\n        :user-id=\"user?.id\"\n        :tabs=\"[\n          { value: 'dashboard', label: 'Dashboard', icon: LayoutDashboard },\n          { value: 'projects', label: 'Projects', icon: Code2 },\n          { value: 'activity', label: 'Activity', icon: Users },\n          { value: 'saved', label: 'Saved', icon: Bookmark }\n        ]\"\n        :default-tab=\"route.query.tab || 'dashboard'\"\n        :is-own-profile=\"true\"\n        :projects=\"projects\"\n      />\n    </div>\n    </div>\n    <div v-else class=\"flex items-center justify-center min-h-screen\">\n      <div class=\"text-center\">\n        <Users class=\"h-16 w-16 mx-auto mb-4 opacity-50\" :class=\"[\n          themeStore.isDark ? 'text-gray-600' : 'text-gray-400'\n        ]\" />\n        <h2 class=\"text-2xl font-bold mb-2\" :class=\"[\n          themeStore.isDark ? 'text-white' : 'text-gray-900'\n        ]\">Unable to Load Profile</h2>\n        <p :class=\"[\n          themeStore.isDark ? 'text-gray-400' : 'text-gray-600'\n        ]\">Please try refreshing the page.</p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* Grid background */\n.bg-grid-white\\/\\[0\\.05\\] {\n  background-image: radial-gradient(circle, rgba(255, 255, 255, 0.05) 1px, transparent 1px);\n}\n\n.bg-grid-black\\/\\[0\\.05\\] {\n  background-image: radial-gradient(circle, rgba(0, 0, 0, 0.05) 1px, transparent 1px);\n}\n\n/* Smooth transitions */\n* {\n  transition-property: transform, opacity, background-color, border-color, color, fill, stroke, box-shadow;\n  transition-timing-function: cubic-bezier\n}\n</style>"],"names":["LayoutDashboard","createLucideIcon","themeStore","useThemeStore","authStore","useAuthStore","globalDataStore","useGlobalDataStore","router","useRouter","route","useRoute","user","ref","isLoading","projects","socialLinks","getUserData","globalUser","authUser","key","initializeUserData","userData","_a","_b","logout","axios","error","watch","newUser","isLoadingGlobal","onMounted","gamificationSummary","computed","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_unref","_normalizeClass","_hoisted_4","_createVNode","ProfileCard","_cache","$event","_hoisted_5","ProfileTabs","Code2","Users","Bookmark","_hoisted_6","_hoisted_7"],"mappings":"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","x_google_ignoreList":[0]}