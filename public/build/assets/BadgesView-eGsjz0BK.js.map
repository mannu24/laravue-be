{"version":3,"file":"BadgesView-eGsjz0BK.js","sources":["../../../resources/js/components/gamification/BadgeList.vue","../../../resources/js/views/BadgesView.vue"],"sourcesContent":["<script setup>\r\nimport { Swiper, SwiperSlide } from 'swiper/vue'\r\nimport 'swiper/css'\r\nimport BadgeItem from './BadgeItem.vue'\r\nimport EmptyState from '@/components/ui/EmptyState.vue'\r\n\r\nconst props = defineProps({\r\n  badges: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  ui: {\r\n    type: String,\r\n    default: 'grid'\r\n  }\r\n})\r\nconst emit = defineEmits(['view-badge'])\r\nconst handleBadgeClick = (badge) => {\r\n  emit('view-badge', badge.slug)\r\n}\r\n\r\n// Swiper configuration for list view\r\nconst swiperModules = []\r\n</script>\r\n<template>\r\n  <div>\r\n    <div v-if=\"ui === 'grid'\" class=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n      <BadgeItem\r\n        v-for=\"badge in badges\"\r\n        :key=\"badge.id\"\r\n        :badge=\"badge\"\r\n        @click=\"handleBadgeClick\"\r\n        data-test=\"badge-item\"\r\n      />\r\n    </div>\r\n    <div v-else-if=\"ui === 'list'\" class=\"badge-swiper-container\">\r\n      <Swiper\r\n        :modules=\"swiperModules\"\r\n        :slides-per-view=\"'auto'\"\r\n        :space-between=\"10\"\r\n        :free-mode=\"true\"\r\n        :grab-cursor=\"true\"\r\n        :breakpoints=\"{\r\n          320: {\r\n            slidesPerView: 'auto',\r\n            spaceBetween: 16,\r\n          },\r\n          640: {\r\n            slidesPerView: 'auto',\r\n            spaceBetween: 16,\r\n          },\r\n          1024: {\r\n            slidesPerView: 'auto',\r\n            spaceBetween: 16,\r\n          }\r\n        }\"\r\n        class=\"badge-swiper\"\r\n      >\r\n        <SwiperSlide\r\n          v-for=\"badge in badges\"\r\n          :key=\"badge.id\"\r\n          class=\"!w-[250px]\"\r\n        >\r\n          <BadgeItem\r\n            :badge=\"badge\"\r\n            @click=\"handleBadgeClick\"\r\n            data-test=\"badge-item\"\r\n          />\r\n        </SwiperSlide>\r\n      </Swiper>\r\n    </div>\r\n    <div v-if=\"badges.length === 0\" class=\"col-span-full\">\r\n      <EmptyState\r\n        icon=\"Activity\"\r\n        title=\"No badges collected yet\"\r\n        subtitle=\"Collect badges to earn XP and level up!\"\r\n        size=\"default\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.badge-swiper-container {\r\n  padding: 0.5rem 0;\r\n  margin: 0 -0.5rem;\r\n}\r\n\r\n.badge-swiper {\r\n  padding: 0 0.5rem;\r\n}\r\n\r\n.badge-swiper :deep(.swiper-slide) {\r\n  width: auto;\r\n  height: auto;\r\n  display: flex;\r\n}\r\n\r\n.badge-swiper :deep(.swiper-wrapper) {\r\n  display: flex;\r\n  align-items: stretch;\r\n}\r\n\r\n/* Ensure Swiper is scrollable */\r\n.badge-swiper-container :deep(.swiper) {\r\n  overflow: visible;\r\n}\r\n\r\n/* On mobile, make it horizontally scrollable */\r\n@media (max-width: 640px) {\r\n  .badge-swiper-container :deep(.swiper) {\r\n    overflow-x: auto;\r\n    overflow-y: visible;\r\n  }\r\n  \r\n  .badge-swiper-container :deep(.swiper-wrapper) {\r\n    flex-wrap: nowrap;\r\n  }\r\n}\r\n\r\n/* On desktop, show grid-like layout but still scrollable */\r\n@media (min-width: 640px) {\r\n  .badge-swiper-container :deep(.swiper) {\r\n    overflow: visible;\r\n  }\r\n}\r\n</style>","<!--\r\n  BadgesView\r\n  Purpose: Full list of all badges with filters\r\n-->\r\n<template>\r\n  <div class=\"mx-auto py-5 max-w-6xl\">\r\n    <!-- Header -->\r\n    <div class=\"mb-8\">\r\n      <h1 class=\"text-4xl font-bold text-gray-900 dark:text-white\">Badges</h1>\r\n      <p class=\"mt-2 text-gray-600 dark:text-white/80\">\r\n        Collect badges by completing achievements and leveling up\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Filters -->\r\n    <div class=\"mb-6 flex flex-col lg:flex-row gap-3\">\r\n      <!-- Status Filter -->\r\n      <div class=\"flex items-center gap-2\">\r\n        <span class=\"text-sm font-medium text-gray-700 dark:text-white/70\">Status:</span>\r\n        <button\r\n          v-for=\"status in statusFilters\"\r\n          :key=\"status.id\"\r\n          @click=\"activeStatusFilter = status.id\"\r\n          class=\"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200\"\r\n          :class=\"{\r\n            'bg-blue-500 text-white shadow-lg shadow-blue-500/30': activeStatusFilter === status.id,\r\n            'bg-gray-200 dark:bg-gray-900 text-gray-700 dark:text-white/70 hover:bg-gray-300 dark:hover:bg-gray-800': activeStatusFilter !== status.id\r\n          }\"\r\n        >\r\n          {{ status.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Type Filter -->\r\n      <div class=\"flex items-center gap-2\">\r\n        <span class=\"text-sm font-medium text-gray-700 dark:text-white/70\">Type:</span>\r\n        <div class=\"flex flex-row gap-2 overflow-x-auto\" v-mask-scroll>\r\n          <button\r\n            v-for=\"type in typeFilters\"\r\n            :key=\"type.id\"\r\n            @click=\"activeTypeFilter = type.id\"\r\n            class=\"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200\"\r\n            :class=\"{\r\n              'bg-purple-500 text-white shadow-lg shadow-purple-500/30': activeTypeFilter === type.id,\r\n              'bg-gray-200 dark:bg-gray-900 text-gray-700 dark:text-white/70 hover:bg-gray-300 dark:hover:bg-gray-800': activeTypeFilter !== type.id\r\n            }\"\r\n          >\r\n            {{ type.label }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Badges List -->\r\n    <div v-if=\"globalDataStore.loading\" class=\"relative z-10 text-center py-12\">\r\n      <LoadingSpinner />\r\n    </div>\r\n    <div v-else class=\"relative z-10\">\r\n      <BadgeList\r\n        :badges=\"filteredBadges\"\r\n        ui=\"grid\"\r\n        @view-badge=\"handleViewBadge\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useGlobalDataStore } from '@/stores/globalData'\r\nimport BadgeList from '@/components/gamification/BadgeList.vue'\r\nimport LoadingSpinner from '@/components/ui/LoadingSpinner.vue'\r\nimport EmptyState from '@/components/ui/EmptyState.vue'\r\n\r\nconst router = useRouter()\r\nconst globalDataStore = useGlobalDataStore()\r\n\r\n// Filters\r\nconst activeStatusFilter = ref('all') // all, earned, unearned\r\nconst activeTypeFilter = ref('all') // all, quality, contribution, rare, event\r\n\r\nconst statusFilters = [\r\n  { id: 'all', label: 'All' },\r\n  { id: 'earned', label: 'Earned' },\r\n  { id: 'unearned', label: 'Unearned' }\r\n]\r\n\r\nconst typeFilters = [\r\n  { id: 'all', label: 'All' },\r\n  { id: 'quality', label: 'Quality' },\r\n  { id: 'contribution', label: 'Contribution' },\r\n  { id: 'rare', label: 'Rare' },\r\n  { id: 'event', label: 'Event' }\r\n]\r\n\r\n// Get all badges and earned badges from global data store\r\nconst allBadges = computed(() => globalDataStore.allBadges)\r\nconst earnedBadges = computed(() => globalDataStore.earnedBadges)\r\n\r\n// Create a map of earned badge IDs for quick lookup\r\nconst earnedBadgeIds = computed(() => {\r\n  return new Set(earnedBadges.value.map(badge => badge.id))\r\n})\r\n\r\n// Filter badges based on active filters\r\nconst filteredBadges = computed(() => {\r\n  let badges = [...allBadges.value]\r\n\r\n  // Filter by status\r\n  if (activeStatusFilter.value === 'earned') {\r\n    badges = badges.filter(badge => earnedBadgeIds.value.has(badge.id))\r\n  } else if (activeStatusFilter.value === 'unearned') {\r\n    badges = badges.filter(badge => !earnedBadgeIds.value.has(badge.id))\r\n  }\r\n\r\n  // Filter by type\r\n  if (activeTypeFilter.value !== 'all') {\r\n    badges = badges.filter(badge => badge.type === activeTypeFilter.value)\r\n  }\r\n\r\n  // Add awarded_at property based on earned status\r\n  badges = badges.map(badge => ({\r\n    ...badge,\r\n    awarded_at: earnedBadgeIds.value.has(badge.id) ? earnedBadges.value.find(eb => eb.id === badge.id)?.awarded_at : null\r\n  }))\r\n\r\n  return badges\r\n})\r\n\r\nonMounted(async () => {\r\n  try {\r\n    // Fetch global data if not already loaded\r\n    if (!globalDataStore.payload) {\r\n      await globalDataStore.fetchGlobalData({ force: true })\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading badges:', error)\r\n  }\r\n})\r\n\r\nconst handleViewBadge = (badgeSlug) => {\r\n  router.push(`/badges/${badgeSlug}`)\r\n}\r\n</script>\r\n"],"names":["emit","__emit","handleBadgeClick","badge","swiperModules","_createElementBlock","__props","_openBlock","_hoisted_1","_Fragment","_renderList","_createBlock","BadgeItem","_hoisted_2","_createVNode","_unref","Swiper","SwiperSlide","_hoisted_3","EmptyState","router","useRouter","globalDataStore","useGlobalDataStore","activeStatusFilter","ref","activeTypeFilter","statusFilters","typeFilters","allBadges","computed","earnedBadges","earnedBadgeIds","filteredBadges","badges","_a","eb","onMounted","error","handleViewBadge","badgeSlug","_createElementVNode","_cache","status","$event","_toDisplayString","_hoisted_4","_hoisted_5","_withDirectives","_hoisted_6","type","_hoisted_7","_hoisted_8","LoadingSpinner","_hoisted_9","BadgeList"],"mappings":"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"}