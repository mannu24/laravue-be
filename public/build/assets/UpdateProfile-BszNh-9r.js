import{c as se,_ as W,t as X,j as Y,p as f,q as K,b as m,o as d,D as t,d as l,x as C,w as u,H as w,u as e,A,C as $,z as r,X as Q,G as Z,M as F,ap as re,F as I,E as N,a8 as ee,f as E,ar as le,I as U,k as oe}from"./app-BusCMfsw.js";import{_ as j}from"./Input-dzzXGP-d.js";import{_ as P}from"./Label-DR-rIVHd.js";import{_ as R}from"./Card-rloiMM0U.js";import{_ as q}from"./CardContent-DRH463jB.js";import{_ as G}from"./CardDescription-CtTeBqrV.js";import{_ as H,a as O}from"./CardTitle-BaSWMxRf.js";import{_ as ie}from"./ConfirmDialog-C7h6FdHb.js";import{P as ne}from"./plus-b7EtdpYp.js";import{L as ae}from"./loader-circle-C3MxRGn-.js";import{E as de}from"./eye-dx6brfk1.js";import{T as ue}from"./trash-2-Czg8HS1a.js";import{A as ce}from"./arrow-left-rkhBD1L5.js";import{U as J}from"./user-CaHqtWKQ.js";import{U as me}from"./upload-Coa8UFFP.js";import{C as ge}from"./circle-alert-CVqoJgI8.js";import{C as pe}from"./circle-check-big-DtbQHcae.js";import{L as ve}from"./link-BB35o6eg.js";import"./index-pO4B5Iiz.js";import"./AlertDialogTitle-CaEIQJxU.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=se("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ye={class:"social-links-manager"},he={class:"mb-6"},xe={class:"flex items-center justify-between mb-4"},be={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-end"},ke={class:"w-full sm:w-1/3"},_e=["value"],we={class:"w-full sm:w-1/2"},De={class:"flex gap-2"},$e={key:1},Ae={key:2},Ce={key:0},Ue={class:"flex-1 min-w-0"},Se={class:"flex items-center gap-2 mb-1"},Le=["href"],Pe={class:"flex items-center gap-2"},Ee={__name:"SocialLinksManager",setup(te){const s=X(),g=Y(),h=f([]),D=f([]),c=f({social_link_type_id:"",username:""}),b=f(!1),y=f(!1),x=f(!1),k=f(null),n=async()=>{try{const a=await U.get("/api/v1/social-links",{headers:{Authorization:`Bearer ${g.token}`}});h.value=a.data.data||[]}catch(a){console.error("Error fetching social links:",a),h.value=[]}},z=async()=>{try{const a=await U.get("/api/v1/social-links/types",{headers:{Authorization:`Bearer ${g.token}`}});D.value=a.data||[]}catch(a){console.error("Error fetching social link types:",a)}},B=async()=>{y.value=!0;try{const a=await U.post("/api/v1/social-links",c.value,{headers:{Authorization:`Bearer ${g.token}`}});h.value.push(a.data.data),c.value={social_link_type_id:"",username:""},b.value=!1}catch(a){console.error("Error adding social link:",a),alert("Failed to add social link. Please try again.")}finally{y.value=!1}},M=async a=>{try{const o=await U.put(`/api/v1/social-links/${a.id}`,{...a,is_visible:!a.is_visible},{headers:{Authorization:`Bearer ${g.token}`}});a.is_visible=o.data.data.is_visible}catch(o){console.error("Error toggling visibility:",o),alert("Failed to update visibility. Please try again.")}},V=a=>{k.value=a,x.value=!0},T=async()=>{if(k.value)try{await U.delete(`/api/v1/social-links/${k.value.id}`,{headers:{Authorization:`Bearer ${g.token}`}}),h.value=h.value.filter(a=>a.id!==k.value.id),k.value=null,x.value=!1}catch(a){console.error("Error deleting social link:",a),alert("Failed to delete social link. Please try again.")}},p=a=>a.replace(/^https?:\/\//,"").replace(/\/$/,"");return K(()=>{n(),z()}),(a,o)=>(d(),m("div",ye,[t("div",he,[l(e($),{onClick:o[0]||(o[0]=i=>b.value=!b.value),class:"bg-red-600 hover:bg-red-700 text-white"},{default:u(()=>[l(e(ne),{class:"h-4 w-4 mr-2"}),w(" "+A(b.value?"Cancel":"Add New Link"),1)]),_:1}),b.value?(d(),m("div",{key:0,class:r(["mt-4 p-6 border rounded-lg shadow-sm",[e(s).isDark?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"]])},[t("div",xe,[t("h3",{class:r(["text-lg font-medium",[e(s).isDark?"text-white":"text-gray-900"]])}," Add New Social Profile ",2),l(e($),{variant:"ghost",size:"icon",onClick:o[1]||(o[1]=i=>b.value=!1),class:"h-8 w-8"},{default:u(()=>[l(e(Q),{class:"h-4 w-4"})]),_:1})]),t("form",{onSubmit:Z(B,["prevent"])},[t("div",be,[t("div",ke,[t("label",{class:r(["block text-sm font-medium mb-1.5",[e(s).isDark?"text-gray-300":"text-gray-700"]])}," Platform ",2),F(t("select",{"onUpdate:modelValue":o[2]||(o[2]=i=>c.value.social_link_type_id=i),class:r(["w-full h-10 rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",[e(s).isDark?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"]]),required:""},[o[5]||(o[5]=t("option",{value:""},"Select Platform",-1)),(d(!0),m(I,null,N(D.value,i=>(d(),m("option",{key:i.id,value:i.id},A(i.name),9,_e))),128))],2),[[re,c.value.social_link_type_id]])]),t("div",we,[t("label",{class:r(["block text-sm font-medium mb-1.5",[e(s).isDark?"text-gray-300":"text-gray-700"]])}," Username/URL ",2),F(t("input",{"onUpdate:modelValue":o[3]||(o[3]=i=>c.value.username=i),type:"text",class:r(["flex h-10 w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",[e(s).isDark?"bg-gray-800 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"]]),placeholder:"Enter username or full URL",required:""},null,2),[[ee,c.value.username]])]),t("div",De,[l(e($),{type:"submit",disabled:y.value,class:"min-w-[80px]"},{default:u(()=>[y.value?(d(),E(e(ae),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):C("",!0),y.value?(d(),m("span",$e,"Adding...")):(d(),m("span",Ae,"Add"))]),_:1},8,["disabled"])])])],32)],2)):C("",!0)]),h.value.length>0?(d(),m("div",Ce,[l(le,{name:"list",tag:"div",class:"space-y-3"},{default:u(()=>[(d(!0),m(I,null,N(h.value,i=>(d(),m("div",{key:i.id,class:r(["flex items-center gap-4 p-4 rounded-lg border transition-all",[e(s).isDark?"bg-gray-800/50 border-gray-700 hover:border-gray-600 hover:bg-gray-800/70":"bg-white border-gray-200 hover:border-gray-300 hover:bg-gray-50"]])},[t("div",{class:r(["flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-full",[e(s).isDark?"bg-gray-800/70 border border-gray-700":"bg-gray-100 border border-gray-200"]])},[t("i",{class:r([i.social_link_type.icon,"text-xl",e(s).isDark?"text-white":"text-gray-700"])},null,2)],2),t("div",Ue,[t("div",Se,[t("h4",{class:r(["font-medium",[e(s).isDark?"text-white":"text-gray-900"]])},A(i.social_link_type.name),3),i.is_visible?C("",!0):(d(),m("span",{key:0,class:r(["px-1.5 py-0.5 rounded-full text-xs font-medium",[e(s).isDark?"bg-gray-600 text-gray-300":"bg-gray-200 text-gray-600"]])}," Hidden ",2))]),t("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",class:r(["text-sm hover:underline truncate block",[e(s).isDark?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"]])},A(p(i.username)),11,Le)]),t("div",Pe,[l(e($),{variant:"ghost",size:"icon",onClick:L=>M(i),title:i.is_visible?"Hide from profile":"Show on profile",class:r(["h-9 w-9 rounded-full",[e(s).isDark?"hover:bg-gray-600 text-gray-300":"hover:bg-gray-100 text-gray-600"]])},{default:u(()=>[i.is_visible?(d(),E(e(de),{key:0,class:"h-4 w-4"})):(d(),E(e(fe),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick","title","class"]),l(e($),{variant:"ghost",size:"icon",onClick:L=>V(i),title:"Delete link",class:r(["h-9 w-9 rounded-full",[e(s).isDark?"hover:bg-gray-600 text-gray-300 hover:text-red-400":"hover:bg-gray-100 text-gray-600 hover:text-red-600"]])},{default:u(()=>[l(e(ue),{class:"h-4 w-4"})]),_:1},8,["onClick","class"])])],2))),128))]),_:1})])):(d(),m("div",{key:1,class:r(["flex flex-col items-center justify-center py-12 text-center border rounded-lg",[e(s).isDark?"border-gray-600 bg-gray-700/30":"border-gray-200 bg-gray-50"]])},[t("div",{class:r(["rounded-full p-4 mb-4",[e(s).isDark?"bg-gray-600":"bg-gray-200"]])},[(d(),m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:r([e(s).isDark?"text-gray-400":"text-gray-500"])},[...o[6]||(o[6]=[t("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},null,-1),t("polyline",{points:"15 3 21 3 21 9"},null,-1),t("line",{x1:"10",y1:"14",x2:"21",y2:"3"},null,-1)])],2))],2),t("h3",{class:r(["text-lg font-medium mb-1",[e(s).isDark?"text-white":"text-gray-900"]])}," No social profiles yet ",2),t("p",{class:r([e(s).isDark?"text-gray-400":"text-gray-600"])}," Add your social media profiles to share with others. ",2)],2)),l(ie,{open:x.value,"onUpdate:open":o[4]||(o[4]=i=>x.value=i),title:"Delete Social Link",description:"Are you sure you want to delete this social link? This action cannot be undone.","confirm-text":"Delete","cancel-text":"Cancel",variant:"destructive",onConfirm:T},null,8,["open"])]))}},ze=W(Ee,[["__scopeId","data-v-42a46a6d"]]),Be={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Me={class:"flex items-center gap-4 mb-8"},Ve={class:"space-y-6"},Te={class:"flex items-center gap-3"},Fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie={class:"space-y-2"},Ne={class:"space-y-2"},je={class:"space-y-3"},Re={class:"flex items-start gap-4"},qe={class:"flex-shrink-0"},Ge=["src"],He={class:"flex-1"},Oe={class:"text-sm font-medium"},Je={class:"space-y-2"},We={class:"flex items-start gap-2"},Xe={class:"flex items-start gap-2"},Ye={class:"flex gap-3 pt-4"},Ke={key:1},Qe={key:2},Ze={class:"flex items-center gap-3"},ea={__name:"UpdateProfile",setup(te){const s=X(),g=Y(),h=oe();f(!1);const D=f(!1),c=f(""),b=f(""),y=f(null),x=f(null),k=f(null),n=f({name:"",email:"",bio:""}),z=()=>{if(!g.isAuthenticated){h.push({name:"login"});return}const p=g.user;p&&(n.value={name:p.name||"",email:p.email||"",bio:p.bio||""},x.value=p.profile_photo||p.avatar||null)},B=p=>{const a=p.target.files[0];if(a){if(!a.type.startsWith("image/")){c.value="Please select a valid image file.";return}if(a.size>5*1024*1024){c.value="Image size must be less than 5MB.";return}y.value=a;const o=new FileReader;o.onload=i=>{x.value=i.target.result},o.readAsDataURL(a),c.value=""}},M=()=>{var p,a;y.value=null,x.value=((p=g.user)==null?void 0:p.profile_photo)||((a=g.user)==null?void 0:a.avatar)||null,k.value&&(k.value.value="")},V=p=>{p.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(n.value.name||"User")}&background=6366f1&color=fff&size=200`},T=async()=>{var a,o,i,L;if(!g.isAuthenticated)return;if(c.value="",b.value="",!n.value.name||!n.value.email){c.value="Name and email are required fields.";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)){c.value="Please enter a valid email address.";return}if(n.value.name.length>255){c.value="Name must not exceed 255 characters.";return}if(n.value.email.length>255){c.value="Email must not exceed 255 characters.";return}if(n.value.bio&&n.value.bio.length>1e3){c.value="Bio must not exceed 1000 characters.";return}D.value=!0;try{const _=new FormData;_.append("name",n.value.name),_.append("email",n.value.email),n.value.bio&&_.append("bio",n.value.bio),y.value&&_.append("avatar",y.value);const S=await U.post("/api/v1/user",_,{...g.config,headers:{...g.config.headers,"Content-Type":"multipart/form-data"}});if(S.data.status==="success"){if(g.user&&S.data.data){const v=S.data.data;g.user={...g.user,name:n.value.name,email:n.value.email,bio:n.value.bio,avatar:v.avatar||v.profile_photo,profile_photo:v.profile_photo||v.avatar},(v.profile_photo||v.avatar)&&(x.value=v.profile_photo||v.avatar)}y.value=null,k.value&&(k.value.value=""),b.value="Profile updated successfully!",setTimeout(()=>{var v;h.push({name:"profile",params:{username:(v=g.user)==null?void 0:v.username}})},1500)}}catch(_){if(console.error("Error updating profile:",_),(o=(a=_.response)==null?void 0:a.data)!=null&&o.errors){const S=_.response.data.errors,v=Object.values(S)[0];c.value=Array.isArray(v)?v[0]:v}else(L=(i=_.response)==null?void 0:i.data)!=null&&L.message?c.value=_.response.data.message:c.value="Failed to update profile. Please try again."}finally{D.value=!1}};return K(()=>{z()}),(p,a)=>(d(),m("div",{class:r(["min-h-screen transition-colors duration-300",e(s).isDark?"bg-gray-950":"bg-gray-50"])},[t("div",Be,[t("div",Me,[l(e($),{variant:"ghost",size:"icon",onClick:a[0]||(a[0]=o=>e(h).back()),class:"flex-shrink-0"},{default:u(()=>[l(e(ce),{class:"h-5 w-5"})]),_:1}),t("div",null,[t("h1",{class:r(["text-3xl font-bold",[e(s).isDark?"text-white":"text-gray-900"]])}," Update Profile ",2),t("p",{class:r(["text-sm mt-1",[e(s).isDark?"text-gray-400":"text-gray-600"]])}," Update your profile information and manage your social links ",2)])]),t("div",Ve,[l(e(R),{class:r(["border-0 shadow-sm",e(s).isDark?"bg-gray-900/50":"bg-white"])},{default:u(()=>[l(e(H),null,{default:u(()=>[t("div",Te,[t("div",{class:r(["p-2 rounded-lg",[e(s).isDark?"bg-blue-900/30":"bg-blue-100"]])},[l(e(J),{class:r(["h-5 w-5",[e(s).isDark?"text-blue-400":"text-blue-600"]])},null,8,["class"])],2),t("div",null,[l(e(O),{class:r([e(s).isDark?"text-white":"text-gray-900"])},{default:u(()=>[...a[5]||(a[5]=[w(" Basic Information ",-1)])]),_:1},8,["class"]),l(e(G),{class:r([e(s).isDark?"text-gray-400":"text-gray-600"])},{default:u(()=>[...a[6]||(a[6]=[w(" Update your name, email, bio, and avatar ",-1)])]),_:1},8,["class"])])])]),_:1}),l(e(q),null,{default:u(()=>[t("form",{onSubmit:Z(T,["prevent"]),class:"space-y-6"},[t("div",Fe,[t("div",Ie,[l(e(P),{class:r([[e(s).isDark?"text-white":"text-gray-900"],"text-sm font-medium"])},{default:u(()=>[...a[7]||(a[7]=[w(" Name ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1},8,["class"]),l(e(j),{modelValue:n.value.name,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value.name=o),type:"text",required:"",placeholder:"Your name",class:r([e(s).isDark?"bg-gray-800 border-gray-700":"bg-white border-gray-300"]),maxlength:"255"},null,8,["modelValue","class"])]),t("div",Ne,[l(e(P),{class:r([[e(s).isDark?"text-white":"text-gray-900"],"text-sm font-medium"])},{default:u(()=>[...a[8]||(a[8]=[w(" Email ",-1),t("span",{class:"text-red-500"},"*",-1)])]),_:1},8,["class"]),l(e(j),{modelValue:n.value.email,"onUpdate:modelValue":a[2]||(a[2]=o=>n.value.email=o),type:"email",required:"",placeholder:"your.email@example.com",class:r([e(s).isDark?"bg-gray-800 border-gray-700":"bg-white border-gray-300"]),maxlength:"255"},null,8,["modelValue","class"])])]),t("div",je,[l(e(P),{class:r([[e(s).isDark?"text-white":"text-gray-900"],"text-sm font-medium"])},{default:u(()=>[...a[9]||(a[9]=[w(" Avatar ",-1)])]),_:1},8,["class"]),t("div",Re,[t("div",qe,[t("div",{class:r(["relative w-24 h-24 rounded-full overflow-hidden border-2",[e(s).isDark?"border-gray-700":"border-gray-300"]])},[x.value?(d(),m("img",{key:0,src:x.value,alt:"Avatar preview",class:"w-full h-full object-cover",onError:V},null,40,Ge)):(d(),m("div",{key:1,class:r(["w-full h-full flex items-center justify-center",[e(s).isDark?"bg-gray-800":"bg-gray-100"]])},[l(e(J),{class:r(["h-8 w-8",[e(s).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"])],2)),x.value||y.value?(d(),m("button",{key:2,type:"button",onClick:M,class:"absolute top-0 right-0 p-1 rounded-full bg-red-500 text-white hover:bg-red-600 transition-colors"},[l(e(Q),{class:"h-3 w-3"})])):C("",!0)],2)]),t("div",He,[t("input",{ref_key:"fileInputRef",ref:k,type:"file",accept:"image/*",onChange:B,class:"hidden",id:"avatar-upload"},null,544),t("label",{for:"avatar-upload",class:r(["inline-flex items-center justify-center px-4 py-2 rounded-md border cursor-pointer transition-colors",[e(s).isDark?"bg-gray-800 border-gray-700 hover:bg-gray-700 text-white":"bg-white border-gray-300 hover:bg-gray-50 text-gray-900"]])},[l(e(me),{class:"h-4 w-4 mr-2"}),t("span",Oe,A(y.value?"Change Avatar":"Upload Avatar"),1)],2),t("p",{class:r(["text-xs mt-2",[(e(s).isDark,"text-gray-500")]])}," JPG, PNG or GIF. Max size 5MB. ",2)])])]),t("div",Je,[l(e(P),{class:r([[e(s).isDark?"text-white":"text-gray-900"],"text-sm font-medium"])},{default:u(()=>[...a[10]||(a[10]=[w(" Bio ",-1)])]),_:1},8,["class"]),F(t("textarea",{"onUpdate:modelValue":a[3]||(a[3]=o=>n.value.bio=o),rows:"3",class:r(["w-full rounded-md border px-3 py-2 text-sm resize-none",[e(s).isDark?"bg-gray-800 border-gray-700 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"]]),placeholder:"Tell us about yourself...",maxlength:"1000"},null,2),[[ee,n.value.bio]]),t("p",{class:r(["text-xs",[(e(s).isDark,"text-gray-500")]])},A((n.value.bio||"").length)+" / 1000 characters ",3)]),c.value?(d(),m("div",{key:0,class:r(["p-3 rounded-lg border",[e(s).isDark?"bg-red-900/20 border-red-800/50":"bg-red-50 border-red-200"]])},[t("div",We,[l(e(ge),{class:r(["h-4 w-4 mt-0.5 flex-shrink-0",[e(s).isDark?"text-red-400":"text-red-600"]])},null,8,["class"]),t("p",{class:r(["text-xs",[e(s).isDark?"text-red-300":"text-red-700"]])},A(c.value),3)])],2)):C("",!0),b.value?(d(),m("div",{key:1,class:r(["p-3 rounded-lg border",[e(s).isDark?"bg-green-900/20 border-green-800/50":"bg-green-50 border-green-200"]])},[t("div",Xe,[l(e(pe),{class:r(["h-4 w-4 mt-0.5 flex-shrink-0",[e(s).isDark?"text-green-400":"text-green-600"]])},null,8,["class"]),t("p",{class:r(["text-xs",[e(s).isDark?"text-green-300":"text-green-700"]])},A(b.value),3)])],2)):C("",!0),t("div",Ye,[l(e($),{type:"submit",disabled:D.value,class:"min-w-[120px]"},{default:u(()=>[D.value?(d(),E(e(ae),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):C("",!0),D.value?(d(),m("span",Ke,"Saving...")):(d(),m("span",Qe,"Save Changes"))]),_:1},8,["disabled"]),l(e($),{type:"button",variant:"outline",onClick:a[4]||(a[4]=o=>e(h).back()),disabled:D.value},{default:u(()=>[...a[11]||(a[11]=[w(" Cancel ",-1)])]),_:1},8,["disabled"])])],32)]),_:1})]),_:1},8,["class"]),l(e(R),{class:r(["border-0 shadow-sm",e(s).isDark?"bg-gray-900/50":"bg-white"])},{default:u(()=>[l(e(H),null,{default:u(()=>[t("div",Ze,[t("div",{class:r(["p-2 rounded-lg",[e(s).isDark?"bg-purple-900/30":"bg-purple-100"]])},[l(e(ve),{class:r(["h-5 w-5",[e(s).isDark?"text-purple-400":"text-purple-600"]])},null,8,["class"])],2),t("div",null,[l(e(O),{class:r([e(s).isDark?"text-white":"text-gray-900"])},{default:u(()=>[...a[12]||(a[12]=[w(" Social Links ",-1)])]),_:1},8,["class"]),l(e(G),{class:r([e(s).isDark?"text-gray-400":"text-gray-600"])},{default:u(()=>[...a[13]||(a[13]=[w(" Add and manage your social media profiles ",-1)])]),_:1},8,["class"])])])]),_:1}),l(e(q),null,{default:u(()=>[l(ze)]),_:1})]),_:1},8,["class"])])])],2))}},ka=W(ea,[["__scopeId","data-v-ff95e292"]]);export{ka as default};
//# sourceMappingURL=UpdateProfile-BszNh-9r.js.map
