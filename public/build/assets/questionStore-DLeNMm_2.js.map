{"version":3,"file":"questionStore-DLeNMm_2.js","sources":["../../../resources/js/stores/questionStore.js"],"sourcesContent":["/**\r\n * Question Store\r\n * Manages questions, search, and question creation\r\n */\r\nimport { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport api from '@/lib/api'\r\nimport endpoints from '@/lib/endpoints'\r\n\r\nexport const useQuestionStore = defineStore('question', () => {\r\n  // State\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n  const questions = ref([])\r\n  const singleQuestion = ref(null)\r\n  const searchResults = ref([])\r\n  const pagination = ref({\r\n    current_page: 1,\r\n    last_page: 1,\r\n    per_page: 20,\r\n    total: 0\r\n  })\r\n\r\n  // Getters\r\n  const allQuestions = computed(() => questions.value)\r\n  const currentQuestion = computed(() => singleQuestion.value)\r\n  const searchResultsList = computed(() => searchResults.value)\r\n\r\n  /**\r\n   * Fetch questions with pagination\r\n   * @param {object} params - Query parameters (page, per_page)\r\n   */\r\n  const fetchQuestions = async (params = {}) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.questions.list(), params)\r\n      questions.value = response.data.data\r\n      \r\n      // Update pagination if available\r\n      if (response.data.meta) {\r\n        pagination.value = {\r\n          current_page: response.data.meta.current_page || 1,\r\n          last_page: response.data.meta.last_page || 1,\r\n          per_page: response.data.meta.per_page || 20,\r\n          total: response.data.meta.total || 0\r\n        }\r\n      }\r\n      \r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch questions'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Search questions\r\n   * @param {string} query - Search query\r\n   * @param {object} params - Additional query parameters\r\n   */\r\n  const searchQuestions = async (query, params = {}) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.questions.search(), {\r\n        query,\r\n        ...params\r\n      })\r\n      searchResults.value = response.data.data\r\n      questions.value = response.data.data // Also update main questions list\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to search questions'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new question\r\n   * @param {object} payload - Question data\r\n   */\r\n  const askQuestion = async (payload) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.post(endpoints.questions.create(), payload)\r\n      const newQuestion = response.data.data\r\n      \r\n      // Add to questions list\r\n      questions.value.unshift(newQuestion)\r\n      \r\n      return newQuestion\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to create question'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load single question with answers\r\n   * @param {number|string} id - Question ID\r\n   */\r\n  const loadSingleQuestion = async (id) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.questions.show(id))\r\n      singleQuestion.value = response.data.data\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch question'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load more questions (pagination)\r\n   */\r\n  const loadMoreQuestions = async () => {\r\n    if (pagination.value.current_page >= pagination.value.last_page) {\r\n      return\r\n    }\r\n    \r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const nextPage = pagination.value.current_page + 1\r\n      const response = await api.get(endpoints.questions.list(), {\r\n        page: nextPage,\r\n        per_page: pagination.value.per_page\r\n      })\r\n      \r\n      // Append to existing questions\r\n      questions.value = [...questions.value, ...response.data.data]\r\n      \r\n      // Update pagination\r\n      if (response.data.meta) {\r\n        pagination.value = {\r\n          current_page: response.data.meta.current_page || nextPage,\r\n          last_page: response.data.meta.last_page || 1,\r\n          per_page: response.data.meta.per_page || 20,\r\n          total: response.data.meta.total || 0\r\n        }\r\n      }\r\n      \r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to load more questions'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear question data\r\n   */\r\n  const clearQuestions = () => {\r\n    questions.value = []\r\n    singleQuestion.value = null\r\n    searchResults.value = []\r\n    error.value = null\r\n  }\r\n\r\n  return {\r\n    // State\r\n    loading,\r\n    error,\r\n    questions,\r\n    singleQuestion,\r\n    searchResults,\r\n    pagination,\r\n    // Getters\r\n    allQuestions,\r\n    currentQuestion,\r\n    searchResultsList,\r\n    // Actions\r\n    fetchQuestions,\r\n    searchQuestions,\r\n    askQuestion,\r\n    loadSingleQuestion,\r\n    loadMoreQuestions,\r\n    clearQuestions\r\n  }\r\n})\r\n\r\n"],"names":["useQuestionStore","defineStore","loading","ref","error","questions","singleQuestion","searchResults","pagination","allQuestions","computed","currentQuestion","searchResultsList","params","response","api","endpoints","err","_b","_a","query","payload","newQuestion","id","nextPage"],"mappings":"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"}