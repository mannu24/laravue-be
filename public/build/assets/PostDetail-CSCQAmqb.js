import{r as C,a as L,z as T,o as m,b as _,d as n,f as a,w as l,y as h,t as w,e as i,g as k,l as $,V as P,n as V,p as B,v as M,i as N,F as z,h as U,j as D,ak as j,P as E,a5 as F,X as H,m as R}from"./app-BYKYNp4m.js";import{a as q,b as G,c as W,d as X,e as I,f as J,g as K,h as O,i as Q,P as Y}from"./PostCard-kDCaobDP.js";import{_ as Z}from"./CardFooter-CQ0oXYle.js";import"./DialogContent-DSvNf_40.js";const ee={class:"bg-gray-800/80 mt-4 shadow-md rounded-lg overflow-hidden mb-4 hover:cursor-pointer hover:bg-gray-700/40 transition-all duration-350 ease-in"},te={class:"flex items-center p-4"},se=["src"],oe={key:1,src:"/assets/front/images/user.png",alt:"User Avatar",class:"w-8 h-8 rounded-full"},ne={class:"font-semibold text-white"},ae={class:"text-xs text-gray-500"},le={key:0,class:"relative inline-block ml-auto self-start"},ie={key:0,class:"absolute right-0 z-10 mt-2 w-32 origin-top-right divide-y divide-gray-100 ring-1 shadow-lg ring-black/5 focus:outline-hidden",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabindex:"-1"},re={class:"",role:"none"},me={class:"px-4"},ce={class:"font-bold text-xl text-white text-gray-800 mb-0"},ue=["innerHTML"],de={class:"flex items-center space-x-4"},fe=["title"],ve={class:"flex items-center space-x-2"},pe={class:"text-white text-sm"},he={__name:"CommentCard",props:["comment"],emits:["commentDeleted","commentLiked"],setup(t,{emit:y}){const c=C(!1),u=L(),d=y,g=async()=>{if(!u.isAuthenticated)$router.push("/login");else{const f=await axios.get(`/api/v1/comment/like-unlike/${t.comment.id}`,u.config);f.data.status=="success"?d("commentLiked",[t.comment.id,f.data.liked]):alert("Something went wrong")}},s=async()=>{c.value=!1,await axios.delete(`/api/v1/post/comment/${t.comment.id}`,u.config).then(()=>{d("commentDeleted",t.comment.id)})},b=f=>f.replace(/@(\w+)/g,'<a href="/$1">@$1</a>');return(f,e)=>{const v=T("router-link");return m(),_("div",ee,[n("div",te,[a(v,{to:"/"+t.comment.user.username,onClick:e[0]||(e[0]=h(()=>{},["stop"]))},{default:l(()=>{var p,x;return[(p=t.comment.user)!=null&&p.profile_photo?(m(),_("img",{key:0,src:(x=t.comment.user)==null?void 0:x.profile_photo,alt:"User Avatar",class:"w-8 h-8 rounded-full"},null,8,se)):(m(),_("img",oe))]}),_:1},8,["to"]),a(v,{onClick:e[1]||(e[1]=h(()=>{},["stop"])),to:"/"+t.comment.user.username,class:"ml-3"},{default:l(()=>[n("p",ne,w(t.comment.user.name),1),n("p",ae,"@"+w(t.comment.user.username),1)]),_:1},8,["to"]),i(u).isAuthenticated&&t.comment.owner?(m(),_("div",le,[n("i",{class:"fas fa-ellipsis-v cursor-pointer text-white p-2",onClick:e[2]||(e[2]=h(p=>c.value=!c.value,["stop"]))}),a(P,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:l(()=>[c.value?(m(),_("div",ie,[n("div",re,[a(i(q),null,{default:l(()=>[a(i(G),{"as-child":""},{default:l(()=>[n("div",{onClick:e[3]||(e[3]=h(()=>{},["stop"])),class:"block px-4 py-2 text-sm text-gray-700 transition-all duration-150 ease-in-out rounded-md bg-white hover:bg-gray-200"},e[5]||(e[5]=[n("i",{class:"fas fa-trash mr-1"},null,-1),k(" Delete ")]))]),_:1}),a(i(W),null,{default:l(()=>[a(i(X),null,{default:l(()=>[a(i(I),null,{default:l(()=>e[6]||(e[6]=[k("Are you absolutely sure?")])),_:1}),a(i(J),null,{default:l(()=>e[7]||(e[7]=[k(" This action cannot be undone. This will delete your comment. ")])),_:1})]),_:1}),a(i(K),null,{default:l(()=>[a(i(O),null,{default:l(()=>e[8]||(e[8]=[k("Cancel")])),_:1}),a(i(Q),{onClick:h(s,["stop"])},{default:l(()=>e[9]||(e[9]=[k("Continue")])),_:1})]),_:1})]),_:1})]),_:1})])])):$("",!0)]),_:1})])):$("",!0)]),n("div",me,[n("h3",ce,w(t.comment.title),1),n("p",{class:"text-gray-700 mb-2 text-white",innerHTML:b(t.comment.content),onClick:e[4]||(e[4]=h(()=>{},["stop"]))},null,8,ue)]),a(i(Z),{class:"flex items-center justify-between p-4 pt-0"},{default:l(()=>[n("div",de,[n("span",{title:t.comment.likes_count+" Likes",class:"text-white hover:text-red-400"},[n("i",{class:V(["fa-heart",t.comment.liked?"fas text-red-500":"far"]),onClick:h(g,["stop"])},null,2),k("Â "+w(t.comment.likes_count),1)],8,fe)]),n("div",ve,[n("span",pe,w(t.comment.posted_at),1)])]),_:1})])}}},_e={__name:"CommentSection",props:["comments","post_code"],emits:["commentAdded","commentDeleted","commentLiked"],setup(t,{emit:y}){const c=y,u=L(),d=C(""),g=C(!1),s=e=>{c("commentDeleted",e)},b=e=>{c("commentLiked",e)},f=async()=>{g.value=!0;const e=await axios.post("/api/v1/post/comment",{code:t.post_code,content:d.value},u.config);g.value=!1,e.data.status=="success"&&(d.value="",c("commentAdded",e.data.comment))};return(e,v)=>(m(),_("div",null,[n("form",{onSubmit:h(f,["prevent"])},[B(n("textarea",{rows:"3",required:"","onUpdate:modelValue":v[0]||(v[0]=p=>d.value=p),placeholder:"Write a comment...",class:"bg-gray-800/80 w-full shadow-md rounded-lg overflow-hidden text-white p-3 mb-4 focus:outline-0 hover:cursor-pointer hover:bg-gray-700/40 transition-all duration-350 ease-in"},null,512),[[M,d.value]]),a(i(N),{type:"submit",class:"bg-green-600 hover:bg-green-700",disabled:g.value},{default:l(()=>v[1]||(v[1]=[k(" Submit Post ")])),_:1},8,["disabled"])],32),a(j,{name:"fade",appear:""},{default:l(()=>[(m(!0),_(z,null,U(t.comments,(p,x)=>(m(),D(he,{key:x,onCommentLiked:b,onCommentDeleted:s,comment:p},null,8,["comment"]))),128))]),_:1})]))}},ge={class:"max-w-2xl mx-auto mt-[40px] sm:px-6 pb-5"},Ce={__name:"PostDetail",emits:["share_url"],setup(t,{emit:y}){const c=F(),u=R(),d=L(),g=c.params.post_code,s=C(null),b=y,f=async()=>{try{const o=await H.get(`/api/v1/posts/post_${g}`,d.config);s.value=o.data}catch(o){console.error("Error fetching post:",o)}},e=o=>{b("share_url",o)},v=o=>{u.push("/feed")},p=async o=>{s.value.liked=o[1],o[1]?s.value.likes_count++:s.value.likes_count--},x=async o=>{s.value.comments.find(r=>r.id==o[0]).liked=o[1],o[1]?s.value.comments.find(r=>r.id==o[0]).likes_count++:s.value.comments.find(r=>r.id==o[0]).likes_count--},S=o=>{s.value.comments=s.value.comments.filter(r=>r.id!==o),s.value.comments_count--},A=o=>{s.value.comments.push(o),s.value.comments_count++};return E(f),(o,r)=>(m(),_("div",ge,[n("h4",{class:"text-vue hover:text-laravel transition-all duration-300 ease-in mb-5 cursor-pointer",onClick:r[0]||(r[0]=ke=>i(u).push("/feed"))},r[1]||(r[1]=[n("i",{class:"fas fa-chevron-left fa-sm"},null,-1),n("span",{class:"text-lg"}," Back",-1)])),s.value?(m(),D(Y,{key:0,onShare_url:e,onLiked_action:p,onDelete_post:v,post:s.value},null,8,["post"])):$("",!0),s.value?(m(),D(_e,{key:1,onCommentLiked:x,onCommentDeleted:S,onCommentAdded:A,type:"post",post_code:s.value.post_code,comments:s.value.comments},null,8,["post_code","comments"])):$("",!0)]))}};export{Ce as default};
//# sourceMappingURL=PostDetail-CSCQAmqb.js.map
