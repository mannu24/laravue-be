import{c as G,j as J,t as O,aP as W,p,q as X,b as u,D as a,d as r,w as n,u as e,k as Y,C as S,z as t,H as g,f as C,A as _,K as Z,B as ee,P as se,x as h,F as te,E as ae,I as T,o as c}from"./app-Bvnl7d0n.js";import{_ as L}from"./Card-hOl-Usuy.js";import{_ as B}from"./CardContent-BNEtnmat.js";import{_ as A}from"./CardDescription-D99rUoTk.js";import{_ as M,a as $}from"./CardTitle-ITTEzIVV.js";import{_ as j}from"./Switch-BV02s58f.js";import{_ as U}from"./Label-Ds0Exrqp.js";import{A as re}from"./arrow-left-Bc2-To4n.js";import{L as ie}from"./loader-circle-D-hWkZPx.js";import{S as oe,M as le}from"./sun-DWMO_uiy.js";import{C as ne}from"./chevron-down-CF7e_OBe.js";import{C as ce}from"./chevron-up-ClYMuBWv.js";import{M as ue}from"./mail-COIIw_w6.js";import{C as q}from"./circle-alert-DO1FiHwh.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=G("SmartphoneIcon",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ge={class:"min-h-screen"},be={class:"max-w-4xl mx-auto py-5"},fe={class:"flex items-center gap-5 mb-5"},pe={key:0,class:"flex items-center justify-center py-16"},ve={class:"text-center"},me={key:1,class:"space-y-5"},xe={class:"flex items-center justify-between gap-4"},ye={class:"text-sm font-semibold"},he={class:"flex items-center justify-between"},ke={class:"flex items-center gap-3"},_e={class:"flex items-center gap-3"},we={class:"space-y-3"},De={class:"flex items-center gap-3"},Se={class:"flex-1"},Ce={key:0,class:"mt-2"},Ne={class:"flex items-start gap-2"},Pe={class:"flex items-start gap-2"},Ee={class:"flex-1"},Le={class:"flex items-start gap-2"},Ae={class:"flex items-center justify-between"},Me={class:"space-y-3"},Je={__name:"Settings",setup($e){const v=J(),s=O(),N=Y(),k=W(),P=p(!1),b=p(!1),w=p(!0),m=p(!0),x=p(!0),l=p("checking"),f=p(null),y=p({post_liked:!0,post_commented:!0,comment_liked:!0,question_liked:!0,question_upvoted:!0,question_answered:!0,answer_upvoted:!0,answer_replied:!0,mentioned:!0,followed:!0}),V={post_liked:"Post Likes",post_commented:"Post Comments",comment_liked:"Comment Likes",question_liked:"Question Likes",question_upvoted:"Question Upvotes",question_answered:"Question Answers",answer_upvoted:"Answer Upvotes",answer_replied:"Answer Replies",mentioned:"Mentions",followed:"New Followers"},z=async()=>{if(!v.isAuthenticated){N.push("/login");return}P.value=!0;try{const i=await T.get("/api/v1/settings/notifications",v.config);i.data.status==="success"&&(m.value=i.data.data.email_notifications??!0,x.value=i.data.data.push_notifications??!0,y.value=i.data.data.notification_preferences??y.value),await R()}catch(i){console.error("Error fetching notification settings:",i)}finally{P.value=!1}},R=async()=>{if(!k.isSupported){l.value="unsupported";return}try{const i=await k.checkSubscription(v);l.value=i?"subscribed":"not_subscribed"}catch(i){console.error("Error checking push subscription:",i),l.value="not_subscribed"}},I=async()=>{if(b.value)return;const i=!x.value;x.value=i,await E(),i&&l.value==="not_subscribed"?await F():!i&&l.value==="subscribed"&&await Q()},F=async()=>{var i,o;if(!k.isSupported){l.value="unsupported";return}l.value="checking",f.value=null;try{await k.subscribe(v)?l.value="subscribed":l.value="not_subscribed"}catch(d){console.error("Error subscribing to push notifications:",d),l.value="not_subscribed",(i=d.message)!=null&&i.includes("denied")||(o=d.message)!=null&&o.includes("permission")?(l.value="blocked",f.value="Notification permission was denied. Please enable it in your browser settings."):f.value=d.message||"Failed to subscribe to push notifications"}},Q=async()=>{try{await k.unsubscribe(v),l.value="not_subscribed",f.value=null}catch(i){console.error("Error unsubscribing from push notifications:",i),f.value=i.message||"Failed to unsubscribe from push notifications"}},E=async()=>{if(!v.isAuthenticated){N.push("/login");return}b.value=!0;try{(await T.put("/api/v1/settings/notifications",{email_notifications:m.value,push_notifications:x.value,notification_preferences:y.value},v.config)).data.status==="success"&&console.log("Notification settings saved successfully")}catch(i){console.error("Error saving notification settings:",i)}finally{b.value=!1}},H=async i=>{b.value||(y.value[i]=!y.value[i],await E())},K=async()=>{if(b.value)return;const i=!m.value;m.value=i,await E()};return X(()=>{z()}),(i,o)=>(c(),u("div",ge,[a("div",be,[a("div",fe,[r(e(S),{variant:"ghost",size:"icon",onClick:o[0]||(o[0]=d=>e(N).back()),class:"flex-shrink-0"},{default:n(()=>[r(e(re),{class:"h-5 w-5"})]),_:1}),a("div",null,[a("h1",{class:t(["text-3xl font-bold",[e(s).isDark?"text-white":"text-gray-900"]])}," Settings ",2),a("p",{class:t(["text-sm mt-1",[e(s).isDark?"text-gray-400":"text-gray-600"]])}," Manage your account settings and preferences ",2)])]),P.value?(c(),u("div",pe,[a("div",ve,[r(e(ie),{class:t(["h-8 w-8 animate-spin mx-auto mb-4",[e(s).isDark?"text-gray-400":"text-gray-600"]])},null,8,["class"]),a("p",{class:t([e(s).isDark?"text-gray-400":"text-gray-600"])},"Loading settings...",2)])])):(c(),u("div",me,[r(e(L),{class:t(["border-0 shadow-sm",e(s).isDark?"bg-gray-900/50":"bg-white"])},{default:n(()=>[r(e(M),null,{default:n(()=>[a("div",xe,[a("div",null,[r(e($),{class:t([e(s).isDark?"text-white":"text-gray-900"])},{default:n(()=>[...o[3]||(o[3]=[g(" App Preferences ",-1)])]),_:1},8,["class"]),r(e(A),{class:t([e(s).isDark?"text-gray-400":"text-gray-600"])},{default:n(()=>[...o[4]||(o[4]=[g(" Choose how Laravue looks on this device ",-1)])]),_:1},8,["class"])]),r(e(S),{variant:"outline",class:t(["flex items-center gap-2 rounded-full border-2 transition-all duration-300",e(s).isDark?"border-white/20 text-white hover:bg-white/5":"border-gray-200 text-gray-800 hover:bg-gray-50"]),onClick:o[1]||(o[1]=d=>e(s).toggleTheme())},{default:n(()=>[e(s).isDark?(c(),C(e(oe),{key:0,class:"h-4 w-4"})):(c(),C(e(le),{key:1,class:"h-4 w-4"})),a("span",ye,_(e(s).isDark?"Light Mode":"Dark Mode"),1)]),_:1},8,["class"])])]),_:1}),r(e(B),null,{default:n(()=>[a("div",{class:t(["text-sm",[e(s).isDark?"text-gray-400":"text-gray-600"]])}," Theme preference syncs across the app after you toggle it here. Use this to switch between light and dark experiences. ",2)]),_:1})]),_:1},8,["class"]),r(e(L),{class:t(["border-0 shadow-sm",e(s).isDark?"bg-gray-900/50":"bg-white"])},{default:n(()=>[r(e(M),null,{default:n(()=>[a("div",he,[a("div",ke,[a("div",{class:t(["p-2 rounded-lg",[e(s).isDark?"bg-blue-900/30":"bg-blue-100"]])},[r(e(ee),{class:t(["h-5 w-5",[e(s).isDark?"text-blue-400":"text-blue-600"]])},null,8,["class"])],2),a("div",null,[r(e($),{class:t([e(s).isDark?"text-white":"text-gray-900"])},{default:n(()=>[...o[5]||(o[5]=[g(" Notification Preferences ",-1)])]),_:1},8,["class"]),r(e(A),{class:t([e(s).isDark?"text-gray-400":"text-gray-600"])},{default:n(()=>[...o[6]||(o[6]=[g(" Control how and when you receive notifications ",-1)])]),_:1},8,["class"])])]),r(e(S),{variant:"ghost",size:"icon",onClick:o[2]||(o[2]=d=>w.value=!w.value),class:"flex-shrink-0"},{default:n(()=>[w.value?(c(),C(e(ne),{key:0,class:"h-5 w-5 transition-transform"})):(c(),C(e(ce),{key:1,class:"h-5 w-5 transition-transform"}))]),_:1})])]),_:1}),Z(r(e(B),{class:"space-y-6"},{default:n(()=>[a("div",{class:t(["flex items-center justify-between p-4 rounded-lg border",[e(s).isDark?"bg-gray-800/30 border-gray-700":"bg-gray-50 border-gray-200"]])},[a("div",_e,[a("div",{class:t(["p-2 rounded-lg",[e(s).isDark?"bg-gray-700":"bg-gray-200"]])},[r(e(ue),{class:t(["h-4 w-4",[e(s).isDark?"text-gray-300":"text-gray-700"]])},null,8,["class"])],2),a("div",null,[r(e(U),{class:t([[e(s).isDark?"text-white":"text-gray-900"],"text-base font-medium"])},{default:n(()=>[...o[7]||(o[7]=[g(" Email Notifications ",-1)])]),_:1},8,["class"]),a("p",{class:t(["text-sm",[e(s).isDark?"text-gray-400":"text-gray-600"]])}," Receive email notifications for important updates ",2)])]),r(e(j),{checked:m.value,"onUpdate:checked":K,disabled:b.value},null,8,["checked","disabled"])],2),a("div",we,[a("div",{class:t(["flex items-center justify-between p-4 rounded-lg border",[e(s).isDark?"bg-gray-800/30 border-gray-700":"bg-gray-50 border-gray-200"]])},[a("div",De,[a("div",{class:t(["p-2 rounded-lg",[e(s).isDark?"bg-gray-700":"bg-gray-200"]])},[r(e(de),{class:t(["h-4 w-4",[e(s).isDark?"text-gray-300":"text-gray-700"]])},null,8,["class"])],2),a("div",Se,[r(e(U),{class:t([[e(s).isDark?"text-white":"text-gray-900"],"text-base font-medium"])},{default:n(()=>[...o[8]||(o[8]=[g(" Push Notifications ",-1)])]),_:1},8,["class"]),a("p",{class:t(["text-sm",[e(s).isDark?"text-gray-400":"text-gray-600"]])}," Receive browser push notifications ",2),l.value!=="checking"&&l.value!=="unsupported"?(c(),u("div",Ce,[a("span",{class:t(["text-xs px-2 py-1 rounded-full",[l.value==="subscribed"?e(s).isDark?"bg-green-900/30 text-green-400":"bg-green-100 text-green-700":e(s).isDark?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-600"]])},_(l.value==="subscribed"?"Subscribed":"Not subscribed"),3)])):h("",!0)])]),r(e(j),{checked:x.value,"onUpdate:checked":I,disabled:b.value||l.value==="unsupported"||l.value==="blocked"},null,8,["checked","disabled"])],2),l.value==="unsupported"?(c(),u("div",{key:0,class:t(["p-3 rounded-lg border",[e(s).isDark?"bg-yellow-900/20 border-yellow-800/50":"bg-yellow-50 border-yellow-200"]])},[a("div",Ne,[r(e(q),{class:t(["h-4 w-4 mt-0.5 flex-shrink-0",[e(s).isDark?"text-yellow-400":"text-yellow-600"]])},null,8,["class"]),a("p",{class:t(["text-xs",[e(s).isDark?"text-yellow-300":"text-yellow-700"]])}," Push notifications are not supported in this browser. Please use a modern browser like Chrome, Firefox, or Edge. ",2)])],2)):h("",!0),l.value==="blocked"?(c(),u("div",{key:1,class:t(["p-3 rounded-lg border",[e(s).isDark?"bg-red-900/20 border-red-800/50":"bg-red-50 border-red-200"]])},[a("div",Pe,[r(e(q),{class:t(["h-4 w-4 mt-0.5 flex-shrink-0",[e(s).isDark?"text-red-400":"text-red-600"]])},null,8,["class"]),a("div",Ee,[a("p",{class:t(["text-xs font-medium mb-1",[e(s).isDark?"text-red-300":"text-red-700"]])}," Notification permission denied ",2),a("p",{class:t(["text-xs",[e(s).isDark?"text-red-400":"text-red-600"]])},_(f.value||"Please enable notifications in your browser settings and try again."),3)])])],2)):h("",!0),f.value&&l.value!=="blocked"?(c(),u("div",{key:2,class:t(["p-3 rounded-lg border",[e(s).isDark?"bg-red-900/20 border-red-800/50":"bg-red-50 border-red-200"]])},[a("div",Le,[r(e(q),{class:t(["h-4 w-4 mt-0.5 flex-shrink-0",[e(s).isDark?"text-red-400":"text-red-600"]])},null,8,["class"]),a("p",{class:t(["text-xs",[e(s).isDark?"text-red-300":"text-red-700"]])},_(f.value),3)])],2)):h("",!0),x.value&&l.value==="not_subscribed"&&!f.value?(c(),u("div",{key:3,class:t(["p-3 rounded-lg border",[e(s).isDark?"bg-blue-900/20 border-blue-800/50":"bg-blue-50 border-blue-200"]])},[a("div",Ae,[a("p",{class:t(["text-xs",[e(s).isDark?"text-blue-300":"text-blue-700"]])}," Click the toggle above to subscribe to push notifications ",2),r(e(S),{variant:"outline",size:"sm",onClick:F,disabled:b.value},{default:n(()=>[...o[9]||(o[9]=[g(" Subscribe ",-1)])]),_:1},8,["disabled"])])],2)):h("",!0)]),a("div",{class:t(["border-t",[e(s).isDark?"border-gray-700":"border-gray-200"]])},null,2),a("div",null,[a("h3",{class:t(["text-sm font-semibold mb-4",[e(s).isDark?"text-gray-300":"text-gray-700"]])}," Notification Types ",2),a("div",Me,[(c(!0),u(te,null,ae(y.value,(d,D)=>(c(),u("div",{key:D,class:t(["flex items-center justify-between p-3 rounded-lg border transition-colors",[e(s).isDark?"bg-gray-800/30 border-gray-700 hover:bg-gray-800/50":"bg-gray-50 border-gray-200 hover:bg-gray-100"]])},[r(e(U),{class:t([[e(s).isDark?"text-gray-300":"text-gray-700"],"text-sm font-medium cursor-pointer"])},{default:n(()=>[g(_(V[D]||D),1)]),_:2},1032,["class"]),r(e(j),{checked:d,"onUpdate:checked":()=>H(D),disabled:b.value||!m.value},null,8,["checked","onUpdate:checked","disabled"])],2))),128))]),m.value?h("",!0):(c(),u("p",{key:0,class:t(["text-xs mt-3",[(e(s).isDark,"text-gray-500")]])}," Enable email notifications to configure individual notification types ",2))])]),_:1},512),[[se,w.value]])]),_:1},8,["class"]),r(e(L),{class:t(["border-0 shadow-sm opacity-50",e(s).isDark?"bg-gray-900/50":"bg-white"])},{default:n(()=>[r(e(M),null,{default:n(()=>[r(e($),{class:t([e(s).isDark?"text-white":"text-gray-900"])},{default:n(()=>[...o[10]||(o[10]=[g(" More Settings ",-1)])]),_:1},8,["class"]),r(e(A),{class:t([e(s).isDark?"text-gray-400":"text-gray-600"])},{default:n(()=>[...o[11]||(o[11]=[g(" Additional settings will be available soon ",-1)])]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])]))])]))}};export{Je as default};
//# sourceMappingURL=Settings-B6xeKnVx.js.map
