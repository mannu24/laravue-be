import{c as K,_ as G,t as j,p as _,a as I,f as F,o as c,w as D,d as u,u as t,D as s,z as a,A as C,T as W,b as v,x as T,F as N,E as P,N as J,k as Q,j as H,C as R,G as V,H as M,q as X,I as L}from"./app-Bvnl7d0n.js";import{_ as Y}from"./InfiniteScroll-DLzqwnpV.js";import{P as Z}from"./PostCard-6SO9_3tv.js";import{_ as O}from"./Card-hOl-Usuy.js";import{_ as q}from"./CardContent-BNEtnmat.js";import{C as ee}from"./clock-Blu0uPvm.js";import{M as te}from"./message-circle-CUHMIlXk.js";import{H as se}from"./heart-Do1kpZXc.js";import{T as re}from"./trending-up-BDkbXM5x.js";import{F as oe}from"./filter-CS8K0kRv.js";import{U as E}from"./user-plus-C-bpvbmz.js";import{U as z}from"./users-BD_gwi77.js";import{C as ae}from"./check-C_VhQ4uL.js";import"./QuestionCard-DKej05gX.js";import"./useBookmark-MdNZIhAe.js";import"./tag-6Idb4Hv2.js";import"./circle-check-BE19kObe.js";import"./message-square-I2NocKB-.js";import"./bookmark-Afub3nbE.js";import"./index-_SePG6eE.js";import"./flame-Dy2j6U5p.js";import"./calendar-TcdMNaSw.js";import"./external-link-CohcApp6.js";import"./Skeleton-wSYT3jvc.js";import"./EmptyState-DVLWfdwK.js";import"./folder-open-BnUa1mLa.js";import"./activity-BXHlTU9J.js";import"./code-xml-5bxqMtxa.js";import"./file-text-CMcMhd5a.js";import"./search-5LIDw_UH.js";import"./LoadingSpinner-ekVe37eh.js";import"./DialogContent-QiX1Bk05.js";import"./chevron-right-Cq0N1iJW.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=K("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),ne={class:"flex items-center justify-between"},ie={class:"flex items-center gap-3"},ce={class:"flex-1"},ue={class:"px-6 py-3 space-y-1"},de=["onClick"],ge={class:"flex-1 min-w-0"},pe={class:"text-sm font-medium"},me={__name:"FeedFilter",props:{currentSort:{type:String,default:"latest"},color:{type:String,default:"blue"}},emits:["sort-change"],setup(i,{emit:w}){const e=j(),d=_(!1),h=i,n=I(()=>{const f={blue:{iconBg:e.isDark?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600",activeBg:e.isDark?"bg-blue-900/30 text-blue-400 border-blue-700/50":"bg-blue-50 text-blue-600 border-blue-200",activeIcon:e.isDark?"text-blue-400":"text-blue-600",activeDot:e.isDark?"bg-blue-400":"bg-blue-600"},green:{iconBg:e.isDark?"bg-green-900/30 text-green-400":"bg-green-100 text-green-600",activeBg:e.isDark?"bg-green-900/30 text-green-400 border-green-700/50":"bg-green-50 text-green-600 border-green-200",activeIcon:e.isDark?"text-green-400":"text-green-600",activeDot:e.isDark?"bg-green-400":"bg-green-600"},purple:{iconBg:e.isDark?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600",activeBg:e.isDark?"bg-purple-900/30 text-purple-400 border-purple-700/50":"bg-purple-50 text-purple-600 border-purple-200",activeIcon:e.isDark?"text-purple-400":"text-purple-600",activeDot:e.isDark?"bg-purple-400":"bg-purple-600"}};return f[h.color]||f.blue}),g=w,x=[{value:"latest",label:"Latest",icon:ee,description:"Most recent posts"},{value:"comments",label:"Most Comments",icon:te,description:"Posts with most comments"},{value:"highest_rated",label:"Highest Rated",icon:se,description:"Most liked posts"},{value:"trending",label:"Trending",icon:re,description:"Popular right now"}],y=I(()=>x.find(f=>f.value===h.currentSort)||x[0]),k=f=>{g("sort-change",f),d.value=!1};return(f,$)=>(c(),F(t(O),null,{default:D(()=>[u(t(q),{class:"p-0"},{default:D(()=>[s("div",{onClick:$[0]||($[0]=p=>d.value=!d.value),class:"px-6 py-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[s("div",ne,[s("div",ie,[s("div",{class:a(["p-2 rounded-lg",n.value.iconBg])},[u(t(oe),{class:"h-4 w-4"})],2),s("div",ce,[s("h3",{class:a(["text-sm font-semibold",[t(e).isDark?"text-white":"text-gray-900"]])}," Sort Posts ",2),s("p",{class:a(["text-xs mt-0.5",[t(e).isDark?"text-gray-400":"text-gray-500"]])},C(y.value.label),3)])]),u(t(le),{class:a(["h-4 w-4 transition-transform",[d.value?"rotate-180":"",t(e).isDark?"text-gray-400":"text-gray-500"]])},null,8,["class"])])]),u(W,{name:"expand"},{default:D(()=>[d.value?(c(),v("div",{key:0,class:a(["border-t",[t(e).isDark?"border-gray-800 bg-gray-900/30":"border-gray-200 bg-gray-50/50"]])},[s("div",ue,[(c(),v(N,null,P(x,p=>s("button",{key:p.value,onClick:l=>k(p.value),class:a(["w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-left transition-all duration-200",[i.currentSort===p.value?n.value.activeBg+" border":t(e).isDark?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"]])},[(c(),F(J(p.icon),{class:a(["h-4 w-4 flex-shrink-0",[i.currentSort===p.value?n.value.activeIcon:t(e).isDark?"text-gray-400":"text-gray-500"]])},null,8,["class"])),s("div",ge,[s("div",pe,C(p.label),1),s("div",{class:a(["text-xs mt-0.5",[t(e).isDark?"text-gray-500":"text-gray-400"]])},C(p.description),3)])],10,de)),64))])],2)):T("",!0)]),_:1})]),_:1})]),_:1}))}},fe=G(me,[["__scopeId","data-v-57e1f444"]]),ve={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},he={class:"flex items-center gap-2"},xe={key:0,class:"px-6 py-8"},ye={class:"space-y-4"},be={class:"flex-1"},ke={key:1,class:"px-6 py-8 text-center"},_e={class:"flex items-center gap-3"},we=["onClick"],De=["src","alt","onError"],Ce=["onClick"],$e={key:0,class:"flex items-center gap-2 mt-1"},Se={class:"flex-shrink-0"},Fe={__name:"RecommendedUsers",props:{users:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},color:{type:String,default:"blue"}},emits:["follow","unfollow"],setup(i,{emit:w}){const e=j(),d=i,h=I(()=>({blue:{icon:e.isDark?"text-blue-400":"text-blue-600",hover:"hover:text-blue-600 dark:hover:text-blue-400",link:"hover:text-blue-600 dark:hover:text-blue-400",background:"6366f1"},green:{icon:e.isDark?"text-green-400":"text-green-600",hover:"hover:text-green-600 dark:hover:text-green-400",link:"hover:text-green-600 dark:hover:text-green-400",background:"347958"},purple:{icon:e.isDark?"text-purple-400":"text-purple-600",hover:"hover:text-purple-600 dark:hover:text-purple-400",link:"hover:text-purple-600 dark:hover:text-purple-400",background:"8b5cf6"}})[d.color]),n=w,g=Q(),x=H(),y=_(new Set),k=l=>{y.value.has(l.id)?(y.value.delete(l.id),n("unfollow",l)):(y.value.add(l.id),n("follow",l))},f=l=>{var m;return y.value.has(l)||((m=d.users.find(r=>r.id===l))==null?void 0:m.is_following)},$=l=>l.avatar||l.profile_photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(l.name||l.username||"User")}&background=6366f1&color=fff&size=200`,p=l=>{l.username&&g.push(`/@${l.username}`)};return(l,m)=>(c(),F(t(O),null,{default:D(()=>[s("div",ve,[s("div",he,[u(t(E),{class:a(["h-5 w-5",h.value.icon])},null,8,["class"]),s("h3",{class:a(["text-lg font-semibold",[t(e).isDark?"text-white":"text-gray-900"]])}," Who to Follow ",2)])]),u(t(q),{class:"p-0"},{default:D(()=>[i.isLoading?(c(),v("div",xe,[s("div",ye,[(c(),v(N,null,P(5,r=>s("div",{key:r,class:"flex items-center gap-3 animate-pulse"},[s("div",{class:a(["w-12 h-12 rounded-full",[t(e).isDark?"bg-gray-700":"bg-gray-200"]])},null,2),s("div",be,[s("div",{class:a(["h-4 rounded w-3/4 mb-2",[t(e).isDark?"bg-gray-700":"bg-gray-200"]])},null,2),s("div",{class:a(["h-3 rounded w-1/2",[t(e).isDark?"bg-gray-700":"bg-gray-200"]])},null,2)])])),64))])])):!i.isLoading&&i.users.length===0?(c(),v("div",ke,[u(t(z),{class:a(["h-12 w-12 mx-auto mb-3 opacity-50",[t(e).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"]),s("p",{class:a(["text-sm",[t(e).isDark?"text-gray-400":"text-gray-600"]])}," No suggestions available ",2)])):(c(),v("div",{key:2,class:a(["divide-y max-h-[400px] overflow-y-auto",[t(e).isDark?"divide-gray-800":"divide-gray-100"]])},[(c(!0),v(N,null,P(i.users,r=>{var U,B;return c(),v("div",{key:r.id,class:"group p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[s("div",_e,[s("div",{onClick:o=>p(r),class:"flex-shrink-0 cursor-pointer"},[s("div",{class:a(["w-12 h-12 rounded-full overflow-hidden border-2 transition-transform group-hover:scale-105",[t(e).isDark?"border-gray-700":"border-gray-200"]])},[s("img",{src:$(r),alt:r.name||r.username,class:"w-full h-full object-cover",onError:o=>o.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name||r.username||"User")}&background=${h.value.background}&color=fff&size=200`},null,40,De)],2)],8,we),s("div",{onClick:o=>p(r),class:"flex-1 min-w-0 cursor-pointer"},[s("h4",{class:a(["text-sm font-semibold truncate transition-colors",[t(e).isDark?"text-white":"text-gray-900",h.value.hover]])},C(r.name||r.username),3),s("p",{class:a(["text-xs truncate",[t(e).isDark?"text-gray-400":"text-gray-500"]])}," @"+C(r.username),3),r.followers_count!==void 0?(c(),v("div",$e,[u(t(z),{class:a(["h-3 w-3",[t(e).isDark?"text-gray-500":"text-gray-400"]])},null,8,["class"]),s("span",{class:a(["text-xs",[t(e).isDark?"text-gray-500":"text-gray-400"]])},C(r.followers_count)+" "+C(r.followers_count===1?"follower":"followers"),3)])):T("",!0)],8,Ce),s("div",Se,[!f(r.id)&&r.id!==((U=t(x).user)==null?void 0:U.id)?(c(),F(t(R),{key:0,onClick:V(o=>k(r),["stop"]),variant:"vue",class:"text-xs px-3 py-1.5 h-auto"},{default:D(()=>[u(t(E),{class:"h-3 w-3 mr-1"}),m[1]||(m[1]=M(" Follow ",-1))]),_:1},8,["onClick"])):f(r.id)&&r.id!==((B=t(x).user)==null?void 0:B.id)?(c(),F(t(R),{key:1,onClick:V(o=>k(r),["stop"]),variant:"outline",class:"text-xs px-3 py-1.5 h-auto"},{default:D(()=>[u(t(ae),{class:"h-3 w-3 mr-1"}),m[2]||(m[2]=M(" Following ",-1))]),_:1},8,["onClick"])):T("",!0)])])])}),128))],2)),i.users.length>0?(c(),v("div",{key:3,class:a(["px-6 py-4 border-t",[t(e).isDark?"border-gray-800 bg-gray-900/50":"border-gray-200 bg-gray-50/50"]])},[s("button",{onClick:m[0]||(m[0]=r=>t(g).push("/search?type=user")),class:a(["w-full text-sm font-medium flex items-center justify-center gap-2 transition-colors",[t(e).isDark?"text-gray-400":"text-gray-600",h.value.link]])},[m[3]||(m[3]=M(" Discover more users ",-1)),u(t(E),{class:"h-4 w-4"})],2)],2)):T("",!0)]),_:1})]),_:1}))}},Ue={class:"w-full lg:w-80 flex-shrink-0 space-y-6 lg:sticky lg:top-8 lg:self-start"},Be={__name:"FeedSidebar",props:{recommendedUsers:{type:Array,default:()=>[]},popularTags:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},currentSort:{type:String,default:"latest"},selectedTags:{type:Array,default:()=>[]},color:{type:String,default:"green"}},emits:["follow","unfollow","sort-change","tags-change"],setup(i,{emit:w}){const e=w,d=g=>{e("follow",g)},h=g=>{e("unfollow",g)},n=g=>{e("sort-change",g)};return(g,x)=>(c(),v("aside",Ue,[u(fe,{"current-sort":i.currentSort,color:i.color,onSortChange:n},null,8,["current-sort","color"]),u(Fe,{users:i.recommendedUsers,"is-loading":i.isLoading,color:i.color,onFollow:d,onUnfollow:h},null,8,["users","is-loading","color"])]))}},Te={class:"min-h-screen"},Ie={class:"max-w-7xl mx-auto py-5"},Ae={class:"flex flex-col lg:flex-row gap-5"},Me={class:"flex-1 min-w-0"},Le={class:"mb-5"},Ee={class:"space-y-6"},Ne={class:"hidden lg:block"},ht={__name:"Feed",emits:["share_url"],setup(i,{emit:w}){const e=_(0);j();const d=H(),h=w,n=_([]),g=_([]),x=_(!1),y=_("latest"),k=_([]),f=I(()=>({sort:y.value,tags:k.value})),$=o=>{h("share_url",o)},p=()=>{e.value++},l=async()=>{if(d.isAuthenticated){x.value=!0;try{const o=await L.get("/api/v1/feed-sidebar?users_limit=10",d.config);o.data.status==="success"&&(n.value=o.data.data.users||[],g.value=o.data.data.tags||[])}catch(o){console.error("Error fetching sidebar data:",o)}finally{x.value=!1}}},m=async o=>{try{if((await L.post(`/api/v1/users/${o.username}/follow`,{},d.config)).data.status==="success"){const b=n.value.findIndex(A=>A.id===o.id);b!==-1&&(n.value[b].is_following=!0,n.value[b].followers_count=(n.value[b].followers_count||0)+1)}}catch(S){console.error("Error following user:",S)}},r=async o=>{try{if((await L.post(`/api/v1/users/${o.username}/follow`,{},d.config)).data.status==="success"){const b=n.value.findIndex(A=>A.id===o.id);b!==-1&&(n.value[b].is_following=!1,n.value[b].followers_count=Math.max(0,(n.value[b].followers_count||1)-1))}}catch(S){console.error("Error unfollowing user:",S)}},U=o=>{y.value=o,e.value++},B=o=>{k.value=o,e.value++};return X(()=>{l()}),(o,S)=>(c(),v("div",Te,[s("div",Ie,[s("div",Ae,[s("div",Me,[s("div",Le,[u(Z,{onFetch:p})]),s("div",Ee,[u(Y,{scrolling:"post",fetchKey:e.value,filters:f.value,onShare_url:$,username:null},null,8,["fetchKey","filters"])])]),s("div",Ne,[u(Be,{"recommended-users":n.value,"popular-tags":g.value,"is-loading":x.value,"current-sort":y.value,"selected-tags":k.value,color:"green",onFollow:m,onUnfollow:r,onSortChange:U,onTagsChange:B},null,8,["recommended-users","popular-tags","is-loading","current-sort","selected-tags"])])])])]))}};export{ht as default};
//# sourceMappingURL=Feed-B4QUExIR.js.map
