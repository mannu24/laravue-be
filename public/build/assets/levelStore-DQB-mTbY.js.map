{"version":3,"file":"levelStore-DQB-mTbY.js","sources":["../../../resources/js/stores/userStore.js","../../../resources/js/stores/levelStore.js"],"sourcesContent":["/**\r\n * User Store\r\n * Manages user profile and gamification data\r\n */\r\nimport { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport api from '@/lib/api'\r\nimport endpoints from '@/lib/endpoints'\r\n\r\nexport const useUserStore = defineStore('user', () => {\r\n  // State\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n  const user = ref(null)\r\n  const gamification = ref(null)\r\n\r\n  // Getters\r\n  const userProfile = computed(() => user.value)\r\n  const gamificationSummary = computed(() => gamification.value)\r\n\r\n  /**\r\n   * Fetch user profile\r\n   * @param {number|string} id - User ID\r\n   */\r\n  const fetchUserProfile = async (id) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.users.show(id))\r\n      user.value = response.data.data\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch user profile'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update user profile\r\n   * @param {number|string} id - User ID\r\n   * @param {object} payload - Update data\r\n   */\r\n  const updateUser = async (id, payload) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.patch(endpoints.users.update(id), payload)\r\n      user.value = response.data.data\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to update user profile'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetch gamification summary for user\r\n   * @param {number|string} id - User ID\r\n   */\r\n  const fetchGamificationSummary = async (id) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.users.gamification(id))\r\n      gamification.value = response.data.data\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch gamification data'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear user data\r\n   */\r\n  const clearUser = () => {\r\n    user.value = null\r\n    gamification.value = null\r\n    error.value = null\r\n  }\r\n\r\n  return {\r\n    // State\r\n    loading,\r\n    error,\r\n    user,\r\n    gamification,\r\n    // Getters\r\n    userProfile,\r\n    gamificationSummary,\r\n    // Actions\r\n    fetchUserProfile,\r\n    updateUser,\r\n    fetchGamificationSummary,\r\n    clearUser\r\n  }\r\n})\r\n\r\n","/**\r\n * Level Store\r\n * Manages levels and level progress data\r\n */\r\nimport { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport api from '@/lib/api'\r\nimport endpoints from '@/lib/endpoints'\r\n\r\nexport const useLevelStore = defineStore('level', () => {\r\n  // State\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n  const levels = ref([])\r\n  const progress = ref(null)\r\n  const currentLevel = ref(null)\r\n\r\n  // Getters\r\n  const allLevels = computed(() => levels.value)\r\n  const levelProgress = computed(() => progress.value)\r\n  const userCurrentLevel = computed(() => currentLevel.value)\r\n\r\n  /**\r\n   * Fetch all levels\r\n   */\r\n  const fetchLevels = async () => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.levels.list())\r\n      levels.value = response.data.data\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch levels'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get level for given XP amount\r\n   * @param {number} xp - XP amount\r\n   */\r\n  const getLevelForXp = async (xp) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.levels.show(xp))\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch level'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetch level progress for user\r\n   * @param {number|string} userId - User ID\r\n   */\r\n  const fetchLevelProgress = async (userId) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.levels.progress(userId))\r\n      progress.value = response.data.data\r\n      currentLevel.value = response.data.data.level\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch level progress'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear level data\r\n   */\r\n  const clearLevels = () => {\r\n    levels.value = []\r\n    progress.value = null\r\n    currentLevel.value = null\r\n    error.value = null\r\n  }\r\n\r\n  return {\r\n    // State\r\n    loading,\r\n    error,\r\n    levels,\r\n    progress,\r\n    currentLevel,\r\n    // Getters\r\n    allLevels,\r\n    levelProgress,\r\n    userCurrentLevel,\r\n    // Actions\r\n    fetchLevels,\r\n    getLevelForXp,\r\n    fetchLevelProgress,\r\n    clearLevels\r\n  }\r\n})\r\n\r\n"],"names":["useUserStore","defineStore","loading","ref","error","user","gamification","userProfile","computed","gamificationSummary","id","response","api","endpoints","err","_b","_a","payload","useLevelStore","levels","progress","currentLevel","allLevels","levelProgress","userCurrentLevel","xp","userId"],"mappings":"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"}