{"version":3,"file":"LevelsView-D2Z_G3WE.js","sources":["../../../resources/js/components/gamification/LevelCard.vue","../../../resources/js/views/LevelsView.vue"],"sourcesContent":["<!--\r\n  LevelCard Component\r\n  Purpose: Displays level information with tier badge, progress, and next level gap\r\n  Props: level (Object with id, name, xp_required, tier), progress (number 0-100)\r\n  Emits: none (pure display component)\r\n-->\r\n<template>\r\n  <div\r\n    class=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 shadow-sm hover:shadow-md transition-shadow\"\r\n    data-test=\"level-card\"\r\n  >\r\n    <div class=\"flex items-start justify-between mb-4\">\r\n      <div>\r\n        <h3 class=\"text-xl font-bold text-gray-900 dark:text-white mb-1\">\r\n          {{ level?.name || 'Level 1' }}\r\n        </h3>\r\n        <div class=\"flex items-center gap-2\">\r\n          <span\r\n            :class=\"tierBadgeClass\"\r\n            class=\"px-2 py-1 text-xs font-semibold rounded-full\"\r\n            data-test=\"tier-badge\"\r\n          >\r\n            {{ level?.tier || 'beginner' }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class=\"text-right\">\r\n        <div class=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n          {{ level?.xp_required || 0 }}\r\n        </div>\r\n        <div class=\"text-xs text-gray-500 dark:text-gray-400\">XP Required</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mb-4\">\r\n      <div class=\"flex items-center justify-between mb-2\">\r\n        <span class=\"text-sm text-gray-600 dark:text-gray-400\">Progress</span>\r\n        <span class=\"text-sm font-semibold text-gray-900 dark:text-white\">\r\n          {{ progress }}%\r\n        </span>\r\n      </div>\r\n      <div class=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\r\n        <div\r\n          class=\"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500\"\r\n          :style=\"{ width: `${progress}%` }\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  level: {\r\n    type: Object,\r\n    default: () => ({\r\n      id: null,\r\n      name: '',\r\n      xp_required: 0,\r\n      tier: 'beginner'\r\n    })\r\n  },\r\n  progress: {\r\n    type: Number,\r\n    default: 0,\r\n    validator: (value) => value >= 0 && value <= 100\r\n  }\r\n})\r\n\r\nconst tierBadgeClass = computed(() => {\r\n  const tier = props.level?.tier || 'beginner'\r\n  const classes = {\r\n    beginner: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\r\n    intermediate: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\r\n    advanced: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',\r\n    expert: 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200',\r\n    legend: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200'\r\n  }\r\n  return classes[tier] || classes.beginner\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n/* Component-specific styles if needed */\r\n</style>\r\n\r\n","<!--\n  LevelsView\n  Purpose: Shows all levels and user's current progress\n-->\n<template>\n  <div class=\"container mx-auto px-4 py-8\">\n    <h1 class=\"text-3xl font-bold text-gray-900 dark:text-white mb-8\">Levels</h1>\n    \n    <div v-if=\"loading\" class=\"text-center py-12\">\n      <LoadingSpinner size=\"lg\" />\n    </div>\n\n    <div v-else>\n      <div class=\"mb-8\">\n        <h2 class=\"text-2xl font-semibold text-gray-900 dark:text-white mb-4\">Your Progress</h2>\n        <LevelCard\n          v-if=\"currentLevel\"\n          :level=\"currentLevel\"\n          :progress=\"levelProgressData.progress_percent || 0\"\n        />\n      </div>\n\n      <div>\n        <h2 class=\"text-2xl font-semibold text-gray-900 dark:text-white mb-4\">All Levels</h2>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <LevelCard\n            v-for=\"level in allLevels\"\n            :key=\"level.id\"\n            :level=\"level\"\n            :progress=\"calculateProgress(level)\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useAuthStore } from '@/stores/auth'\nimport { useLevelStore } from '@/stores/levelStore'\nimport { useUserStore } from '@/stores/userStore'\nimport LevelCard from '@/components/gamification/LevelCard.vue'\nimport LoadingSpinner from '@/components/ui/LoadingSpinner.vue'\n\nconst authStore = useAuthStore()\nconst levelStore = useLevelStore()\nconst userStore = useUserStore()\n\nconst loading = ref(true)\nconst userXp = ref(0)\n\n// Use store computed values\nconst allLevels = computed(() => levelStore.allLevels)\nconst currentLevel = computed(() => levelStore.userCurrentLevel)\nconst levelProgressData = computed(() => levelStore.levelProgress || { progress_percent: 0 })\n\nonMounted(async () => {\n  try {\n    await levelStore.fetchLevels()\n    \n    // Fetch user profile to get XP if authenticated\n    if (authStore.isAuthenticated && authStore.user?.id) {\n      await Promise.all([\n        levelStore.fetchLevelProgress(authStore.user.id),\n        userStore.fetchUserProfile(authStore.user.id)\n      ])\n      userXp.value = userStore.userProfile?.xp_total || 0\n    }\n    \n    loading.value = false\n  } catch (error) {\n    console.error('Error loading levels:', error)\n    loading.value = false\n  }\n})\n\nconst calculateProgress = (level) => {\n  // Calculate progress for each level based on user's XP\n  const nextLevel = allLevels.value.find(l => l.xp_required > level.xp_required)\n  if (!nextLevel) return 100\n  \n  const range = nextLevel.xp_required - level.xp_required\n  const progress = ((userXp.value - level.xp_required) / range) * 100\n  return Math.min(100, Math.max(0, progress))\n}\n</script>\n\n<style scoped>\n/* Levels view styles handled by Tailwind */\n</style>\n"],"names":["props","__props","tierBadgeClass","computed","tier","_a","classes","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_hoisted_4","_normalizeClass","_b","_hoisted_5","_hoisted_6","_c","_cache","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","authStore","useAuthStore","levelStore","useLevelStore","userStore","useUserStore","loading","ref","userXp","allLevels","currentLevel","levelProgressData","onMounted","error","calculateProgress","level","nextLevel","l","range","progress","_createVNode","LoadingSpinner","_createBlock","LevelCard","_Fragment","_renderList"],"mappings":"qgCAsDA,MAAMA,EAAQC,EAiBRC,EAAiBC,EAAS,IAAM,OACpC,MAAMC,IAAOC,EAAAL,EAAM,QAAN,YAAAK,EAAa,OAAQ,WAC5BC,EAAU,CACd,SAAU,oEACV,aAAc,gEACd,SAAU,wEACV,OAAQ,wEACR,OAAQ,uEACZ,EACE,OAAOA,EAAQF,CAAI,GAAKE,EAAQ,QAClC,CAAC,0BA1EC,OAAAC,EAAA,EAAAC,EAyCM,MAzCNC,EAyCM,CArCJC,EAqBM,MArBNC,EAqBM,CApBJD,EAaM,MAAA,KAAA,CAZJA,EAEK,KAFLE,EAEKC,IADAR,EAAAJ,EAAA,QAAA,YAAAI,EAAO,OAAI,SAAA,EAAA,CAAA,EAEhBK,EAQM,MARNI,EAQM,CAPJJ,EAMO,OAAA,CALJ,MAAKK,EAAA,CAAEb,EAAA,MACF,8CAA8C,CAAA,EACpD,YAAU,YAEP,EAAAW,IAAAG,EAAAf,EAAA,QAAA,YAAAe,EAAO,OAAI,UAAA,EAAA,CAAA,MAIpBN,EAKM,MALNO,EAKM,CAJJP,EAEM,MAFNQ,EAEML,IADDM,EAAAlB,EAAA,QAAA,YAAAkB,EAAO,cAAW,CAAA,EAAA,CAAA,EAEvBC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAV,EAAuE,MAAA,CAAlE,MAAM,4CAA2C,cAAW,EAAA,OAIrEA,EAaM,MAbNW,EAaM,CAZJX,EAKM,MALNY,EAKM,CAJJF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAV,EAAsE,OAAA,CAAhE,MAAM,0CAA0C,EAAC,WAAQ,EAAA,GAC/DA,EAEO,OAFPa,EAEOV,EADFZ,EAAA,QAAQ,EAAG,KAChB,CAAA,IAEFS,EAKM,MALNc,EAKM,CAJJd,EAGO,MAAA,CAFL,MAAM,+FACL,kBAAmBT,EAAA,QAAQ,GAAA,CAAA,qQCCtC,MAAMwB,EAAYC,EAAY,EACxBC,EAAaC,EAAa,EAC1BC,EAAYC,EAAY,EAExBC,EAAUC,EAAI,EAAI,EAClBC,EAASD,EAAI,CAAC,EAGdE,EAAY/B,EAAS,IAAMwB,EAAW,SAAS,EAC/CQ,EAAehC,EAAS,IAAMwB,EAAW,gBAAgB,EACzDS,EAAoBjC,EAAS,IAAMwB,EAAW,eAAiB,CAAE,iBAAkB,CAAC,CAAE,EAE5FU,EAAU,SAAY,SACpB,GAAI,CACF,MAAMV,EAAW,YAAW,EAGxBF,EAAU,mBAAmBpB,EAAAoB,EAAU,OAAV,MAAApB,EAAgB,MAC/C,MAAM,QAAQ,IAAI,CAChBsB,EAAW,mBAAmBF,EAAU,KAAK,EAAE,EAC/CI,EAAU,iBAAiBJ,EAAU,KAAK,EAAE,CACpD,CAAO,EACDQ,EAAO,QAAQjB,EAAAa,EAAU,cAAV,YAAAb,EAAuB,WAAY,GAGpDe,EAAQ,MAAQ,EAClB,OAASO,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CP,EAAQ,MAAQ,EAClB,CACF,CAAC,EAED,MAAMQ,EAAqBC,GAAU,CAEnC,MAAMC,EAAYP,EAAU,MAAM,KAAKQ,GAAKA,EAAE,YAAcF,EAAM,WAAW,EAC7E,GAAI,CAACC,EAAW,MAAO,KAEvB,MAAME,EAAQF,EAAU,YAAcD,EAAM,YACtCI,GAAaX,EAAO,MAAQO,EAAM,aAAeG,EAAS,IAChE,OAAO,KAAK,IAAI,IAAK,KAAK,IAAI,EAAGC,CAAQ,CAAC,CAC5C,gBAhFErC,EAAA,EAAAC,EA6BM,MA7BNC,EA6BM,CA5BJW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAV,EAA6E,KAAA,CAAzE,MAAM,uDAAuD,EAAC,SAAM,EAAA,GAE7DqB,EAAA,OAAXxB,IAAAC,EAEM,MAFNG,EAEM,CADJkC,EAA4BC,EAAA,CAAZ,KAAK,IAAI,CAAA,UAG3BtC,EAqBM,MAAAI,EAAA,CApBJF,EAOM,MAPNI,EAOM,CANJM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAV,EAAwF,KAAA,CAApF,MAAM,2DAA2D,EAAC,gBAAa,EAAA,GAE3EyB,EAAA,WADRY,EAIEC,EAAA,OAFC,MAAOb,EAAA,MACP,SAAUC,EAAA,MAAkB,kBAAgB,4CAIjD1B,EAUM,MAAA,KAAA,CATJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAV,EAAqF,KAAA,CAAjF,MAAM,2DAA2D,EAAC,aAAU,EAAA,GAChFA,EAOM,MAPNO,EAOM,QANJT,EAKEyC,EAAA,KAAAC,EAJgBhB,EAAA,MAATM,QADTO,EAKEC,EAAA,CAHC,IAAKR,EAAM,GACX,MAAOA,EACP,SAAUD,EAAkBC,CAAK"}