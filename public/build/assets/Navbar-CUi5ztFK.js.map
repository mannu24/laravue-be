{"version":3,"file":"Navbar-CUi5ztFK.js","sources":["../../../node_modules/lucide-vue-next/dist/esm/icons/menu.js","../../../node_modules/lucide-vue-next/dist/esm/icons/wifi-off.js","../../../node_modules/lucide-vue-next/dist/esm/icons/wifi.js","../../../resources/js/components/ui/navigation-menu/NavigationMenuViewport.vue","../../../resources/js/components/ui/navigation-menu/NavigationMenu.vue","../../../resources/js/components/ui/navigation-menu/NavigationMenuItem.vue","../../../resources/js/components/ui/navigation-menu/NavigationMenuList.vue","../../../resources/js/composables/useRealtimeNotifications.js","../../../resources/js/components/notifications/NotificationDropdown.vue","../../../resources/js/composables/useRecentSearches.js","../../../resources/js/components/search/SearchDropdown.vue","../../../resources/js/components/Navbar.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"MenuIcon\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst WifiOff = createLucideIcon(\"WifiOffIcon\", [\n  [\"path\", { d: \"M12 20h.01\", key: \"zekei9\" }],\n  [\"path\", { d: \"M8.5 16.429a5 5 0 0 1 7 0\", key: \"1bycff\" }],\n  [\"path\", { d: \"M5 12.859a10 10 0 0 1 5.17-2.69\", key: \"1dl1wf\" }],\n  [\"path\", { d: \"M19 12.859a10 10 0 0 0-2.007-1.523\", key: \"4k23kn\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 4.177-2.643\", key: \"1grhjp\" }],\n  [\"path\", { d: \"M22 8.82a15 15 0 0 0-11.288-3.764\", key: \"z3jwby\" }],\n  [\"path\", { d: \"m2 2 20 20\", key: \"1ooewy\" }]\n]);\n\nexport { WifiOff as default };\n//# sourceMappingURL=wifi-off.js.map\n","/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Wifi = createLucideIcon(\"WifiIcon\", [\n  [\"path\", { d: \"M12 20h.01\", key: \"zekei9\" }],\n  [\"path\", { d: \"M2 8.82a15 15 0 0 1 20 0\", key: \"dnpr2z\" }],\n  [\"path\", { d: \"M5 12.859a10 10 0 0 1 14 0\", key: \"1x1e6c\" }],\n  [\"path\", { d: \"M8.5 16.429a5 5 0 0 1 7 0\", key: \"1bycff\" }]\n]);\n\nexport { Wifi as default };\n//# sourceMappingURL=wifi.js.map\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\nimport { NavigationMenuViewport, useForwardProps } from 'radix-vue';\nimport { computed } from 'vue';\n\nconst props = defineProps({\n  forceMount: { type: Boolean, required: false },\n  asChild: { type: Boolean, required: false },\n  as: { type: null, required: false },\n  class: { type: null, required: false },\n});\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props;\n\n  return delegated;\n});\n\nconst forwardedProps = useForwardProps(delegatedProps);\n</script>\n\n<template>\n  <div class=\"absolute left-0 top-full flex justify-center\">\n    <NavigationMenuViewport\n      v-bind=\"forwardedProps\"\n      :class=\"\n        cn(\n          'origin-top-center relative mt-1.5 h-[--radix-navigation-menu-viewport-height] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[--radix-navigation-menu-viewport-width]',\n          props.class,\n        )\n      \"\n    />\n  </div>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\nimport { NavigationMenuRoot, useForwardPropsEmits } from 'radix-vue';\nimport { computed } from 'vue';\nimport NavigationMenuViewport from './NavigationMenuViewport.vue';\n\nconst props = defineProps({\n  modelValue: { type: String, required: false },\n  defaultValue: { type: String, required: false },\n  dir: { type: String, required: false },\n  orientation: { type: String, required: false },\n  delayDuration: { type: Number, required: false },\n  skipDelayDuration: { type: Number, required: false },\n  disableClickTrigger: { type: Boolean, required: false },\n  disableHoverTrigger: { type: Boolean, required: false },\n  asChild: { type: Boolean, required: false },\n  as: { type: null, required: false },\n  class: { type: null, required: false },\n});\n\nconst emits = defineEmits(['update:modelValue']);\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props;\n\n  return delegated;\n});\n\nconst forwarded = useForwardPropsEmits(delegatedProps, emits);\n</script>\n\n<template>\n  <NavigationMenuRoot\n    v-bind=\"forwarded\"\n    :class=\"\n      cn(\n        'relative z-10 flex max-w-max flex-1 items-center justify-center',\n        props.class,\n      )\n    \"\n  >\n    <slot />\n    <NavigationMenuViewport />\n  </NavigationMenuRoot>\n</template>\n","<script setup>\nimport { NavigationMenuItem } from 'radix-vue';\n\nconst props = defineProps({\n  value: { type: String, required: false },\n  asChild: { type: Boolean, required: false },\n  as: { type: null, required: false },\n});\n</script>\n\n<template>\n  <NavigationMenuItem v-bind=\"props\">\n    <slot />\n  </NavigationMenuItem>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\nimport { NavigationMenuList, useForwardProps } from 'radix-vue';\nimport { computed } from 'vue';\n\nconst props = defineProps({\n  asChild: { type: Boolean, required: false },\n  as: { type: null, required: false },\n  class: { type: null, required: false },\n});\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props;\n\n  return delegated;\n});\n\nconst forwardedProps = useForwardProps(delegatedProps);\n</script>\n\n<template>\n  <NavigationMenuList\n    v-bind=\"forwardedProps\"\n    :class=\"\n      cn(\n        'group flex flex-1 list-none items-center justify-center gap-x-1',\n        props.class,\n      )\n    \"\n  >\n    <slot />\n  </NavigationMenuList>\n</template>\n","/**\r\n * Real-time Notifications Composable\r\n * \r\n * This composable handles real-time notification updates via WebSocket.\r\n * It integrates with Laravel Echo to listen for broadcast events.\r\n */\r\n\r\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\r\nimport { useAuthStore } from '../stores/auth'\r\nimport { useRouter } from 'vue-router'\r\n\r\n/**\r\n * Real-time notification state\r\n */\r\nconst notifications = ref([])\r\nconst unreadCount = ref(0)\r\nconst isConnected = ref(false)\r\nconst connectionError = ref(null)\r\nlet channel = null\r\nlet reconnectAttempts = 0\r\nconst MAX_RECONNECT_ATTEMPTS = 5\r\nconst RECONNECT_DELAY = 3000 // 3 seconds\r\n\r\n// Track notifications that were received via realtime to prevent double-counting\r\nconst realtimeReceivedIds = new Set()\r\n\r\n/**\r\n * Initialize real-time notification listener\r\n * \r\n * @param {Function} onNotificationReceived - Callback when notification is received\r\n * @param {Function} onUnreadCountUpdate - Callback when unread count updates\r\n * @returns {Object} Composable methods and state\r\n */\r\nexport function useRealtimeNotifications(\r\n    onNotificationReceived = null,\r\n    onUnreadCountUpdate = null\r\n) {\r\n    const authStore = useAuthStore()\r\n    const router = useRouter()\r\n\r\n    /**\r\n     * Connect to notification channel\r\n     */\r\n    const connect = () => {\r\n        if (!window.Echo) {\r\n            console.warn('[RealtimeNotifications] Echo not initialized')\r\n            connectionError.value = 'Broadcasting not configured'\r\n            return false\r\n        }\r\n\r\n        if (!authStore.isAuthenticated || !authStore.user?.id) {\r\n            console.warn('[RealtimeNotifications] User not authenticated')\r\n            return false\r\n        }\r\n\r\n        try {\r\n            const userId = authStore.user.id\r\n\r\n            // Disconnect existing channel if any\r\n            disconnect()\r\n\r\n            // Subscribe to user's private notification channel\r\n            channel = window.Echo.private(`user.${userId}`)\r\n\r\n            // Listen for notification.created event (broadcast as 'notification.created')\r\n            channel.listen('.notification.created', (notification) => {\r\n                handleNotificationReceived(notification)\r\n            })\r\n\r\n            // Listen for connection events\r\n            channel.subscribed(() => {\r\n                isConnected.value = true\r\n                connectionError.value = null\r\n                reconnectAttempts = 0\r\n                console.log('[RealtimeNotifications] Connected to notification channel')\r\n            })\r\n\r\n            channel.error((error) => {\r\n                console.error('[RealtimeNotifications] Channel error:', error)\r\n                connectionError.value = error.message || 'Connection error'\r\n                isConnected.value = false\r\n                attemptReconnect()\r\n            })\r\n\r\n            return true\r\n        } catch (error) {\r\n            console.error('[RealtimeNotifications] Connection failed:', error)\r\n            connectionError.value = error.message || 'Failed to connect'\r\n            isConnected.value = false\r\n            return false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disconnect from notification channel\r\n     */\r\n    const disconnect = () => {\r\n        if (channel) {\r\n            try {\r\n                window.Echo.leave(`user.${authStore.user?.id}`)\r\n                channel = null\r\n                isConnected.value = false\r\n                console.log('[RealtimeNotifications] Disconnected from notification channel')\r\n            } catch (error) {\r\n                console.error('[RealtimeNotifications] Disconnect error:', error)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle received notification\r\n     */\r\n    const handleNotificationReceived = (notification) => {\r\n        try {\r\n            // Check if notification already exists (prevent duplicates)\r\n            const exists = notifications.value.some(n => n.id === notification.id)\r\n            if (exists) {\r\n                // Notification already exists, don't increment count\r\n                return\r\n            }\r\n\r\n            // Check if we've already processed this notification via realtime\r\n            // This prevents double-counting if the same notification is received multiple times\r\n            if (realtimeReceivedIds.has(notification.id)) {\r\n                return\r\n            }\r\n\r\n            // Mark as received via realtime\r\n            realtimeReceivedIds.add(notification.id)\r\n\r\n            // Add notification to the beginning of the list\r\n            notifications.value.unshift(notification)\r\n\r\n            // Update unread count if notification is unread\r\n            // Only increment if this is a truly new notification that wasn't already counted\r\n            if (!notification.read) {\r\n                // Increment the count - this is a new notification from realtime\r\n                // The API will be the source of truth when fetchNotifications is called\r\n                const currentCount = unreadCount.value || 0\r\n                unreadCount.value = currentCount + 1\r\n                updateUnreadCount(unreadCount.value)\r\n            }\r\n\r\n            // Call custom callback if provided\r\n            if (onNotificationReceived && typeof onNotificationReceived === 'function') {\r\n                onNotificationReceived(notification)\r\n            }\r\n\r\n            // Show browser notification if permission granted\r\n            if (Notification.permission === 'granted') {\r\n                showBrowserNotification(notification)\r\n            }\r\n\r\n            console.log('[RealtimeNotifications] Notification received:', notification)\r\n        } catch (error) {\r\n            console.error('[RealtimeNotifications] Error handling notification:', error)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show browser notification\r\n     */\r\n    const showBrowserNotification = (notification) => {\r\n        try {\r\n            const browserNotification = new Notification(notification.title, {\r\n                body: notification.message,\r\n                icon: '/favicon.ico',\r\n                badge: '/favicon.ico',\r\n                tag: `notification-${notification.id}`,\r\n                data: notification.data,\r\n                requireInteraction: false,\r\n            })\r\n\r\n            // Handle notification click\r\n            browserNotification.onclick = () => {\r\n                browserNotification.close()\r\n                if (notification.data?.url) {\r\n                    router.push(notification.data.url)\r\n                }\r\n            }\r\n\r\n            // Auto-close after 5 seconds\r\n            setTimeout(() => {\r\n                browserNotification.close()\r\n            }, 5000)\r\n        } catch (error) {\r\n            console.error('[RealtimeNotifications] Error showing browser notification:', error)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attempt to reconnect with exponential backoff\r\n     */\r\n    const attemptReconnect = () => {\r\n        if (reconnectAttempts >= MAX_RECONNECT_ATTEMPTS) {\r\n            console.error('[RealtimeNotifications] Max reconnection attempts reached')\r\n            connectionError.value = 'Failed to reconnect. Please refresh the page.'\r\n            return\r\n        }\r\n\r\n        reconnectAttempts++\r\n        const delay = RECONNECT_DELAY * reconnectAttempts\r\n\r\n        console.log(`[RealtimeNotifications] Attempting to reconnect (${reconnectAttempts}/${MAX_RECONNECT_ATTEMPTS}) in ${delay}ms`)\r\n\r\n        setTimeout(() => {\r\n            if (authStore.isAuthenticated) {\r\n                connect()\r\n            }\r\n        }, delay)\r\n    }\r\n\r\n    /**\r\n     * Update unread count\r\n     */\r\n    const updateUnreadCount = (count) => {\r\n        // Only update if count is different to prevent unnecessary updates\r\n        if (unreadCount.value !== count) {\r\n            unreadCount.value = count\r\n            if (onUnreadCountUpdate && typeof onUnreadCountUpdate === 'function') {\r\n                onUnreadCountUpdate(count)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reset realtime received IDs (called when API fetch happens to prevent stale tracking)\r\n     */\r\n    const resetRealtimeTracking = () => {\r\n        // Clear the set when API fetch happens - API is source of truth\r\n        realtimeReceivedIds.clear()\r\n    }\r\n\r\n    /**\r\n     * Mark notification as read (optimistic update)\r\n     */\r\n    const markAsRead = (notificationId) => {\r\n        const notification = notifications.value.find(n => n.id === notificationId)\r\n        if (notification && !notification.read) {\r\n            notification.read = true\r\n            notification.read_at = new Date().toISOString()\r\n            if (unreadCount.value > 0) {\r\n                unreadCount.value--\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove notification from list\r\n     */\r\n    const removeNotification = (notificationId) => {\r\n        const index = notifications.value.findIndex(n => n.id === notificationId)\r\n        if (index !== -1) {\r\n            const notification = notifications.value[index]\r\n            notifications.value.splice(index, 1)\r\n            if (!notification.read && unreadCount.value > 0) {\r\n                unreadCount.value--\r\n            }\r\n        }\r\n    }\r\n\r\n    // Watch for authentication changes\r\n    watch(\r\n        () => authStore.isAuthenticated,\r\n        (isAuthenticated) => {\r\n            if (isAuthenticated) {\r\n                connect()\r\n            } else {\r\n                disconnect()\r\n                notifications.value = []\r\n                unreadCount.value = 0\r\n                realtimeReceivedIds.clear()\r\n            }\r\n        },\r\n        { immediate: true }\r\n    )\r\n\r\n    // Connect on mount\r\n    onMounted(() => {\r\n        if (authStore.isAuthenticated) {\r\n            connect()\r\n        }\r\n    })\r\n\r\n    // Disconnect on unmount\r\n    onBeforeUnmount(() => {\r\n        disconnect()\r\n    })\r\n\r\n    return {\r\n        notifications,\r\n        unreadCount,\r\n        isConnected,\r\n        connectionError,\r\n        connect,\r\n        disconnect,\r\n        updateUnreadCount,\r\n        markAsRead,\r\n        removeNotification,\r\n        resetRealtimeTracking,\r\n    }\r\n}\r\n\r\n","<script setup>\r\nimport { ref, computed, onMounted, onBeforeUnmount, watch } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '../../stores/auth'\r\nimport { useThemeStore } from '../../stores/theme'\r\nimport { useRealtimeNotifications } from '../../composables/useRealtimeNotifications'\r\nimport { Bell, Check, X, Wifi, WifiOff } from 'lucide-vue-next'\r\nimport { Button } from '../ui/button'\r\nimport axios from 'axios'\r\n\r\nconst authStore = useAuthStore()\r\nconst themeStore = useThemeStore()\r\nconst router = useRouter()\r\n\r\nconst isOpen = ref(false)\r\nconst notifications = ref([])\r\nconst unreadCount = ref(0)\r\nconst isLoading = ref(false)\r\nconst dropdownRef = ref(null)\r\n\r\n// Real-time notifications composable\r\nconst {\r\n    notifications: realtimeNotifications,\r\n    unreadCount: realtimeUnreadCount,\r\n    isConnected: isRealtimeConnected,\r\n    connectionError: realtimeError,\r\n    markAsRead: markRealtimeAsRead,\r\n    updateUnreadCount: updateRealtimeUnreadCount,\r\n    resetRealtimeTracking,\r\n} = useRealtimeNotifications(\r\n    // onNotificationReceived callback\r\n    (notification) => {\r\n        // Add to local notifications if not already present\r\n        const exists = notifications.value.some(n => n.id === notification.id)\r\n        if (!exists) {\r\n            notifications.value.unshift(notification)\r\n            // Keep only latest 6 notifications in dropdown\r\n            if (notifications.value.length > 6) {\r\n                notifications.value = notifications.value.slice(0, 6)\r\n            }\r\n            \r\n            // If notification is unread, increment count\r\n            // But we'll sync with API on next fetch to ensure accuracy\r\n            if (!notification.read) {\r\n                // Don't increment here - let the realtime composable handle it\r\n                // The count will be synced with API when fetchNotifications is called\r\n            }\r\n        }\r\n    },\r\n    // onUnreadCountUpdate callback\r\n    (count) => {\r\n        // Only update if count is different to prevent unnecessary updates\r\n        // The watcher will also handle this, but this ensures consistency\r\n        if (unreadCount.value !== count) {\r\n            unreadCount.value = count\r\n        }\r\n    }\r\n)\r\n\r\n// Fetch notifications from API\r\nconst fetchNotifications = async () => {\r\n    if (!authStore.isAuthenticated) return\r\n    \r\n    isLoading.value = true\r\n    try {\r\n        const response = await axios.get('/api/v1/notifications?per_page=6&unread_only=false', authStore.config)\r\n        if (response.data.status === 'success') {\r\n            const apiNotifications = response.data.data.notifications || []\r\n            \r\n            // Merge with real-time notifications, avoiding duplicates\r\n            const existingIds = new Set(notifications.value.map(n => n.id))\r\n            const newNotifications = apiNotifications.filter(n => !existingIds.has(n.id))\r\n            \r\n            notifications.value = [...newNotifications, ...notifications.value].slice(0, 6)\r\n            \r\n            // Use API unread count as source of truth (it's always accurate)\r\n            // This ensures we don't double-count notifications that were already in the API response\r\n            const apiUnreadCount = response.data.data.pagination?.unread_count || 0\r\n            unreadCount.value = apiUnreadCount\r\n            \r\n            // Sync with real-time unread count to reset it to API value\r\n            // This prevents double-counting when realtime notifications arrive after API fetch\r\n            updateRealtimeUnreadCount(apiUnreadCount)\r\n            \r\n            // Reset realtime tracking to prevent double-counting\r\n            // When API fetch happens, all notifications in API are considered \"already counted\"\r\n            resetRealtimeTracking()\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching notifications:', error)\r\n    } finally {\r\n        isLoading.value = false\r\n    }\r\n}\r\n\r\n// Fetch unread count only\r\nconst fetchUnreadCount = async () => {\r\n    if (!authStore.isAuthenticated) return\r\n    \r\n    try {\r\n        const response = await axios.get('/api/v1/notifications/unread-count', authStore.config)\r\n        if (response.data.status === 'success') {\r\n            const count = response.data.data.unread_count || 0\r\n            unreadCount.value = count\r\n            updateRealtimeUnreadCount(count)\r\n        }\r\n    } catch (error) {\r\n        console.error('Error fetching unread count:', error)\r\n    }\r\n}\r\n\r\n// Watch for real-time unread count changes\r\n// Only update if the count actually changed to prevent unnecessary updates\r\nwatch(realtimeUnreadCount, (newCount) => {\r\n    if (newCount !== null && newCount !== undefined && newCount !== unreadCount.value) {\r\n        unreadCount.value = newCount\r\n    }\r\n}, { immediate: true })\r\n\r\n// Mark notification as read\r\nconst markAsRead = async (notificationId, event) => {\r\n    if (event) {\r\n        event.stopPropagation()\r\n    }\r\n    \r\n    // Optimistic update\r\n    const notification = notifications.value.find(n => n.id === notificationId)\r\n    if (notification && !notification.read) {\r\n        notification.read = true\r\n        notification.read_at = new Date().toISOString()\r\n        if (unreadCount.value > 0) {\r\n            unreadCount.value--\r\n        }\r\n        // Also update real-time state\r\n        markRealtimeAsRead(notificationId)\r\n    }\r\n    \r\n    try {\r\n        await axios.post(`/api/v1/notifications/${notificationId}/read`, {}, authStore.config)\r\n    } catch (error) {\r\n        console.error('Error marking notification as read:', error)\r\n        // Revert optimistic update on error\r\n        if (notification) {\r\n            notification.read = false\r\n            notification.read_at = null\r\n            unreadCount.value++\r\n        }\r\n    }\r\n}\r\n\r\n// Handle notification click\r\nconst handleNotificationClick = (notification) => {\r\n    if (!notification.read) {\r\n        markAsRead(notification.id, { stopPropagation: () => {} })\r\n    }\r\n    \r\n    // Navigate based on notification type and data\r\n    if (notification.data?.url) {\r\n        router.push(notification.data.url)\r\n        isOpen.value = false\r\n    }\r\n}\r\n\r\n// Toggle dropdown\r\nconst toggleDropdown = () => {\r\n    isOpen.value = !isOpen.value\r\n    // Only fetch if dropdown is opening and realtime is not connected\r\n    // If realtime is connected, notifications are already synced via websocket\r\n    if (isOpen.value && !isRealtimeConnected.value) {\r\n        fetchNotifications()\r\n    }\r\n}\r\n\r\n// Close dropdown when clicking outside\r\nconst handleClickOutside = (event) => {\r\n    if (dropdownRef.value && !dropdownRef.value.contains(event.target)) {\r\n        isOpen.value = false\r\n    }\r\n}\r\n\r\n// View all notifications\r\nconst viewAll = () => {\r\n    router.push('/notifications')\r\n    isOpen.value = false\r\n}\r\n\r\n// Get notification icon based on type\r\nconst getNotificationIcon = (type) => {\r\n    const icons = {\r\n        'post_liked': 'â¤ï¸',\r\n        'post_commented': 'ðŸ’¬',\r\n        'comment_liked': 'ðŸ‘',\r\n        'question_liked': 'ðŸ‘',\r\n        'question_upvoted': 'â¬†ï¸',\r\n        'question_answered': 'ðŸ’¡',\r\n        'answer_upvoted': 'â¬†ï¸',\r\n        'answer_replied': 'ðŸ’¬',\r\n        'answer_accepted': 'âœ…',\r\n        'mentioned': 'ðŸ””',\r\n        'followed': 'ðŸ‘¤',\r\n    }\r\n    return icons[type] || 'ðŸ””'\r\n}\r\n\r\n// Get notification color based on type\r\nconst getNotificationColor = (type) => {\r\n    const colors = {\r\n        'post_liked': themeStore.isDark ? 'bg-red-900/30 text-red-400' : 'bg-red-100 text-red-600',\r\n        'post_commented': themeStore.isDark ? 'bg-blue-900/30 text-blue-400' : 'bg-blue-100 text-blue-600',\r\n        'comment_liked': themeStore.isDark ? 'bg-yellow-900/30 text-yellow-400' : 'bg-yellow-100 text-yellow-600',\r\n        'question_liked': themeStore.isDark ? 'bg-green-900/30 text-green-400' : 'bg-green-100 text-green-600',\r\n        'question_upvoted': themeStore.isDark ? 'bg-purple-900/30 text-purple-400' : 'bg-purple-100 text-purple-600',\r\n        'question_answered': themeStore.isDark ? 'bg-indigo-900/30 text-indigo-400' : 'bg-indigo-100 text-indigo-600',\r\n        'answer_upvoted': themeStore.isDark ? 'bg-purple-900/30 text-purple-400' : 'bg-purple-100 text-purple-600',\r\n        'answer_replied': themeStore.isDark ? 'bg-blue-900/30 text-blue-400' : 'bg-blue-100 text-blue-600',\r\n        'answer_accepted': themeStore.isDark ? 'bg-green-900/30 text-green-400' : 'bg-green-100 text-green-600',\r\n        'mentioned': themeStore.isDark ? 'bg-orange-900/30 text-orange-400' : 'bg-orange-100 text-orange-600',\r\n        'followed': themeStore.isDark ? 'bg-pink-900/30 text-pink-400' : 'bg-pink-100 text-pink-600',\r\n    }\r\n    return colors[type] || (themeStore.isDark ? 'bg-gray-800 text-gray-400' : 'bg-gray-100 text-gray-600')\r\n}\r\n\r\n// Format time\r\nconst formatTime = (dateString) => {\r\n    const date = new Date(dateString)\r\n    const now = new Date()\r\n    const diff = now - date\r\n    const seconds = Math.floor(diff / 1000)\r\n    const minutes = Math.floor(seconds / 60)\r\n    const hours = Math.floor(minutes / 60)\r\n    const days = Math.floor(hours / 24)\r\n    \r\n    if (days > 0) return `${days}d ago`\r\n    if (hours > 0) return `${hours}h ago`\r\n    if (minutes > 0) return `${minutes}m ago`\r\n    return 'Just now'\r\n}\r\n\r\n// Polling control (fallback when realtime unavailable)\r\nlet pollingIntervalId = null\r\nconst POLLING_INTERVAL = 10000\r\n\r\nconst startPolling = (fetchImmediately = false) => {\r\n    if (pollingIntervalId || !authStore.isAuthenticated) {\r\n        return\r\n    }\r\n    // Fetch immediately if requested (e.g., when realtime disconnects)\r\n    if (fetchImmediately) {\r\n        fetchNotifications()\r\n    }\r\n    pollingIntervalId = setInterval(() => {\r\n        fetchNotifications()\r\n    }, POLLING_INTERVAL)\r\n}\r\n\r\nconst stopPolling = () => {\r\n    if (pollingIntervalId) {\r\n        clearInterval(pollingIntervalId)\r\n        pollingIntervalId = null\r\n    }\r\n}\r\n\r\nwatch(isRealtimeConnected, (connected) => {\r\n    if (connected) {\r\n        stopPolling()\r\n    } else {\r\n        // When realtime disconnects, fetch immediately to get latest notifications\r\n        startPolling(true)\r\n    }\r\n})\r\n\r\nonMounted(() => {\r\n    if (authStore.isAuthenticated) {\r\n        // Always fetch initial notifications once to populate the list\r\n        fetchNotifications()\r\n        \r\n        // If realtime is not connected, start polling for updates\r\n        // The watcher will handle stopping polling when realtime connects\r\n        if (!isRealtimeConnected.value) {\r\n            startPolling()\r\n        }\r\n    }\r\n    document.addEventListener('click', handleClickOutside)\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n    stopPolling()\r\n    document.removeEventListener('click', handleClickOutside)\r\n})\r\n</script>\r\n\r\n<template>\r\n    <div v-if=\"authStore.isAuthenticated\" ref=\"dropdownRef\" class=\"relative\">\r\n        <!-- Bell Icon Button -->\r\n        <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            @click=\"toggleDropdown\"\r\n            class=\"relative hover:bg-transparent hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300 dark:hover:text-white\"\r\n        >\r\n            <Bell class=\"h-5 w-5\" />\r\n            <span\r\n                v-if=\"unreadCount > 0\"\r\n                class=\"absolute -top-1 -right-1 h-5 w-5 rounded-full flex items-center justify-center text-xs font-bold text-white\"\r\n                :class=\"themeStore.isDark ? 'bg-red-600' : 'bg-red-500'\"\r\n            >\r\n                {{ unreadCount > 9 ? '9+' : unreadCount }}\r\n            </span>\r\n        </Button>\r\n\r\n        <!-- Dropdown -->\r\n        <Transition name=\"dropdown\">\r\n            <div\r\n                v-if=\"isOpen\"\r\n                class=\"absolute left-0 right-0 translate-x-[-62%] md:left-auto md:right-0 md:translate-x-0 mt-2 w-96 max-h-[500px] rounded-xl shadow-2xl border backdrop-blur-xl overflow-hidden z-50\"\r\n                :class=\"[\r\n                    themeStore.isDark\r\n                        ? 'bg-gray-900/95 border-gray-800'\r\n                        : 'bg-white/95 border-gray-200'\r\n                ]\"\r\n            >\r\n                <!-- Header -->\r\n                <div class=\"flex items-center justify-between px-4 py-2 border-b\" :class=\"[\r\n                    themeStore.isDark ? 'border-gray-800' : 'border-gray-200'\r\n                ]\">\r\n                    <div class=\"flex items-center gap-2\">\r\n                        <h3 class=\"font-semibold text-lg\" :class=\"[\r\n                            themeStore.isDark ? 'text-white' : 'text-gray-900'\r\n                        ]\">\r\n                            Notifications\r\n                        </h3>\r\n                        <!-- Connection Status Indicator -->\r\n                        <div class=\"flex items-center gap-1\" :title=\"isRealtimeConnected ? 'Real-time connected' : 'Real-time disconnected'\">\r\n                            <Wifi \r\n                                v-if=\"isRealtimeConnected\" \r\n                                class=\"h-3 w-3\" \r\n                                :class=\"themeStore.isDark ? 'text-green-400' : 'text-green-600'\"\r\n                            />\r\n                            <WifiOff \r\n                                v-else \r\n                                class=\"h-3 w-3\" \r\n                                :class=\"themeStore.isDark ? 'text-gray-500' : 'text-gray-400'\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        @click=\"isOpen = false\"\r\n                        class=\"h-8 w-8\"\r\n                    >\r\n                        <X class=\"h-4 w-4\" />\r\n                    </Button>\r\n                </div>\r\n\r\n                <!-- Notifications List -->\r\n                <div class=\"max-h-[400px] overflow-y-auto\">\r\n                    <div v-if=\"isLoading\" class=\"p-8 text-center\">\r\n                        <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-2\" :class=\"[\r\n                            themeStore.isDark ? 'border-white' : 'border-gray-900'\r\n                        ]\"></div>\r\n                        <p class=\"text-sm\" :class=\"[\r\n                            themeStore.isDark ? 'text-gray-400' : 'text-gray-600'\r\n                        ]\">Loading...</p>\r\n                    </div>\r\n\r\n                    <div v-else-if=\"notifications.length === 0\" class=\"p-8 text-center\">\r\n                        <Bell class=\"h-12 w-12 mx-auto mb-3 opacity-50\" :class=\"[\r\n                            themeStore.isDark ? 'text-gray-600' : 'text-gray-400'\r\n                        ]\" />\r\n                        <p class=\"text-sm font-medium mb-1\" :class=\"[\r\n                            themeStore.isDark ? 'text-white' : 'text-gray-900'\r\n                        ]\">No notifications</p>\r\n                        <p class=\"text-xs\" :class=\"[\r\n                            themeStore.isDark ? 'text-gray-500' : 'text-gray-500'\r\n                        ]\">You're all caught up!</p>\r\n                    </div>\r\n\r\n                    <div v-else class=\"divide-y\" :class=\"[\r\n                        themeStore.isDark ? 'divide-gray-800' : 'divide-gray-100'\r\n                    ]\">\r\n                        <div\r\n                            v-for=\"notification in notifications\"\r\n                            :key=\"notification.id\"\r\n                            @click=\"handleNotificationClick(notification)\"\r\n                            class=\"px-4 py-3 cursor-pointer transition-colors relative group\"\r\n                            :class=\"[\r\n                                notification.read\r\n                                    ? (themeStore.isDark ? 'hover:bg-gray-800/50' : 'hover:bg-gray-50')\r\n                                    : (themeStore.isDark ? 'bg-blue-900/10 hover:bg-blue-900/20' : 'bg-blue-50/50 hover:bg-blue-50')\r\n                            ]\"\r\n                        >\r\n                            <!-- Unread Indicator -->\r\n                            <div\r\n                                v-if=\"!notification.read\"\r\n                                class=\"absolute left-0 top-0 bottom-0 w-1\"\r\n                                :class=\"themeStore.isDark ? 'bg-blue-500' : 'bg-blue-500'\"\r\n                            ></div>\r\n\r\n                            <div class=\"flex items-start gap-3\">\r\n                                <!-- Icon -->\r\n                                <div class=\"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center text-lg\" :class=\"getNotificationColor(notification.type)\">\r\n                                    {{ getNotificationIcon(notification.type) }}\r\n                                </div>\r\n\r\n                                <!-- Content -->\r\n                                <div class=\"flex-1 min-w-0\">\r\n                                    <div class=\"flex items-start justify-between gap-2 mb-1\">\r\n                                        <p class=\"text-sm font-medium line-clamp-2\" :class=\"[\r\n                                            themeStore.isDark ? 'text-white' : 'text-gray-900'\r\n                                        ]\">\r\n                                            {{ notification.title }}\r\n                                        </p>\r\n                                        <Button\r\n                                            v-if=\"!notification.read\"\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            @click.stop=\"markAsRead(notification.id, $event)\"\r\n                                            class=\"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0\"\r\n                                        >\r\n                                            <Check class=\"h-3 w-3\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                    <p class=\"text-xs mb-2 line-clamp-2\" :class=\"[\r\n                                        themeStore.isDark ? 'text-gray-400' : 'text-gray-600'\r\n                                    ]\">\r\n                                        {{ notification.message }}\r\n                                    </p>\r\n                                    <div class=\"flex items-center justify-between\">\r\n                                        <span class=\"text-xs\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-500' : 'text-gray-500'\r\n                                        ]\">\r\n                                            {{ formatTime(notification.created_at) }}\r\n                                        </span>\r\n                                        <span\r\n                                            v-if=\"notification.notifiable\"\r\n                                            class=\"text-xs font-medium\"\r\n                                            :class=\"[\r\n                                                themeStore.isDark ? 'text-gray-400' : 'text-gray-600'\r\n                                            ]\"\r\n                                        >\r\n                                            @{{ notification.notifiable.username }}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Footer -->\r\n                <div v-if=\"notifications.length > 0\" class=\"px-4 py-2 border-t\" :class=\"[\r\n                    themeStore.isDark ? 'border-gray-800 bg-gray-900/50' : 'border-gray-200 bg-gray-50/50'\r\n                ]\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        class=\"w-full justify-center text-sm\"\r\n                        @click=\"viewAll\"\r\n                    >\r\n                        View All Notifications\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </Transition>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.dropdown-enter-active,\r\n.dropdown-leave-active {\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.dropdown-enter-from,\r\n.dropdown-leave-to {\r\n    opacity: 0;\r\n    transform: translate(0, -10px);\r\n}\r\n\r\n@media (min-width: 1024px) {\r\n    .dropdown-enter-from,\r\n    .dropdown-leave-to {\r\n        opacity: 0;\r\n        transform: translateY(-10px);\r\n    }\r\n}\r\n\r\n.line-clamp-2 {\r\n    display: -webkit-box;\r\n    line-clamp: 2;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n}\r\n</style>\r\n\r\n","/**\r\n * Recent Searches Composable\r\n * \r\n * Manages recent searches in localStorage (max 5 searches)\r\n */\r\n\r\nimport { ref } from 'vue'\r\n\r\nconst RECENT_SEARCHES_KEY = 'recent_searches'\r\nconst MAX_RECENT_SEARCHES = 5\r\n\r\n/**\r\n * Recent Searches Composable\r\n * \r\n * @returns {Object} Recent searches state and methods\r\n */\r\nexport function useRecentSearches() {\r\n    // Instance-specific state\r\n    const recentSearches = ref([])\r\n\r\n    /**\r\n     * Load recent searches from localStorage\r\n     */\r\n    const loadRecentSearches = () => {\r\n        try {\r\n            const stored = localStorage.getItem(RECENT_SEARCHES_KEY)\r\n            if (stored) {\r\n                recentSearches.value = JSON.parse(stored)\r\n            } else {\r\n                recentSearches.value = []\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading recent searches:', error)\r\n            recentSearches.value = []\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save recent searches to localStorage\r\n     */\r\n    const saveRecentSearches = () => {\r\n        try {\r\n            localStorage.setItem(RECENT_SEARCHES_KEY, JSON.stringify(recentSearches.value))\r\n        } catch (error) {\r\n            console.error('Error saving recent searches:', error)\r\n        }\r\n    }\r\n\r\n    // Load on initialization\r\n    loadRecentSearches()\r\n\r\n    /**\r\n     * Add a search to recent searches\r\n     * \r\n     * @param {string} query - The search query\r\n     */\r\n    const addRecentSearch = (query) => {\r\n        if (!query || query.trim().length < 3) {\r\n            return\r\n        }\r\n\r\n        const trimmedQuery = query.trim()\r\n\r\n        // Remove if already exists (to move it to top)\r\n        recentSearches.value = recentSearches.value.filter(\r\n            search => search.query.toLowerCase() !== trimmedQuery.toLowerCase()\r\n        )\r\n\r\n        // Add to beginning\r\n        recentSearches.value.unshift({\r\n            query: trimmedQuery,\r\n            timestamp: Date.now(),\r\n        })\r\n\r\n        // Keep only max recent searches\r\n        if (recentSearches.value.length > MAX_RECENT_SEARCHES) {\r\n            recentSearches.value = recentSearches.value.slice(0, MAX_RECENT_SEARCHES)\r\n        }\r\n\r\n        saveRecentSearches()\r\n    }\r\n\r\n    /**\r\n     * Remove a specific recent search\r\n     * \r\n     * @param {string} query - The search query to remove\r\n     */\r\n    const removeRecentSearch = (query) => {\r\n        recentSearches.value = recentSearches.value.filter(\r\n            search => search.query.toLowerCase() !== query.toLowerCase()\r\n        )\r\n        saveRecentSearches()\r\n    }\r\n\r\n    /**\r\n     * Clear all recent searches\r\n     */\r\n    const clearRecentSearches = () => {\r\n        recentSearches.value = []\r\n        saveRecentSearches()\r\n    }\r\n\r\n    /**\r\n     * Get formatted time ago for a search\r\n     * \r\n     * @param {number} timestamp - The timestamp\r\n     * @returns {string}\r\n     */\r\n    const getTimeAgo = (timestamp) => {\r\n        const now = Date.now()\r\n        const diff = now - timestamp\r\n        const seconds = Math.floor(diff / 1000)\r\n        const minutes = Math.floor(seconds / 60)\r\n        const hours = Math.floor(minutes / 60)\r\n        const days = Math.floor(hours / 24)\r\n\r\n        if (days > 0) return `${days}d ago`\r\n        if (hours > 0) return `${hours}h ago`\r\n        if (minutes > 0) return `${minutes}m ago`\r\n        return 'Just now'\r\n    }\r\n\r\n    return {\r\n        recentSearches,\r\n        addRecentSearch,\r\n        removeRecentSearch,\r\n        clearRecentSearches,\r\n        getTimeAgo,\r\n        loadRecentSearches,\r\n    }\r\n}\r\n\r\n","<script setup>\r\nimport { ref, computed, onMounted, onBeforeUnmount, watch, nextTick } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '../../stores/auth'\r\nimport { useThemeStore } from '../../stores/theme'\r\nimport { useDebounceFn } from '@vueuse/core'\r\nimport { Button } from '../ui/button'\r\nimport { Input } from '../ui/input'\r\nimport { Search, X, Loader2, FileText, MessageSquare, FolderOpen, Users, ChevronRight, Clock } from 'lucide-vue-next'\r\nimport axios from 'axios'\r\nimport { useRecentSearches } from '../../composables/useRecentSearches'\r\nimport { useNavbarSearch } from '../../composables/useNavbarSearch'\r\n\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\nconst themeStore = useThemeStore()\r\nconst { showSearch, searchQuery, openSearch, closeSearch: closeNavbarSearch } = useNavbarSearch()\r\n\r\nconst searchResults = ref([])\r\nconst totalSearchResults = ref(0)\r\nconst hasMoreResults = ref(false)\r\nconst isSearching = ref(false)\r\nconst searchInputRef = ref(null)\r\nconst searchModalRef = ref(null)\r\nconst searchButtonRef = ref(null)\r\n\r\n// Recent searches functionality\r\nconst { recentSearches, addRecentSearch, removeRecentSearch, clearRecentSearches, getTimeAgo } = useRecentSearches()\r\n\r\n// Debounced search function\r\nconst performSearch = useDebounceFn(async (query) => {\r\n    if (query.length < 3) {\r\n        searchResults.value = []\r\n        return\r\n    }\r\n\r\n    isSearching.value = true\r\n    try {\r\n        // For navbar dropdown: use limit=10 without pagination (no per_page parameter)\r\n        const response = await axios.get(`/api/v1/search?q=${encodeURIComponent(query)}&include_trending=false&include_recommended=false&limit=10`, authStore.config)\r\n        if (response.data.status === 'success' && response.data.data) {\r\n            const data = response.data.data\r\n            // Combine all results into a single array (max 10 for dropdown)\r\n            const allResults = [\r\n                ...(data.posts || []).map(item => ({ ...item, icon: FileText })),\r\n                ...(data.questions || []).map(item => ({ ...item, icon: MessageSquare })),\r\n                ...(data.users || []).map(item => ({ ...item, icon: Users })),\r\n                ...(data.projects || []).map(item => ({ ...item, icon: FolderOpen })),\r\n            ]\r\n            // Limit to 10 results for dropdown\r\n            searchResults.value = allResults.slice(0, 10)\r\n            totalSearchResults.value = data.meta?.total_results || 0\r\n            hasMoreResults.value = data.meta?.has_more || allResults.length > 10\r\n        } else {\r\n            searchResults.value = []\r\n            totalSearchResults.value = 0\r\n            hasMoreResults.value = false\r\n        }\r\n    } catch (error) {\r\n        console.error('Search error:', error)\r\n        searchResults.value = []\r\n        totalSearchResults.value = 0\r\n        hasMoreResults.value = false\r\n    } finally {\r\n        isSearching.value = false\r\n    }\r\n}, 500)\r\n\r\n// Watch search query changes\r\nwatch(searchQuery, (newQuery) => {\r\n    if (newQuery.length >= 3) {\r\n        performSearch(newQuery)\r\n    } else {\r\n        searchResults.value = []\r\n    }\r\n})\r\n\r\n// Close search modal\r\nconst closeSearch = () => {\r\n    showSearch.value = false\r\n    searchQuery.value = ''\r\n    searchResults.value = []\r\n    totalSearchResults.value = 0\r\n    hasMoreResults.value = false\r\n}\r\n\r\n// Navigate to search results page\r\nconst viewAllResults = () => {\r\n    if (searchQuery.value.length >= 3) {\r\n        // Save to recent searches\r\n        addRecentSearch(searchQuery.value)\r\n        router.push({ \r\n            name: 'search-results', \r\n            query: { q: searchQuery.value } \r\n        })\r\n        closeSearch()\r\n    }\r\n}\r\n\r\n// Handle search result click\r\nconst handleResultClick = (result) => {\r\n    if (result.url) {\r\n        router.push(result.url)\r\n        // Save to recent searches if it's a valid search query\r\n        if (searchQuery.value && searchQuery.value.trim().length >= 3) {\r\n            addRecentSearch(searchQuery.value)\r\n        }\r\n        closeSearch()\r\n    } else if (result.type === 'user' && result.username) {\r\n        router.push(`/@${result.username}`)\r\n        // Save to recent searches if it's a valid search query\r\n        if (searchQuery.value && searchQuery.value.trim().length >= 3) {\r\n            addRecentSearch(searchQuery.value)\r\n        }\r\n        closeSearch()\r\n    }\r\n}\r\n\r\n// Handle recent search click\r\nconst handleRecentSearchClick = (query) => {\r\n    searchQuery.value = query\r\n    performSearch(query)\r\n    // Move to top of recent searches\r\n    addRecentSearch(query)\r\n}\r\n\r\n// Handle remove recent search\r\nconst handleRemoveRecentSearch = (e, query) => {\r\n    e.stopPropagation()\r\n    removeRecentSearch(query)\r\n}\r\n\r\n// Handle clear all recent searches\r\nconst handleClearAllRecentSearches = (e) => {\r\n    e.stopPropagation()\r\n    clearRecentSearches()\r\n}\r\n\r\n// Handle keyboard navigation\r\nconst handleKeydown = (e) => {\r\n    if (e.key === 'Escape') {\r\n        closeSearch()\r\n    }\r\n}\r\n\r\n// Handle Ctrl+K / Cmd+K to open search\r\nconst handleGlobalKeydown = (e) => {\r\n    // Check for Ctrl+K (Windows/Linux) or Cmd+K (Mac)\r\n    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\r\n        e.preventDefault()\r\n        if (!showSearch.value) {\r\n            showSearch.value = true\r\n        }\r\n    }\r\n}\r\n\r\n// Focus input when modal opens\r\nwatch(showSearch, async (isOpen) => {\r\n    if (isOpen) {\r\n        await nextTick()\r\n        // Use querySelector to find the input element within the modal\r\n        // This is more reliable than accessing component refs in Vue 3\r\n        try {\r\n            const input = searchModalRef.value?.querySelector?.('input[type=\"text\"]')\r\n            if (input && typeof input.focus === 'function') {\r\n                input.focus()\r\n            }\r\n        } catch (error) {\r\n            console.warn('Could not focus search input:', error)\r\n        }\r\n        document.addEventListener('keydown', handleKeydown)\r\n    } else {\r\n        document.removeEventListener('keydown', handleKeydown)\r\n    }\r\n})\r\n\r\n// Close on outside click\r\nconst handleClickOutside = (event) => {\r\n    // Get the actual DOM element from the component ref\r\n    // Component refs in Vue 3 might expose $el or be the element directly\r\n    const searchButtonElement = searchButtonRef.value?.$el || searchButtonRef.value\r\n    \r\n    // Don't close if clicking the search button or its children\r\n    // Check if element exists and has contains method before calling\r\n    if (searchButtonElement && typeof searchButtonElement.contains === 'function' && searchButtonElement.contains(event.target)) {\r\n        return\r\n    }\r\n    // Close if clicking outside the modal\r\n    if (searchModalRef.value && typeof searchModalRef.value.contains === 'function' && !searchModalRef.value.contains(event.target)) {\r\n        closeSearch()\r\n    }\r\n}\r\n\r\n// Watch for modal open/close to attach/detach click listener\r\nwatch(showSearch, (isOpen) => {\r\n    if (isOpen) {\r\n        // Use setTimeout to avoid immediate trigger from the button click\r\n        setTimeout(() => {\r\n            document.addEventListener('click', handleClickOutside)\r\n        }, 100)\r\n    } else {\r\n        document.removeEventListener('click', handleClickOutside)\r\n    }\r\n})\r\n\r\nonMounted(() => {\r\n    // Add global keyboard shortcut for search (Ctrl+K / Cmd+K)\r\n    document.addEventListener('keydown', handleGlobalKeydown)\r\n})\r\n\r\n// Cleanup\r\nonBeforeUnmount(() => {\r\n    document.removeEventListener('click', handleClickOutside)\r\n    document.removeEventListener('keydown', handleKeydown)\r\n    document.removeEventListener('keydown', handleGlobalKeydown)\r\n})\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <Button \r\n            ref=\"searchButtonRef\" \r\n            variant=\"ghost\" \r\n            size=\"icon\" \r\n            @click=\"showSearch = true\" \r\n            class=\"relative overflow-hidden hover:bg-transparent hover:text-gray-700 hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300 dark:hover:text-white\">\r\n            <Search class=\"h-5 w-5 rotate-0 scale-100 transition-all duration-300\" />\r\n            <span class=\"sr-only\">Search</span>\r\n        </Button>\r\n\r\n        <Teleport to=\"body\">\r\n            <Transition name=\"fade\">\r\n                <div v-show=\"showSearch\" @click.self=\"closeSearch\" class=\"fixed inset-0 z-50 flex items-start justify-center pt-20 px-4 bg-black/60 backdrop-blur-sm\">\r\n                    <div ref=\"searchModalRef\" class=\"relative w-full max-w-2xl transition-all duration-300 ease-out\" :class=\"showSearch ? 'opacity-100 scale-100' : 'opacity-0 scale-95'\">\r\n                        <div class=\"relative rounded-2xl shadow-2xl border transition-all duration-300\" :class=\"[themeStore.isDark ? 'bg-gray-900/95 border-gray-800' : 'bg-white/95 border-gray-200']\">\r\n                            <div class=\"flex items-center gap-3 px-4 py-4\">\r\n                                <Search class=\"h-5 w-5 flex-shrink-0\" :class=\"[\r\n                                    themeStore.isDark ? 'text-gray-400' : 'text-gray-500'\r\n                                ]\" />\r\n                                <Input \r\n                                    ref=\"searchInputRef\"\r\n                                    v-model=\"searchQuery\"\r\n                                    type=\"text\" \r\n                                    placeholder=\"Search posts, questions, projects, users...\"\r\n                                    class=\"flex-1 border-0 bg-transparent text-base focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-gray-400\"\r\n                                    :class=\"[\r\n                                        themeStore.isDark ? 'text-white' : 'text-gray-900'\r\n                                    ]\"\r\n                                    @keydown.escape=\"closeSearch\"\r\n                                />\r\n                                <div class=\"flex items-center gap-2\">\r\n                                    <!-- <Loader2 v-if=\"isSearching\" class=\"h-4 w-4 animate-spin text-gray-400\" /> -->\r\n                                    <Button \r\n                                        variant=\"ghost\" \r\n                                        size=\"icon\" \r\n                                        @click=\"closeSearch\"\r\n                                        :class=\"[\r\n                                            'h-8 w-8 rounded-lg transition-colors',\r\n                                            themeStore.isDark \r\n                                                ? 'hover:bg-gray-800/70' \r\n                                                : 'hover:bg-gray-100'\r\n                                        ]\">\r\n                                        <X class=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                            <!-- Search Results Dropdown -->\r\n                            <Transition name=\"slide-down\">\r\n                                <div v-if=\"searchResults.length > 0 || isSearching || (searchQuery.length === 0 && recentSearches.length > 0)\" \r\n                                    class=\"absolute top-full left-0 right-0 mt-1 max-h-[70vh] lg:max-h-96 overflow-y-auto rounded-xl shadow-xl border backdrop-blur-xl transition-all duration-200 z-50 bg-white/95 border-gray-200 dark:bg-gray-900/95 dark:border-gray-800\">\r\n                                    <!-- Recent Searches (shown when no query and no results) -->\r\n                                    <div v-if=\"!isSearching && searchQuery.length === 0 && recentSearches.length > 0\" class=\"pt-2\">\r\n                                        <div class=\"px-3 py-2 text-xs font-semibold uppercase tracking-wider flex items-center justify-between\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-400' : 'text-gray-500'\r\n                                        ]\">\r\n                                            <div class=\"flex items-center gap-2\">\r\n                                                <Clock class=\"h-3.5 w-3.5\" />\r\n                                                <span>Recent Searches</span>\r\n                                            </div>\r\n                                            <button \r\n                                                @click=\"handleClearAllRecentSearches\"\r\n                                                class=\"text-xs normal-case font-normal hover:underline transition-colors\"\r\n                                                :class=\"[\r\n                                                    themeStore.isDark \r\n                                                        ? 'text-gray-400 hover:text-gray-300' \r\n                                                        : 'text-gray-500 hover:text-gray-700'\r\n                                                ]\">\r\n                                                Clear all\r\n                                            </button>\r\n                                        </div>\r\n                                        <div \r\n                                            v-for=\"(search, index) in recentSearches\" \r\n                                            :key=\"`recent-${search.query}-${search.timestamp}`\"\r\n                                            @click=\"handleRecentSearchClick(search.query)\"\r\n                                            class=\"flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors duration-150 border-b last:border-b-0 group\"\r\n                                            :class=\"[\r\n                                                themeStore.isDark \r\n                                                    ? 'border-gray-800 hover:bg-gray-800/70 hover:border-gray-700' \r\n                                                    : 'border-gray-100 hover:bg-gray-100'\r\n                                            ]\">\r\n                                            <div class=\"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-colors\" :class=\"[\r\n                                                themeStore.isDark \r\n                                                    ? 'bg-gray-800/50 text-gray-400' \r\n                                                    : 'bg-gray-100 text-gray-500'\r\n                                            ]\">\r\n                                                <Clock class=\"h-5 w-5\" />\r\n                                            </div>\r\n                                            <div class=\"flex-1 min-w-0\">\r\n                                                <p class=\"text-sm font-medium truncate\" :class=\"[\r\n                                                    themeStore.isDark ? 'text-white' : 'text-gray-900'\r\n                                                ]\">\r\n                                                    {{ search.query }}\r\n                                                </p>\r\n                                                <p class=\"text-xs mt-0.5\" :class=\"[\r\n                                                    themeStore.isDark ? 'text-gray-500' : 'text-gray-400'\r\n                                                ]\">\r\n                                                    {{ getTimeAgo(search.timestamp) }}\r\n                                                </p>\r\n                                            </div>\r\n                                            <button\r\n                                                @click=\"handleRemoveRecentSearch($event, search.query)\"\r\n                                                class=\"flex-shrink-0 p-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200\"\r\n                                                :class=\"[\r\n                                                    themeStore.isDark \r\n                                                        ? 'hover:bg-gray-700 text-gray-400 hover:text-gray-300' \r\n                                                        : 'hover:bg-gray-200 text-gray-400 hover:text-gray-600'\r\n                                                ]\"\r\n                                                title=\"Remove from recent searches\"\r\n                                            >\r\n                                                <X class=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <!-- Loading State -->\r\n                                    <div v-else-if=\"isSearching\" class=\"p-8 text-center\">\r\n                                        <Loader2 class=\"h-6 w-6 animate-spin mx-auto mb-2\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-400' : 'text-gray-500'\r\n                                        ]\" />\r\n                                        <p class=\"text-sm\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-400' : 'text-gray-500'\r\n                                        ]\">Searching...</p>\r\n                                    </div>\r\n\r\n                                    <!-- Results List -->\r\n                                    <div v-else-if=\"searchResults.length > 0\" class=\"pt-2\">\r\n                                        <div class=\"px-3 py-2 text-xs font-semibold uppercase tracking-wider flex items-center justify-between text-gray-400 dark:text-gray-500\">\r\n                                            <span>Results ({{ totalSearchResults > 0 ? totalSearchResults : searchResults.length }})</span>\r\n                                            <span v-if=\"searchResults.length < totalSearchResults\" class=\"text-xs normal-case font-normal\">\r\n                                                Showing {{ searchResults.length }} of {{ totalSearchResults }}\r\n                                            </span>\r\n                                        </div>\r\n                                        <div \r\n                                            v-for=\"(result, index) in searchResults\" \r\n                                            :key=\"`${result.type}-${result.id || result.username || index}`\"\r\n                                            @click=\"handleResultClick(result)\"\r\n                                            class=\"flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors duration-150 border-b last:border-b-0\"\r\n                                            :class=\"[\r\n                                                themeStore.isDark \r\n                                                    ? 'border-gray-800 hover:bg-gray-800/70 hover:border-gray-700' \r\n                                                    : 'border-gray-100 hover:bg-gray-100'\r\n                                            ]\">\r\n                                            <div class=\"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-colors\" :class=\"[\r\n                                                result.type === 'post' \r\n                                                    ? (themeStore.isDark ? 'bg-blue-900/30 text-blue-400' : 'bg-blue-100 text-blue-600') :\r\n                                                result.type === 'question' \r\n                                                    ? (themeStore.isDark ? 'bg-green-900/30 text-green-400' : 'bg-green-100 text-green-600') :\r\n                                                result.type === 'project' \r\n                                                    ? (themeStore.isDark ? 'bg-purple-900/30 text-purple-400' : 'bg-purple-100 text-purple-600') :\r\n                                                    (themeStore.isDark ? 'bg-orange-900/30 text-orange-400' : 'bg-orange-100 text-orange-600')\r\n                                            ]\">\r\n                                                <component :is=\"result.icon || FileText\" class=\"h-5 w-5\" />\r\n                                            </div>\r\n                                            <div class=\"flex-1 min-w-0\">\r\n                                                <div class=\"flex items-center gap-2 mb-1\">\r\n                                                    <span class=\"text-xs font-medium px-2 py-0.5 rounded capitalize transition-colors\" :class=\"[\r\n                                                        result.type === 'post' \r\n                                                            ? (themeStore.isDark ? 'bg-blue-900/30 text-blue-400' : 'bg-blue-100 text-blue-600') :\r\n                                                        result.type === 'question' \r\n                                                            ? (themeStore.isDark ? 'bg-green-900/30 text-green-400' : 'bg-green-100 text-green-600') :\r\n                                                        result.type === 'project' \r\n                                                            ? (themeStore.isDark ? 'bg-purple-900/30 text-purple-400' : 'bg-purple-100 text-purple-600') :\r\n                                                            (themeStore.isDark ? 'bg-orange-900/30 text-orange-400' : 'bg-orange-100 text-orange-600')\r\n                                                    ]\">\r\n                                                        {{ result.type }}\r\n                                                    </span>\r\n                                                    <span v-if=\"result.author && typeof result.author === 'object' && result.author.username\" \r\n                                                        class=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                                        @{{ result.author.username }}\r\n                                                    </span>\r\n                                                    <span v-else-if=\"result.author && typeof result.author === 'string'\" \r\n                                                        class=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                                        @{{ result.author }}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <p class=\"text-sm font-medium truncate\" :class=\"[\r\n                                                    themeStore.isDark ? 'text-white' : 'text-gray-900'\r\n                                                ]\">\r\n                                                    {{ result.title || result.name || result.username }}\r\n                                                </p>\r\n                                                <p v-if=\"result.content || result.description\" class=\"text-xs mt-1 line-clamp-1\" :class=\"[\r\n                                                    themeStore.isDark ? 'text-gray-400' : 'text-gray-500'\r\n                                                ]\">\r\n                                                    {{ result.content || result.description }}\r\n                                                </p>\r\n                                                <div v-if=\"result.stats\" class=\"flex items-center gap-3 mt-1 text-xs\" :class=\"[\r\n                                                    themeStore.isDark ? 'text-gray-500' : 'text-gray-400'\r\n                                                ]\">\r\n                                                    <span v-if=\"result.stats.likes !== undefined\">\r\n                                                        â¤ï¸ {{ result.stats.likes }}\r\n                                                    </span>\r\n                                                    <span v-if=\"result.stats.comments !== undefined\">\r\n                                                        ðŸ’¬ {{ result.stats.comments }}\r\n                                                    </span>\r\n                                                    <span v-if=\"result.stats.answers !== undefined\">\r\n                                                        ðŸ’¡ {{ result.stats.answers }}\r\n                                                    </span>\r\n                                                    <span v-if=\"result.stats.views !== undefined\">\r\n                                                        ðŸ‘ï¸ {{ result.stats.views }}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                            <ChevronRight class=\"h-4 w-4 flex-shrink-0\" :class=\"[\r\n                                                themeStore.isDark ? 'text-gray-500' : 'text-gray-400'\r\n                                            ]\" />\r\n                                        </div>\r\n                                        \r\n                                        <!-- View All Button -->\r\n                                        <div class=\"px-4 py-3 border-t border-gray-200 dark:border-gray-800\">\r\n                                            <Button \r\n                                                @click=\"viewAllResults\"\r\n                                                variant=\"outline\"\r\n                                                class=\"w-full justify-center\"\r\n                                                :class=\"[\r\n                                                    themeStore.isDark \r\n                                                        ? 'hover:bg-gray-800' \r\n                                                        : 'hover:bg-gray-100'\r\n                                                ]\">\r\n                                                View All Results ({{ totalSearchResults }})\r\n                                                <ChevronRight class=\"h-4 w-4 ml-2\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <!-- No Results -->\r\n                                    <div v-else-if=\"!isSearching && searchQuery.length >= 3\" class=\"p-8 text-center\">\r\n                                        <Search class=\"h-8 w-8 mx-auto mb-2\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-600' : 'text-gray-400'\r\n                                        ]\" />\r\n                                        <p class=\"text-sm font-medium mb-1\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-300' : 'text-gray-700'\r\n                                        ]\">No results found</p>\r\n                                        <p class=\"text-xs\" :class=\"[\r\n                                            themeStore.isDark ? 'text-gray-500' : 'text-gray-500'\r\n                                        ]\">Try different keywords</p>\r\n                                    </div>\r\n                                </div>\r\n                            </Transition>\r\n\r\n                            <!-- Search Hint -->\r\n                            <div v-if=\"searchQuery.length > 0 && searchQuery.length < 3\" \r\n                                class=\"px-4 py-2 text-xs border-t\" :class=\"[\r\n                                    themeStore.isDark \r\n                                        ? 'text-gray-400 border-gray-800 bg-gray-900/50' \r\n                                        : 'text-gray-500 border-gray-200 bg-gray-50'\r\n                                ]\">\r\n                                Type at least 3 characters to search\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Transition>\r\n        </Teleport>\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n/* Fade transition for modal */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n    transition: opacity 0.2s ease, transform 0.2s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n    opacity: 0;\r\n    transform: scale(0.95);\r\n}\r\n\r\n/* Slide down transition for dropdown */\r\n.slide-down-enter-active,\r\n.slide-down-leave-active {\r\n    transition: all 0.2s ease-out;\r\n}\r\n\r\n.slide-down-enter-from {\r\n    opacity: 0;\r\n    transform: translateY(-10px);\r\n}\r\n\r\n.slide-down-leave-to {\r\n    opacity: 0;\r\n    transform: translateY(-10px);\r\n}\r\n\r\n/* Line clamp utility */\r\n.line-clamp-1 {\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 1;\r\n    line-clamp: 1;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n}\r\n</style>\r\n\r\n","<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { Button } from '@/components/ui/button'\nimport {\n    NavigationMenu,\n    NavigationMenuItem,\n    NavigationMenuLink,\n    NavigationMenuList,\n} from '@/components/ui/navigation-menu'\nimport { Menu, X, Zap, Sun, Moon } from 'lucide-vue-next'\nimport NotificationDropdown from './notifications/NotificationDropdown.vue'\nimport SearchDropdown from './search/SearchDropdown.vue'\nimport { useAuthStore } from '../stores/auth.js'\nimport { useThemeStore } from '../stores/theme.js'\n\nconst router = useRouter()\nconst route = useRoute()\nconst isMobileMenuOpen = ref(false)\nconst authStore = useAuthStore()\nconst themeStore = useThemeStore()\n\nconst navigation = computed(() => [\n    { name: 'Home', href: '/', current: route.path === '/' },\n    { name: 'About', href: '/about', current: route.path === '/about' },\n    { name: 'Projects', href: '/projects', current: route.path === '/projects' },\n    { name: 'Feed', href: '/feed', current: route.path === '/feed' },\n    { name: 'QNA', href: '/qna', current: route.path === '/qna' },\n    { name: 'Contact', href: '/contact', current: route.path === '/contact' },\n])\n\nonMounted(() => {\n    themeStore.initTheme()\n})\ndefineOptions({\n  name: 'Navbar'\n})\n</script>\n\n<template>\n    <div>\n        <nav :class=\"['sticky top-0 z-50 w-full backdrop-blur-xl transition-all duration-300 border-b',\n            themeStore.isDark ? 'bg-gray-950/90 border-gray-800' : 'bg-white/90 border-gray-200'\n        ]\">\n            <!-- Background overlay for glass effect -->\n            <div class=\"absolute inset-0 -z-10\" :class=\"[\n                'transition-all duration-500',\n                themeStore.isDark\n                    ? 'bg-gradient-to-r from-gray-950/95 via-gray-900/90 to-gray-950/95'\n                    : 'bg-gradient-to-r from-white/95 via-gray-50/90 to-white/95'\n            ]\"></div>\n    \n            <div class=\"container mx-auto px-4\">\n                <div class=\"flex h-16 items-center justify-between\">\n                    <!-- Logo with enhanced styling -->\n                    <div class=\"flex items-center\">\n                        <router-link to=\"/\" class=\"group flex items-center space-x-3 transition-all duration-300\">\n                            <div class=\"relative\">\n                                <!-- <div\n                                    class=\"absolute inset-0 rounded-lg bg-gradient-to-r from-primary to-primary/80 opacity-20 blur-sm group-hover:opacity-30 transition-opacity duration-300\">\n                                </div> -->\n                                <img src=\"/assets/front/logo/logo.png\" class=\"relative h-10 w-auto rounded-lg\" alt=\"LaraVue Logo\" />\n                            </div>\n                            <div class=\"\">\n                                <span class=\"text-xl mb-0 font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent\">\n                                    LaraVue\n                                </span>\n                                <div class=\"text-xs text-muted-foreground font-medium\">Community</div>\n                            </div>\n                        </router-link>\n                    </div>\n                    <!-- Desktop Navigation -->\n                    <div class=\"hidden lg:flex items-center space-x-1\">\n                        <NavigationMenu>\n                            <NavigationMenuList class=\"space-x-1\">\n                                <NavigationMenuItem v-for=\"item in navigation\" :key=\"item.name\">\n                                    <router-link :to=\"item.href\" :class=\"[\n                                        'relative px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300',\n                                        'text-gray-700 dark:text-gray-300 dark:hover:text-white hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10',\n                                        'focus:outline-none focus:ring-2 focus:ring-primary/20',\n                                        item.current\n                                            ? 'bg-gradient-to-r from-primary/10 to-secondary/10 shadow-lg dark:text-white text-gray-900'\n                                            : 'text-gray-700 dark:text-gray-300 dark:hover:text-white hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10'\n                                    ]\">\n                                        {{ item.name }}\n                                        <div v-if=\"item.current\"\n                                            class=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-gradient-to-r from-primary to-primary/80 rounded-full\">\n                                        </div>\n                                    </router-link>\n                                </NavigationMenuItem>\n                            </NavigationMenuList>\n                        </NavigationMenu>\n                    </div>\n                    <!-- Right side controls -->\n                    <div class=\"flex items-center lg:space-x-3\">\n                        <!-- Search -->\n                        <SearchDropdown />\n                        <!-- Theme Toggle -->\n                        <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            @click=\"themeStore.toggleTheme()\"\n                            class=\"relative hover:bg-transparent hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300 dark:hover:text-white\"\n                            :title=\"themeStore.isDark ? 'Switch to Light Mode' : 'Switch to Dark Mode'\"\n                        >\n                            <Sun v-if=\"themeStore.isDark\" class=\"h-5 w-5\" />\n                            <Moon v-else class=\"h-5 w-5\" />\n                        </Button>\n                        <NotificationDropdown v-if=\"authStore.isAuthenticated\" />\n                        <template v-if=\"authStore.isAuthenticated\">\n                            <Button \n                                variant=\"ghost\"\n                                @click=\"router.push(`/dashboard`)\"\n                                class=\"flex items-center space-x-2 !px-2 hover:bg-gray-100 dark:hover:bg-gradient-to-r dark:hover:from-primary/10 dark:hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300\">\n                                <div v-if=\"!authStore?.user?.profile_photo\" class=\"w-8 h-8 rounded-full bg-gradient-to-r from-primary to-primary/80 flex items-center justify-center leading-none text-white text-sm font-bold\">\n                                    {{ authStore?.user?.username?.charAt(0).toUpperCase() }}\n                                </div>\n                                <img v-else :src=\"authStore?.user?.profile_photo\" alt=\"Profile Photo\" class=\"w-8 h-8 rounded-full object-cover\">\n                            </Button>\n                        </template>\n                        <template v-else>\n                            <Button @click=\"router.push('/login')\"\n                                class=\"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-white shadow-lg hover:shadow-xl transition-all duration-300\">\n                                <Zap class=\"mr-50\" />\n                                Sign In\n                            </Button>\n                        </template>\n                        <Button variant=\"ghost\" size=\"icon\"\n                            class=\"lg:hidden hover:bg-gray-100 dark:hover:bg-gradient-to-r dark:hover:from-primary/10 dark:hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300\"\n                            @click=\"isMobileMenuOpen = !isMobileMenuOpen\">\n                            <Menu v-if=\"!isMobileMenuOpen\" class=\"h-6 w-6\" />\n                            <X v-else class=\"h-6 w-6\" />\n                            <span class=\"sr-only\">Toggle menu</span>\n                        </Button>\n                    </div>\n                </div>\n            </div>\n            <Transition name=\"fade\">\n                <div v-if=\"isMobileMenuOpen\" class=\"lg:hidden backdrop-blur-xl border-t transition-all duration-300\" :class=\"[\n                    themeStore.isDark ? 'bg-gray-950/95 border-gray-800' : 'bg-white/95 border-gray-200'\n                ]\">\n                    <div class=\"absolute inset-0 -z-10\" :class=\"[\n                        'transition-all duration-500',\n                        themeStore.isDark\n                            ? 'bg-gradient-to-br from-gray-950/95 via-vue/15 to-gray-950/95'\n                            : 'bg-gradient-to-br from-white/95 via-vue/25 to-white/95'\n                    ]\"></div>\n        \n                    <div class=\"space-y-2 px-4 py-2 grid grid-cols-3\">\n                        <router-link v-for=\"item in navigation\" :key=\"item.name\" :to=\"item.href\"\n                            class=\"flex items-center justify-center lg:justify-start px-4 py-3 rounded-lg text-base font-medium transition-all duration-300\"\n                            :class=\"[\n                                item.current\n                                    ? 'text-foreground bg-gradient-to-r from-primary/10 to-secondary/10 shadow-lg'\n                                    : 'text-muted-foreground hover:text-foreground hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10'\n                            ]\" @click=\"isMobileMenuOpen = false\">\n                            {{ item.name }}\n                        </router-link>\n                    </div>\n                </div>\n            </Transition>\n        </nav>\n    </div>\n</template>\n\n<style scoped>\n/* Enhance the glass effect */\n.backdrop-blur-xl {\n    backdrop-filter: blur(16px);\n    -webkit-backdrop-filter: blur(16px);\n}\n\n/* Smooth transitions for all interactive elements */\n* {\n    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n}\n</style>\n"],"names":["Menu","createLucideIcon","WifiOff","Wifi","props","__props","delegatedProps","computed","_","delegated","forwardedProps","useForwardProps","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_unref","NavigationMenuViewport","_mergeProps","cn","emits","__emit","forwarded","useForwardPropsEmits","_createBlock","NavigationMenuRoot","_renderSlot","_ctx","NavigationMenuList","notifications","ref","unreadCount","isConnected","connectionError","channel","reconnectAttempts","MAX_RECONNECT_ATTEMPTS","RECONNECT_DELAY","realtimeReceivedIds","useRealtimeNotifications","onNotificationReceived","onUnreadCountUpdate","authStore","useAuthStore","router","useRouter","connect","_a","userId","disconnect","notification","handleNotificationReceived","error","attemptReconnect","n","currentCount","updateUnreadCount","showBrowserNotification","browserNotification","delay","count","resetRealtimeTracking","markAsRead","notificationId","removeNotification","index","watch","isAuthenticated","onMounted","onBeforeUnmount","POLLING_INTERVAL","themeStore","useThemeStore","isOpen","isLoading","dropdownRef","realtimeUnreadCount","isRealtimeConnected","markRealtimeAsRead","updateRealtimeUnreadCount","fetchNotifications","response","axios","apiNotifications","existingIds","newNotifications","apiUnreadCount","newCount","event","handleNotificationClick","toggleDropdown","handleClickOutside","viewAll","getNotificationIcon","type","getNotificationColor","formatTime","dateString","date","diff","seconds","minutes","hours","days","pollingIntervalId","startPolling","fetchImmediately","stopPolling","connected","Button","Bell","_normalizeClass","_toDisplayString","_Transition","_createElementVNode","X","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","$event","_hoisted_7","_hoisted_8","_hoisted_9","Check","_hoisted_10","_cache","RECENT_SEARCHES_KEY","MAX_RECENT_SEARCHES","useRecentSearches","recentSearches","loadRecentSearches","stored","saveRecentSearches","query","trimmedQuery","search","timestamp","showSearch","searchQuery","useNavbarSearch","searchResults","totalSearchResults","hasMoreResults","isSearching","searchInputRef","searchModalRef","searchButtonRef","addRecentSearch","removeRecentSearch","clearRecentSearches","getTimeAgo","performSearch","useDebounceFn","data","allResults","item","FileText","MessageSquare","Users","FolderOpen","_b","newQuery","closeSearch","viewAllResults","handleResultClick","result","handleRecentSearchClick","handleRemoveRecentSearch","e","handleClearAllRecentSearches","handleKeydown","handleGlobalKeydown","nextTick","input","searchButtonElement","Search","_Teleport","Input","_hoisted_2","Clock","Loader2","_hoisted_11","_hoisted_12","_resolveDynamicComponent","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","ChevronRight","_hoisted_22","_hoisted_23","route","useRoute","isMobileMenuOpen","navigation","_component_router_link","NavigationMenu","NavigationMenuItem","_hoisted_6","SearchDropdown","Sun","Moon","NotificationDropdown","Zap","_createTextVNode"],"mappings":"ugCAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,GAAOC,GAAiB,WAAY,CACxC,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,EACjE,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,KAAM,GAAI,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,EAC/D,CAAC,OAAQ,CAAE,GAAI,IAAK,GAAI,KAAM,GAAI,KAAM,GAAI,KAAM,IAAK,QAAQ,CAAE,CACnE,CAAC,ECbD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMC,GAAUD,GAAiB,cAAe,CAC9C,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CAAC,OAAQ,CAAE,EAAG,4BAA6B,IAAK,QAAQ,CAAE,EAC1D,CAAC,OAAQ,CAAE,EAAG,kCAAmC,IAAK,QAAQ,CAAE,EAChE,CAAC,OAAQ,CAAE,EAAG,qCAAsC,IAAK,QAAQ,CAAE,EACnE,CAAC,OAAQ,CAAE,EAAG,kCAAmC,IAAK,QAAQ,CAAE,EAChE,CAAC,OAAQ,CAAE,EAAG,oCAAqC,IAAK,QAAQ,CAAE,EAClE,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,CAC7C,CAAC,ECjBD;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAME,GAAOF,GAAiB,WAAY,CACxC,CAAC,OAAQ,CAAE,EAAG,aAAc,IAAK,QAAQ,CAAE,EAC3C,CAAC,OAAQ,CAAE,EAAG,2BAA4B,IAAK,QAAQ,CAAE,EACzD,CAAC,OAAQ,CAAE,EAAG,6BAA8B,IAAK,QAAQ,CAAE,EAC3D,CAAC,OAAQ,CAAE,EAAG,4BAA6B,IAAK,QAAQ,CAAE,CAC5D,CAAC,mPCTD,MAAMG,EAAQC,EAORC,EAAiBC,GAAS,IAAM,CACpC,KAAM,CAAE,MAAOC,EAAG,GAAGC,CAAS,EAAKL,EAEnC,OAAOK,CACT,CAAC,EAEKC,EAAiBC,GAAgBL,CAAc,gBAInDM,EAAA,EAAAC,EAUM,MAVNC,GAUM,CATJC,EAQEC,EAAAC,EAAA,EARFC,GAQEF,EAAAN,CAAA,EAPsB,CACrB,MAAgBM,EAAAG,EAAA,gVAAuWf,EAAM,ihBCnBpY,MAAMA,EAAQC,EAcRe,EAAQC,EAERf,EAAiBC,GAAS,IAAM,CACpC,KAAM,CAAE,MAAOC,EAAG,GAAGC,CAAS,EAAKL,EAEnC,OAAOK,CACT,CAAC,EAEKa,EAAYC,GAAqBjB,EAAgBc,CAAK,oBAI1DI,EAWqBR,EAAAS,EAAA,EAXrBP,GAWqBF,EAAAM,CAAA,EAVF,CAChB,MAAcN,EAAAG,EAAA,oEAAuFf,EAAM,oBAO5G,IAAQ,CAARsB,GAAQC,EAAA,OAAA,SAAA,EACRZ,EAA0BE,EAAA,yKCvC9B,MAAMb,EAAQC,gBAQZO,EAAA,EAAAY,EAEqBR,YAFOZ,CAAK,CAAA,EAAA,WAC/B,IAAQ,CAARsB,GAAQC,EAAA,OAAA,SAAA,6JCPZ,MAAMvB,EAAQC,EAMRC,EAAiBC,GAAS,IAAM,CACpC,KAAM,CAAE,MAAOC,EAAG,GAAGC,CAAS,EAAKL,EAEnC,OAAOK,CACT,CAAC,EAEKC,EAAiBC,GAAgBL,CAAc,oBAInDkB,EAUqBR,EAAAY,EAAA,EAVrBV,GAUqBF,EAAAN,CAAA,EATG,CACrB,MAAcM,EAAAG,EAAA,oEAAuFf,EAAM,oBAO5G,IAAQ,CAARsB,GAAQC,EAAA,OAAA,SAAA,0BChBNE,EAAgBC,EAAI,EAAE,EACtBC,EAAcD,EAAI,CAAC,EACnBE,EAAcF,EAAI,EAAK,EACvBG,EAAkBH,EAAI,IAAI,EAChC,IAAII,EAAU,KACVC,EAAoB,EACxB,MAAMC,GAAyB,EACzBC,GAAkB,IAGlBC,EAAsB,IAAI,IASzB,SAASC,GACZC,EAAyB,KACzBC,EAAsB,KACxB,CACE,MAAMC,EAAYC,GAAY,EACxBC,EAASC,GAAS,EAKlBC,EAAU,IAAM,OAClB,GAAI,CAAC,OAAO,KACR,eAAQ,KAAK,8CAA8C,EAC3Db,EAAgB,MAAQ,8BACjB,GAGX,GAAI,CAACS,EAAU,iBAAmB,GAACK,EAAAL,EAAU,OAAV,MAAAK,EAAgB,IAC/C,eAAQ,KAAK,gDAAgD,EACtD,GAGX,GAAI,CACA,MAAMC,EAASN,EAAU,KAAK,GAG9B,OAAAO,EAAU,EAGVf,EAAU,OAAO,KAAK,QAAQ,QAAQc,CAAM,EAAE,EAG9Cd,EAAQ,OAAO,wBAA0BgB,GAAiB,CACtDC,EAA2BD,CAAY,CAC3C,CAAC,EAGDhB,EAAQ,WAAW,IAAM,CACrBF,EAAY,MAAQ,GACpBC,EAAgB,MAAQ,KACxBE,EAAoB,EACpB,QAAQ,IAAI,2DAA2D,CAC3E,CAAC,EAEDD,EAAQ,MAAOkB,GAAU,CACrB,QAAQ,MAAM,yCAA0CA,CAAK,EAC7DnB,EAAgB,MAAQmB,EAAM,SAAW,mBACzCpB,EAAY,MAAQ,GACpBqB,EAAgB,CACpB,CAAC,EAEM,EACX,OAASD,EAAO,CACZ,eAAQ,MAAM,6CAA8CA,CAAK,EACjEnB,EAAgB,MAAQmB,EAAM,SAAW,oBACzCpB,EAAY,MAAQ,GACb,EACX,CACJ,EAKMiB,EAAa,IAAM,OACrB,GAAIf,EACA,GAAI,CACA,OAAO,KAAK,MAAM,SAAQa,EAAAL,EAAU,OAAV,YAAAK,EAAgB,EAAE,EAAE,EAC9Cb,EAAU,KACVF,EAAY,MAAQ,GACpB,QAAQ,IAAI,gEAAgE,CAChF,OAASoB,EAAO,CACZ,QAAQ,MAAM,4CAA6CA,CAAK,CACpE,CAER,EAKMD,EAA8BD,GAAiB,CACjD,GAAI,CAUA,GARerB,EAAc,MAAM,KAAKyB,GAAKA,EAAE,KAAOJ,EAAa,EAAE,GAQjEZ,EAAoB,IAAIY,EAAa,EAAE,EACvC,OAWJ,GAPAZ,EAAoB,IAAIY,EAAa,EAAE,EAGvCrB,EAAc,MAAM,QAAQqB,CAAY,EAIpC,CAACA,EAAa,KAAM,CAGpB,MAAMK,EAAexB,EAAY,OAAS,EAC1CA,EAAY,MAAQwB,EAAe,EACnCC,EAAkBzB,EAAY,KAAK,CACvC,CAGIS,GAA0B,OAAOA,GAA2B,YAC5DA,EAAuBU,CAAY,EAInC,aAAa,aAAe,WAC5BO,EAAwBP,CAAY,EAGxC,QAAQ,IAAI,iDAAkDA,CAAY,CAC9E,OAASE,EAAO,CACZ,QAAQ,MAAM,uDAAwDA,CAAK,CAC/E,CACJ,EAKMK,EAA2BP,GAAiB,CAC9C,GAAI,CACA,MAAMQ,EAAsB,IAAI,aAAaR,EAAa,MAAO,CAC7D,KAAMA,EAAa,QACnB,KAAM,eACN,MAAO,eACP,IAAK,gBAAgBA,EAAa,EAAE,GACpC,KAAMA,EAAa,KACnB,mBAAoB,EACpC,CAAa,EAGDQ,EAAoB,QAAU,IAAM,OAChCA,EAAoB,MAAK,GACrBX,EAAAG,EAAa,OAAb,MAAAH,EAAmB,KACnBH,EAAO,KAAKM,EAAa,KAAK,GAAG,CAEzC,EAGA,WAAW,IAAM,CACbQ,EAAoB,MAAK,CAC7B,EAAG,GAAI,CACX,OAASN,EAAO,CACZ,QAAQ,MAAM,8DAA+DA,CAAK,CACtF,CACJ,EAKMC,EAAmB,IAAM,CAC3B,GAAIlB,GAAqBC,GAAwB,CAC7C,QAAQ,MAAM,2DAA2D,EACzEH,EAAgB,MAAQ,gDACxB,MACJ,CAEAE,IACA,MAAMwB,EAAQtB,GAAkBF,EAEhC,QAAQ,IAAI,oDAAoDA,CAAiB,IAAIC,EAAsB,QAAQuB,CAAK,IAAI,EAE5H,WAAW,IAAM,CACTjB,EAAU,iBACVI,EAAO,CAEf,EAAGa,CAAK,CACZ,EAKMH,EAAqBI,GAAU,CAE7B7B,EAAY,QAAU6B,IACtB7B,EAAY,MAAQ6B,EAChBnB,GAAuB,OAAOA,GAAwB,YACtDA,EAAoBmB,CAAK,EAGrC,EAKMC,EAAwB,IAAM,CAEhCvB,EAAoB,MAAK,CAC7B,EAKMwB,EAAcC,GAAmB,CACnC,MAAMb,EAAerB,EAAc,MAAM,KAAKyB,GAAKA,EAAE,KAAOS,CAAc,EACtEb,GAAgB,CAACA,EAAa,OAC9BA,EAAa,KAAO,GACpBA,EAAa,QAAU,IAAI,KAAI,EAAG,YAAW,EACzCnB,EAAY,MAAQ,GACpBA,EAAY,QAGxB,EAKMiC,EAAsBD,GAAmB,CAC3C,MAAME,EAAQpC,EAAc,MAAM,UAAUyB,GAAKA,EAAE,KAAOS,CAAc,EACxE,GAAIE,IAAU,GAAI,CACd,MAAMf,EAAerB,EAAc,MAAMoC,CAAK,EAC9CpC,EAAc,MAAM,OAAOoC,EAAO,CAAC,EAC/B,CAACf,EAAa,MAAQnB,EAAY,MAAQ,GAC1CA,EAAY,OAEpB,CACJ,EAGA,OAAAmC,EACI,IAAMxB,EAAU,gBACfyB,GAAoB,CACbA,EACArB,EAAO,GAEPG,EAAU,EACVpB,EAAc,MAAQ,CAAA,EACtBE,EAAY,MAAQ,EACpBO,EAAoB,MAAK,EAEjC,EACA,CAAE,UAAW,EAAI,CACzB,EAGI8B,GAAU,IAAM,CACR1B,EAAU,iBACVI,EAAO,CAEf,CAAC,EAGDuB,GAAgB,IAAM,CAClBpB,EAAU,CACd,CAAC,EAEM,CACH,cAAApB,EACA,YAAAE,EACA,YAAAC,EACA,gBAAAC,EACA,QAAAa,EACA,WAAAG,EACA,kBAAAO,EACA,WAAAM,EACA,mBAAAE,EACA,sBAAAH,CACR,CACA,iWC7DMS,GAAmB,+CAtOzB,MAAM5B,EAAYC,GAAY,EACxB4B,EAAaC,GAAa,EAC1B5B,EAASC,GAAS,EAElB4B,EAAS3C,EAAI,EAAK,EAClBD,EAAgBC,EAAI,EAAE,EACtBC,EAAcD,EAAI,CAAC,EACnB4C,EAAY5C,EAAI,EAAK,EACrB6C,EAAc7C,EAAI,IAAI,EAGtB,CAEF,YAAa8C,EACb,YAAaC,EAEb,WAAYC,EACZ,kBAAmBC,EACnB,sBAAAlB,CACJ,EAAItB,GAECW,GAAiB,CAECrB,EAAc,MAAM,KAAKyB,GAAKA,EAAE,KAAOJ,EAAa,EAAE,IAEjErB,EAAc,MAAM,QAAQqB,CAAY,EAEpCrB,EAAc,MAAM,OAAS,IAC7BA,EAAc,MAAQA,EAAc,MAAM,MAAM,EAAG,CAAC,GAKnDqB,EAAa,KAK1B,EAECU,GAAU,CAGH7B,EAAY,QAAU6B,IACtB7B,EAAY,MAAQ6B,EAE5B,CACJ,EAGMoB,EAAqB,SAAY,OACnC,GAAKtC,EAAU,gBAEf,CAAAgC,EAAU,MAAQ,GAClB,GAAI,CACA,MAAMO,EAAW,MAAMC,GAAM,IAAI,qDAAsDxC,EAAU,MAAM,EACvG,GAAIuC,EAAS,KAAK,SAAW,UAAW,CACpC,MAAME,EAAmBF,EAAS,KAAK,KAAK,eAAiB,CAAA,EAGvDG,EAAc,IAAI,IAAIvD,EAAc,MAAM,IAAIyB,GAAKA,EAAE,EAAE,CAAC,EACxD+B,EAAmBF,EAAiB,OAAO7B,GAAK,CAAC8B,EAAY,IAAI9B,EAAE,EAAE,CAAC,EAE5EzB,EAAc,MAAQ,CAAC,GAAGwD,EAAkB,GAAGxD,EAAc,KAAK,EAAE,MAAM,EAAG,CAAC,EAI9E,MAAMyD,IAAiBvC,EAAAkC,EAAS,KAAK,KAAK,aAAnB,YAAAlC,EAA+B,eAAgB,EACtEhB,EAAY,MAAQuD,EAIpBP,EAA0BO,CAAc,EAIxCzB,EAAqB,CACzB,CACJ,OAAST,EAAO,CACZ,QAAQ,MAAM,gCAAiCA,CAAK,CACxD,QAAC,CACGsB,EAAU,MAAQ,EACtB,EACJ,EAoBAR,EAAMU,EAAsBW,GAAa,CACjCA,GAAa,MAAkCA,IAAaxD,EAAY,QACxEA,EAAY,MAAQwD,EAE5B,EAAG,CAAE,UAAW,GAAM,EAGtB,MAAMzB,EAAa,MAAOC,EAAgByB,IAAU,CAC5CA,GACAA,EAAM,gBAAe,EAIzB,MAAMtC,EAAerB,EAAc,MAAM,KAAKyB,GAAKA,EAAE,KAAOS,CAAc,EACtEb,GAAgB,CAACA,EAAa,OAC9BA,EAAa,KAAO,GACpBA,EAAa,QAAU,IAAI,KAAI,EAAG,YAAW,EACzCnB,EAAY,MAAQ,GACpBA,EAAY,QAGhB+C,EAAmBf,CAAc,GAGrC,GAAI,CACA,MAAMmB,GAAM,KAAK,yBAAyBnB,CAAc,QAAS,CAAA,EAAIrB,EAAU,MAAM,CACzF,OAASU,EAAO,CACZ,QAAQ,MAAM,sCAAuCA,CAAK,EAEtDF,IACAA,EAAa,KAAO,GACpBA,EAAa,QAAU,KACvBnB,EAAY,QAEpB,CACJ,EAGM0D,EAA2BvC,GAAiB,OACzCA,EAAa,MACdY,EAAWZ,EAAa,GAAI,CAAE,gBAAiB,IAAM,CAAC,EAAG,GAIzDH,EAAAG,EAAa,OAAb,MAAAH,EAAmB,MACnBH,EAAO,KAAKM,EAAa,KAAK,GAAG,EACjCuB,EAAO,MAAQ,GAEvB,EAGMiB,GAAiB,IAAM,CACzBjB,EAAO,MAAQ,CAACA,EAAO,MAGnBA,EAAO,OAAS,CAACI,EAAoB,OACrCG,EAAkB,CAE1B,EAGMW,EAAsBH,GAAU,CAC9Bb,EAAY,OAAS,CAACA,EAAY,MAAM,SAASa,EAAM,MAAM,IAC7Df,EAAO,MAAQ,GAEvB,EAGMmB,EAAU,IAAM,CAClBhD,EAAO,KAAK,gBAAgB,EAC5B6B,EAAO,MAAQ,EACnB,EAGMoB,GAAuBC,IACX,CACV,WAAc,KACd,eAAkB,KAClB,cAAiB,KACjB,eAAkB,KAClB,iBAAoB,KACpB,kBAAqB,KACrB,eAAkB,KAClB,eAAkB,KAClB,gBAAmB,IACnB,UAAa,KACb,SAAY,IACpB,GACiBA,CAAI,GAAK,KAIpBC,GAAwBD,IACX,CACX,WAAcvB,EAAW,OAAS,6BAA+B,0BACjE,eAAkBA,EAAW,OAAS,+BAAiC,4BACvE,cAAiBA,EAAW,OAAS,mCAAqC,gCAC1E,eAAkBA,EAAW,OAAS,iCAAmC,8BACzE,iBAAoBA,EAAW,OAAS,mCAAqC,gCAC7E,kBAAqBA,EAAW,OAAS,mCAAqC,gCAC9E,eAAkBA,EAAW,OAAS,mCAAqC,gCAC3E,eAAkBA,EAAW,OAAS,+BAAiC,4BACvE,gBAAmBA,EAAW,OAAS,iCAAmC,8BAC1E,UAAaA,EAAW,OAAS,mCAAqC,gCACtE,SAAYA,EAAW,OAAS,+BAAiC,2BACzE,GACkBuB,CAAI,IAAMvB,EAAW,OAAS,4BAA8B,6BAIxEyB,GAAcC,GAAe,CAC/B,MAAMC,EAAO,IAAI,KAAKD,CAAU,EAE1BE,EADM,IAAI,KACGD,EACbE,EAAU,KAAK,MAAMD,EAAO,GAAI,EAChCE,EAAU,KAAK,MAAMD,EAAU,EAAE,EACjCE,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAElC,OAAIC,EAAO,EAAU,GAAGA,CAAI,QACxBD,EAAQ,EAAU,GAAGA,CAAK,QAC1BD,EAAU,EAAU,GAAGA,CAAO,QAC3B,UACX,EAGA,IAAIG,EAAoB,KAGxB,MAAMC,EAAe,CAACC,EAAmB,KAAU,CAC3CF,GAAqB,CAAC9D,EAAU,kBAIhCgE,GACA1B,EAAkB,EAEtBwB,EAAoB,YAAY,IAAM,CAClCxB,EAAkB,CACtB,EAAGV,EAAgB,EACvB,EAEMqC,EAAc,IAAM,CAClBH,IACA,cAAcA,CAAiB,EAC/BA,EAAoB,KAE5B,EAEA,OAAAtC,EAAMW,EAAsB+B,GAAc,CAClCA,EACAD,EAAW,EAGXF,EAAa,EAAI,CAEzB,CAAC,EAEDrC,GAAU,IAAM,CACR1B,EAAU,kBAEVsC,EAAkB,EAIbH,EAAoB,OACrB4B,EAAY,GAGpB,SAAS,iBAAiB,QAASd,CAAkB,CACzD,CAAC,EAEDtB,GAAgB,IAAM,CAClBsC,EAAW,EACX,SAAS,oBAAoB,QAAShB,CAAkB,CAC5D,CAAC,SAIc3E,EAAA0B,CAAA,EAAU,qBAArB7B,EA4KM,MAAA,eA5KoC,cAAJ,IAAI8D,EAAc,MAAM,aAE1D5D,EAcSC,EAAA6F,CAAA,EAAA,CAbL,QAAQ,QACR,KAAK,OACJ,QAAOnB,GACR,MAAM,kMAEN,IAAwB,CAAxB3E,EAAwBC,EAAA8F,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,EAEX/E,EAAA,MAAW,OADrBlB,EAMO,OAAA,OAJH,MAAKkG,EAAA,CAAC,8GACE/F,EAAAuD,CAAA,EAAW,OAAM,aAAA,YAAA,CAAA,CAEtB,EAAAyC,EAAAjF,EAAA,aAAyBA,EAAA,KAAW,EAAA,CAAA,oBAK/ChB,EAwJakG,GAAA,CAxJD,KAAK,UAAU,EAAA,WACvB,IAsJM,CArJIxC,EAAA,WADV5D,EAsJM,MAAA,OApJF,SAAM,iLAAgL,CACvJG,EAAAuD,CAAA,EAAW,2EAO1C2C,EA+BM,MAAA,CA/BD,SAAM,uDAAsD,CAAgClG,EAAAuD,CAAA,EAAW,OAAM,kBAAA,uBAG9G2C,EAmBM,MAnBNpG,GAmBM,CAlBFoG,EAIK,KAAA,CAJD,SAAM,wBAAuB,CAAwClG,EAAAuD,CAAA,EAAW,OAAM,aAAA,oBAEvF,kBAEH,CAAA,EAEA2C,EAWM,MAAA,CAXD,MAAM,0BAA2B,MAAOlG,EAAA6D,CAAA,EAAmB,sBAAA,2BAElD7D,EAAA6D,CAAA,OADVrD,EAIER,EAAAb,EAAA,EAAA,OAFE,MAAK4G,EAAA,CAAC,UACE/F,EAAAuD,CAAA,EAAW,OAAM,iBAAA,gBAAA,CAAA,2BAE7B/C,EAIER,EAAAd,EAAA,EAAA,OAFE,MAAK6G,EAAA,CAAC,UACE/F,EAAAuD,CAAA,EAAW,OAAM,gBAAA,eAAA,CAAA,+BAIrCxD,EAOSC,EAAA6F,CAAA,EAAA,CANL,QAAQ,QACR,KAAK,OACJ,uBAAOpC,EAAA,MAAM,IACd,MAAM,sBAEN,IAAqB,CAArB1D,EAAqBC,EAAAmG,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,cAK1BD,EA4FM,MA5FNE,GA4FM,CA3FS1C,EAAA,OAAX9D,IAAAC,EAOM,MAPNwG,GAOM,CANFH,EAES,MAAA,CAFJ,SAAM,4DAA2D,CAAwClG,EAAAuD,CAAA,EAAW,OAAM,eAAA,8BAG/H2C,EAEiB,IAAA,CAFd,SAAM,UAAS,CAAwClG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,oBAExE,aAAU,CAAA,KAGD1C,EAAA,MAAc,SAAM,GAApCjB,IAAAC,EAUM,MAVNyG,GAUM,CATFvG,EAEKC,EAAA8F,EAAA,EAAA,CAFC,SAAM,oCAAmC,CAAwC9F,EAAAuD,CAAA,EAAW,OAAM,gBAAA,sCAGxG2C,EAEuB,IAAA,CAFpB,SAAM,2BAA0B,CAAwClG,EAAAuD,CAAA,EAAW,OAAM,aAAA,oBAEzF,mBAAgB,CAAA,EACnB2C,EAE4B,IAAA,CAFzB,SAAM,UAAS,EAAwClG,EAAAuD,CAAA,EAAW,OAAM,qBAExE,wBAAqB,CAAA,UAG5B1D,EAqEM,MAAA,OArEM,SAAM,WAAU,CAAoCG,EAAAuD,CAAA,EAAW,OAAM,kBAAA,8BAG7E1D,EAiEM0G,EAAA,KAAAC,EAhEqB3F,EAAA,MAAhBqB,QADXrC,EAiEM,MAAA,CA/DD,IAAKqC,EAAa,GAClB,QAAKuE,GAAEhC,EAAwBvC,CAAY,EAC5C,SAAM,4DAA2D,CACtBA,EAAa,KAA6ClC,EAAAuD,CAAA,EAAW,OAAM,uBAAA,mBAAwFvD,EAAAuD,CAAA,EAAW,OAAM,sCAAA,sCAQpNrB,EAAa,mBADxBrC,EAIO,MAAA,OAFH,MAAKkG,EAAA,CAAC,sCACE/F,EAAAuD,CAAA,EAAW,OAAM,cAAA,CAAA,YAG7B2C,EA8CM,MA9CNQ,GA8CM,CA5CFR,EAEM,MAAA,CAFD,SAAM,8EAAsFnB,GAAqB7C,EAAa,IAAI,CAAA,CAAA,KAChI2C,GAAoB3C,EAAa,IAAI,CAAA,EAAA,CAAA,EAI5CgE,EAsCM,MAtCNS,GAsCM,CArCFT,EAeM,MAfNU,GAeM,CAdFV,EAII,IAAA,CAJD,SAAM,mCAAkC,CAAwDlG,EAAAuD,CAAA,EAAW,OAAM,aAAA,kBAG7G,EAAAyC,EAAA9D,EAAa,KAAK,EAAA,CAAA,EAGdA,EAAa,mBADxB1B,EAQSR,EAAA6F,CAAA,EAAA,OANL,QAAQ,QACR,KAAK,OACJ,cAAY/C,EAAWZ,EAAa,GAAIuE,CAAM,EAAA,CAAA,MAAA,CAAA,EAC/C,MAAM,yFAEN,IAAyB,CAAzB1G,EAAyBC,EAAA6G,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,2BAG9BX,EAII,IAAA,CAJD,SAAM,4BAA2B,CAAoDlG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,kBAGlG,EAAAyC,EAAA9D,EAAa,OAAO,EAAA,CAAA,EAE3BgE,EAeM,MAfNY,GAeM,CAdFZ,EAIO,OAAA,CAJD,SAAM,UAAS,EAAwDlG,EAAAuD,CAAA,EAAW,OAAM,uBAGvFyB,GAAW9C,EAAa,UAAU,CAAA,EAAA,CAAA,EAG/BA,EAAa,gBADvBrC,EAQO,OAAA,OANH,SAAM,sBAAqB,CACgCG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,kBAG/E,EAAA,KACIyC,EAAG9D,EAAa,WAAW,QAAQ,EAAA,CAAA,yCAUrDrB,EAAA,MAAc,OAAM,OAA/BhB,EAUM,MAAA,OAV+B,SAAM,qBAAoB,CAAgCG,EAAAuD,CAAA,EAAW,OAAM,iCAAA,qCAG5GxD,EAMSC,EAAA6F,CAAA,EAAA,CALL,QAAQ,QACR,MAAM,gCACL,QAAOjB,cACX,IAED,CAAA,GAAAmC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,2BAED,EAAA,8GCpcdC,GAAsB,kBACtBC,GAAsB,EAOrB,SAASC,IAAoB,CAEhC,MAAMC,EAAiBrG,EAAI,EAAE,EAKvBsG,EAAqB,IAAM,CAC7B,GAAI,CACA,MAAMC,EAAS,aAAa,QAAQL,EAAmB,EACnDK,EACAF,EAAe,MAAQ,KAAK,MAAME,CAAM,EAExCF,EAAe,MAAQ,CAAA,CAE/B,OAAS/E,EAAO,CACZ,QAAQ,MAAM,iCAAkCA,CAAK,EACrD+E,EAAe,MAAQ,CAAA,CAC3B,CACJ,EAKMG,EAAqB,IAAM,CAC7B,GAAI,CACA,aAAa,QAAQN,GAAqB,KAAK,UAAUG,EAAe,KAAK,CAAC,CAClF,OAAS/E,EAAO,CACZ,QAAQ,MAAM,gCAAiCA,CAAK,CACxD,CACJ,EAGA,OAAAgF,EAAkB,EAyEX,CACH,eAAAD,EACA,gBApEqBI,GAAU,CAC/B,GAAI,CAACA,GAASA,EAAM,KAAI,EAAG,OAAS,EAChC,OAGJ,MAAMC,EAAeD,EAAM,KAAI,EAG/BJ,EAAe,MAAQA,EAAe,MAAM,OACxCM,GAAUA,EAAO,MAAM,YAAW,IAAOD,EAAa,YAAW,CAC7E,EAGQL,EAAe,MAAM,QAAQ,CACzB,MAAOK,EACP,UAAW,KAAK,IAAG,CAC/B,CAAS,EAGGL,EAAe,MAAM,OAASF,KAC9BE,EAAe,MAAQA,EAAe,MAAM,MAAM,EAAGF,EAAmB,GAG5EK,EAAkB,CACtB,EA6CI,mBAtCwBC,GAAU,CAClCJ,EAAe,MAAQA,EAAe,MAAM,OACxCM,GAAUA,EAAO,MAAM,YAAW,IAAOF,EAAM,YAAW,CACtE,EACQD,EAAkB,CACtB,EAkCI,oBA7BwB,IAAM,CAC9BH,EAAe,MAAQ,CAAA,EACvBG,EAAkB,CACtB,EA2BI,WAnBgBI,GAAc,CAE9B,MAAMvC,EADM,KAAK,IAAG,EACDuC,EACbtC,EAAU,KAAK,MAAMD,EAAO,GAAI,EAChCE,EAAU,KAAK,MAAMD,EAAU,EAAE,EACjCE,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAElC,OAAIC,EAAO,EAAU,GAAGA,CAAI,QACxBD,EAAQ,EAAU,GAAGA,CAAK,QAC1BD,EAAU,EAAU,GAAGA,CAAO,QAC3B,UACX,EAQI,mBAAA+B,CACR,CACA,okCCrHA,MAAMxF,EAASC,GAAS,EAClBH,EAAYC,GAAY,EACxB4B,EAAaC,GAAa,EAC1B,CAAE,WAAAmE,EAAY,YAAAC,CAAwD,EAAIC,GAAe,EAEzFC,EAAgBhH,EAAI,EAAE,EACtBiH,EAAqBjH,EAAI,CAAC,EAC1BkH,EAAiBlH,EAAI,EAAK,EAC1BmH,EAAcnH,EAAI,EAAK,EACvBoH,EAAiBpH,EAAI,IAAI,EACzBqH,EAAiBrH,EAAI,IAAI,EACzBsH,EAAkBtH,EAAI,IAAI,EAG1B,CAAE,eAAAqG,EAAgB,gBAAAkB,EAAiB,mBAAAC,EAAoB,oBAAAC,EAAqB,WAAAC,EAAU,EAAKtB,GAAiB,EAG5GuB,EAAgBC,GAAc,MAAOnB,GAAU,SACjD,GAAIA,EAAM,OAAS,EAAG,CAClBO,EAAc,MAAQ,CAAA,EACtB,MACJ,CAEAG,EAAY,MAAQ,GACpB,GAAI,CAEA,MAAMhE,EAAW,MAAMC,GAAM,IAAI,oBAAoB,mBAAmBqD,CAAK,CAAC,6DAA8D7F,EAAU,MAAM,EAC5J,GAAIuC,EAAS,KAAK,SAAW,WAAaA,EAAS,KAAK,KAAM,CAC1D,MAAM0E,EAAO1E,EAAS,KAAK,KAErB2E,EAAa,CACf,IAAID,EAAK,OAAS,CAAA,GAAI,IAAIE,IAAS,CAAE,GAAGA,EAAM,KAAMC,EAAQ,EAAG,EAC/D,IAAIH,EAAK,WAAa,CAAA,GAAI,IAAIE,IAAS,CAAE,GAAGA,EAAM,KAAME,EAAa,EAAG,EACxE,IAAIJ,EAAK,OAAS,CAAA,GAAI,IAAIE,IAAS,CAAE,GAAGA,EAAM,KAAMG,EAAK,EAAG,EAC5D,IAAIL,EAAK,UAAY,CAAA,GAAI,IAAIE,IAAS,CAAE,GAAGA,EAAM,KAAMI,EAAU,EAAG,CACpF,EAEYnB,EAAc,MAAQc,EAAW,MAAM,EAAG,EAAE,EAC5Cb,EAAmB,QAAQhG,EAAA4G,EAAK,OAAL,YAAA5G,EAAW,gBAAiB,EACvDiG,EAAe,QAAQkB,EAAAP,EAAK,OAAL,YAAAO,EAAW,WAAYN,EAAW,OAAS,EACtE,MACId,EAAc,MAAQ,CAAA,EACtBC,EAAmB,MAAQ,EAC3BC,EAAe,MAAQ,EAE/B,OAAS5F,EAAO,CACZ,QAAQ,MAAM,gBAAiBA,CAAK,EACpC0F,EAAc,MAAQ,CAAA,EACtBC,EAAmB,MAAQ,EAC3BC,EAAe,MAAQ,EAC3B,QAAC,CACGC,EAAY,MAAQ,EACxB,CACJ,EAAG,GAAG,EAGN/E,EAAM0E,EAAcuB,GAAa,CACzBA,EAAS,QAAU,EACnBV,EAAcU,CAAQ,EAEtBrB,EAAc,MAAQ,CAAA,CAE9B,CAAC,EAGD,MAAMsB,EAAc,IAAM,CACtBzB,EAAW,MAAQ,GACnBC,EAAY,MAAQ,GACpBE,EAAc,MAAQ,CAAA,EACtBC,EAAmB,MAAQ,EAC3BC,EAAe,MAAQ,EAC3B,EAGMqB,GAAiB,IAAM,CACrBzB,EAAY,MAAM,QAAU,IAE5BS,EAAgBT,EAAY,KAAK,EACjChG,EAAO,KAAK,CACR,KAAM,iBACN,MAAO,CAAE,EAAGgG,EAAY,KAAK,CACzC,CAAS,EACDwB,EAAW,EAEnB,EAGME,GAAqBC,GAAW,CAC9BA,EAAO,KACP3H,EAAO,KAAK2H,EAAO,GAAG,EAElB3B,EAAY,OAASA,EAAY,MAAM,KAAI,EAAG,QAAU,GACxDS,EAAgBT,EAAY,KAAK,EAErCwB,EAAW,GACJG,EAAO,OAAS,QAAUA,EAAO,WACxC3H,EAAO,KAAK,KAAK2H,EAAO,QAAQ,EAAE,EAE9B3B,EAAY,OAASA,EAAY,MAAM,KAAI,EAAG,QAAU,GACxDS,EAAgBT,EAAY,KAAK,EAErCwB,EAAW,EAEnB,EAGMI,GAA2BjC,GAAU,CACvCK,EAAY,MAAQL,EACpBkB,EAAclB,CAAK,EAEnBc,EAAgBd,CAAK,CACzB,EAGMkC,EAA2B,CAACC,EAAGnC,IAAU,CAC3CmC,EAAE,gBAAe,EACjBpB,EAAmBf,CAAK,CAC5B,EAGMoC,EAAgCD,GAAM,CACxCA,EAAE,gBAAe,EACjBnB,EAAmB,CACvB,EAGMqB,EAAiBF,GAAM,CACrBA,EAAE,MAAQ,UACVN,EAAW,CAEnB,EAGMS,EAAuBH,GAAM,EAE1BA,EAAE,SAAWA,EAAE,UAAYA,EAAE,MAAQ,MACtCA,EAAE,eAAc,EACX/B,EAAW,QACZA,EAAW,MAAQ,IAG/B,EAGAzE,EAAMyE,EAAY,MAAOlE,GAAW,SAChC,GAAIA,EAAQ,CACR,MAAMqG,GAAQ,EAGd,GAAI,CACA,MAAMC,GAAQb,GAAAnH,EAAAoG,EAAe,QAAf,YAAApG,EAAsB,gBAAtB,YAAAmH,EAAA,KAAAnH,EAAsC,sBAChDgI,GAAS,OAAOA,EAAM,OAAU,YAChCA,EAAM,MAAK,CAEnB,OAAS3H,EAAO,CACZ,QAAQ,KAAK,gCAAiCA,CAAK,CACvD,CACA,SAAS,iBAAiB,UAAWwH,CAAa,CACtD,MACI,SAAS,oBAAoB,UAAWA,CAAa,CAE7D,CAAC,EAGD,MAAMjF,EAAsBH,GAAU,OAGlC,MAAMwF,IAAsBjI,EAAAqG,EAAgB,QAAhB,YAAArG,EAAuB,MAAOqG,EAAgB,MAItE4B,GAAuB,OAAOA,EAAoB,UAAa,YAAcA,EAAoB,SAASxF,EAAM,MAAM,GAItH2D,EAAe,OAAS,OAAOA,EAAe,MAAM,UAAa,YAAc,CAACA,EAAe,MAAM,SAAS3D,EAAM,MAAM,GAC1H4E,EAAW,CAEnB,EAGA,OAAAlG,EAAMyE,EAAalE,GAAW,CACtBA,EAEA,WAAW,IAAM,CACb,SAAS,iBAAiB,QAASkB,CAAkB,CACzD,EAAG,GAAG,EAEN,SAAS,oBAAoB,QAASA,CAAkB,CAEhE,CAAC,EAEDvB,GAAU,IAAM,CAEZ,SAAS,iBAAiB,UAAWyG,CAAmB,CAC5D,CAAC,EAGDxG,GAAgB,IAAM,CAClB,SAAS,oBAAoB,QAASsB,CAAkB,EACxD,SAAS,oBAAoB,UAAWiF,CAAa,EACrD,SAAS,oBAAoB,UAAWC,CAAmB,CAC/D,CAAC,cAIGhK,EA8PM,MAAA,KAAA,CA7PFE,EAQSC,EAAA6F,CAAA,EAAA,SAPD,kBAAJ,IAAIuC,EACJ,QAAQ,QACR,KAAK,OACJ,uBAAOT,EAAA,MAAU,IAClB,MAAM,sOACN,IAAyE,CAAzE5H,EAAyEC,EAAAiK,EAAA,EAAA,CAAjE,MAAM,wDAAwD,CAAA,EACtElD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAb,EAAmC,OAAA,CAA7B,MAAM,SAAS,EAAC,SAAM,EAAA,oBAGhC1F,EAkPW0J,GAAA,CAlPD,GAAG,MAAM,EAAA,CACfnK,EAgPakG,GAAA,CAhPD,KAAK,MAAM,EAAA,WACnB,IA8OM,IA9ONC,EA8OM,MAAA,CA9OoB,WAAYkD,EAAW,CAAA,MAAA,CAAA,EAAE,MAAM,+FACrDlD,EA4OM,MAAA,SA5OG,iBAAJ,IAAIiC,EAAiB,MAAKpC,EAAA,CAAC,iEAAyE/F,EAAA2H,CAAA,EAAU,wBAAA,oBAAA,CAAA,IAC/GzB,EA0OM,MAAA,CA1OD,MAAKH,EAAA,CAAC,qEAAoE,CAAU/F,EAAAuD,CAAA,EAAW,OAAM,iCAAA,6BAAA,CAAA,CAAA,IACtG2C,EA8BM,MA9BNpG,GA8BM,CA7BFC,EAEKC,EAAAiK,EAAA,EAAA,CAFG,SAAM,wBAAuB,CAAgDjK,EAAAuD,CAAA,EAAW,OAAM,gBAAA,sCAGtGxD,EAUEC,EAAAmK,EAAA,EAAA,SATM,iBAAJ,IAAIjC,aACKlI,EAAA4H,CAAA,6CAAAA,EAAW,MAAAnB,EAAA,MACpB,KAAK,OACL,YAAY,8CACZ,SAAM,sHAAqH,CACxEzG,EAAAuD,CAAA,EAAW,OAAM,aAAA,mBAGnE,aAAgB6F,EAAW,CAAA,QAAA,CAAA,kCAEhClD,EAcM,MAdNkE,GAcM,CAZFrK,EAWSC,EAAA6F,CAAA,EAAA,CAVL,QAAQ,QACR,KAAK,OACJ,QAAOuD,EACP,MAAKrD,EAAA,wCAAsI/F,EAAAuD,CAAA,EAAW,gEAMvJ,IAAqB,CAArBxD,EAAqBC,EAAAmG,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,0BAK9BpG,EA8LakG,GAAA,CA9LD,KAAK,YAAY,EAAA,WACzB,IA4LM,CA5LK6B,EAAA,MAAc,OAAM,GAAQG,EAAA,OAAgBjI,EAAA4H,CAAA,EAAY,SAAM,GAAU5H,EAAAmH,CAAA,EAAe,OAAM,GAAxGvH,IAAAC,EA4LM,MA5LNuG,GA4LM,CAzLU,CAAA6B,EAAA,OAAejI,EAAA4H,CAAA,EAAY,SAAM,GAAU5H,EAAAmH,CAAA,EAAe,OAAM,GAA5EvH,IAAAC,EA6DM,MA7DNwG,GA6DM,CA5DFH,EAiBM,MAAA,CAjBD,SAAM,6FAA4F,CAAwDlG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,qBAG5K2C,EAGM,MAHNI,GAGM,CAFFvG,EAA6BC,EAAAqK,EAAA,EAAA,CAAtB,MAAM,aAAa,CAAA,EAC1BtD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAb,EAA4B,YAAtB,kBAAe,EAAA,KAEzBA,EASS,SAAA,CARJ,QAAOyD,EACR,SAAM,oEAAmE,CACV3J,EAAAuD,CAAA,EAAW,mFAIvE,cAEP,CAAA,OAEJ3D,EAAA,EAAA,EAAAC,EAyCM0G,EAAA,KAAAC,EAxCwBxG,EAAAmH,CAAA,EAAc,CAAhCM,EAAQxE,SADpBpD,EAyCM,MAAA,CAvCD,cAAe4H,EAAO,KAAK,IAAIA,EAAO,SAAS,GAC/C,QAAKhB,GAAE+C,GAAwB/B,EAAO,KAAK,EAC5C,SAAM,iHAAgH,CAC3DzH,EAAAuD,CAAA,EAAW,6GAKtE2C,EAMM,MAAA,CAND,SAAM,wFAAuF,CAA4DlG,EAAAuD,CAAA,EAAW,uEAKrKxD,EAAyBC,EAAAqK,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,MAE1BnE,EAWM,MAXNQ,GAWM,CAVFR,EAII,IAAA,CAJD,SAAM,+BAA8B,CAAgElG,EAAAuD,CAAA,EAAW,OAAM,aAAA,kBAGjH,EAAAyC,EAAAyB,EAAO,KAAK,EAAA,CAAA,EAEnBvB,EAII,IAAA,CAJD,SAAM,iBAAgB,CAAgElG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,sBAGnGvD,EAAAwI,EAAA,EAAWf,EAAO,SAAS,CAAA,EAAA,CAAA,IAGtCvB,EAWS,SAAA,CAVJ,WAAOuD,EAAyBhD,EAAQgB,EAAO,KAAK,EACrD,SAAM,+FAA8F,CACrCzH,EAAAuD,CAAA,EAAW,sHAK1E,MAAM,gCAENxD,EAAqBC,EAAAmG,EAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,6BAMd8B,EAAA,OAAhBrI,IAAAC,EAOM,MAPN+G,GAOM,CANF7G,EAEKC,EAAAsK,EAAA,EAAA,CAFI,SAAM,oCAAmC,CAAwDtK,EAAAuD,CAAA,EAAW,OAAM,gBAAA,sCAG3H2C,EAEmB,IAAA,CAFhB,SAAM,UAAS,CAAwDlG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,oBAExF,eAAY,CAAA,KAIHuE,EAAA,MAAc,OAAM,GAApClI,IAAAC,EAiGM,MAjGNiH,GAiGM,CAhGFZ,EAKM,MALNqE,GAKM,CAJFrE,EAA+F,OAAA,KAAzF,YAASF,EAAG+B,EAAA,MAAkB,EAAOA,EAAA,MAAqBD,EAAA,MAAc,MAAM,EAAG,IAAC,CAAA,EAC5EA,EAAA,MAAc,OAASC,EAAA,WAAnClI,EAEO,OAFP2K,GAA+F,YACnFxE,EAAG8B,EAAA,MAAc,MAAM,EAAG,OAAI9B,EAAG+B,EAAA,KAAkB,EAAA,CAAA,eAGnEnI,EAAA,EAAA,EAAAC,EAyEM0G,EAAA,KAAAC,EAxEwBsB,EAAA,MAAa,CAA/ByB,EAAQtG,SADpBpD,EAyEM,MAAA,CAvED,IAAG,GAAK0J,EAAO,IAAI,IAAIA,EAAO,IAAMA,EAAO,UAAYtG,CAAK,GAC5D,QAAKwD,GAAE6C,GAAkBC,CAAM,EAChC,SAAM,2GAA0G,CACrDvJ,EAAAuD,CAAA,EAAW,6GAKtE2C,EAUM,MAAA,CAVD,SAAM,wFAAuF,CAA4DqD,EAAO,OAAI,OAAqEvJ,EAAAuD,CAAA,EAAW,OAAM,+BAAA,4BAAoHgG,EAAO,OAAI,WAAyEvJ,EAAAuD,CAAA,EAAW,OAAM,iCAAA,8BAAwHgG,EAAO,OAAI,UAAwEvJ,EAAAuD,CAAA,EAAW,OAAM,mCAAA,gCAAiIvD,EAAAuD,CAAA,EAAW,OAAM,mCAAA,0CASl0B/C,EAA2DiK,GAA3ClB,EAAO,MAAQvJ,EAAA8I,EAAA,CAAQ,EAAA,CAAE,MAAM,SAAS,CAAA,OAE5D5C,EAgDM,MAhDNwE,GAgDM,CA/CFxE,EAoBM,MApBNyE,GAoBM,CAnBFzE,EAUO,OAAA,CAVD,SAAM,uEAAsE,CAAoEqD,EAAO,OAAI,OAA6EvJ,EAAAuD,CAAA,EAAW,OAAM,+BAAA,4BAA4HgG,EAAO,OAAI,WAAiFvJ,EAAAuD,CAAA,EAAW,OAAM,iCAAA,8BAAgIgG,EAAO,OAAI,UAAgFvJ,EAAAuD,CAAA,EAAW,OAAM,mCAAA,gCAAyIvD,EAAAuD,CAAA,EAAW,OAAM,mCAAA,kCASv2B,EAAAyC,EAAAuD,EAAO,IAAI,EAAA,CAAA,EAENA,EAAO,QAAM,OAAWA,EAAO,QAAM,UAAiBA,EAAO,OAAO,cAAhF1J,EAGO,OAHP+K,GACqD,OAC7CrB,EAAO,OAAO,QAAQ,EAAA,CAAA,GAEbA,EAAO,QAAM,OAAWA,EAAO,QAAM,UAAtD3J,EAAA,EAAAC,EAGO,OAHPgL,GACqD,KAChD7E,EAAGuD,EAAO,MAAM,EAAA,CAAA,cAGzBrD,EAII,IAAA,CAJD,SAAM,+BAA8B,CAAgElG,EAAAuD,CAAA,EAAW,OAAM,aAAA,sBAGjHgG,EAAO,OAASA,EAAO,MAAQA,EAAO,QAAQ,EAAA,CAAA,EAE5CA,EAAO,SAAWA,EAAO,iBAAlC1J,EAII,IAAA,OAJ2C,SAAM,4BAA2B,CAAgEG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,kBAG1J,EAAAyC,EAAAuD,EAAO,SAAWA,EAAO,WAAW,EAAA,CAAA,YAEhCA,EAAO,WAAlB1J,EAeM,MAAA,OAfmB,SAAM,uCAAsC,CAAgEG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,qBAGtIgG,EAAO,MAAM,QAAU,QAAnC3J,IAAAC,EAEO,UAFuC,OACvCmG,EAAGuD,EAAO,MAAM,KAAK,EAAA,CAAA,YAEhBA,EAAO,MAAM,WAAa,QAAtC3J,IAAAC,EAEO,UAF0C,OAC1CmG,EAAGuD,EAAO,MAAM,QAAQ,EAAA,CAAA,YAEnBA,EAAO,MAAM,UAAY,QAArC3J,IAAAC,EAEO,UAFyC,OACzCmG,EAAGuD,EAAO,MAAM,OAAO,EAAA,CAAA,YAElBA,EAAO,MAAM,QAAU,QAAnC3J,IAAAC,EAEO,UAFuC,QACtCmG,EAAGuD,EAAO,MAAM,KAAK,EAAA,CAAA,4BAIrCxJ,EAEKC,EAAA8K,EAAA,EAAA,CAFS,SAAM,wBAAuB,CAA4D9K,EAAAuD,CAAA,EAAW,OAAM,gBAAA,sDAM5H2C,EAaM,MAbN6E,GAaM,CAZFhL,EAWSC,EAAA6F,CAAA,EAAA,CAVJ,QAAOwD,GACR,QAAQ,UACR,SAAM,wBAAuB,CACkCrJ,EAAAuD,CAAA,EAAW,8DAIvE,IACe,GADf,sBACeyC,EAAG+B,EAAA,KAAkB,EAAG,KAC1C,CAAA,EAAAhI,EAAqCC,EAAA8K,EAAA,EAAA,CAAvB,MAAM,cAAc,CAAA,4BAM7B7C,EAAA,OAAejI,EAAA4H,CAAA,EAAY,QAAM,GAAlDhI,IAAAC,EAUM,MAVNmL,GAUM,CATFjL,EAEKC,EAAAiK,EAAA,EAAA,CAFG,SAAM,uBAAsB,CAAwDjK,EAAAuD,CAAA,EAAW,OAAM,gBAAA,sCAG7G2C,EAEuB,IAAA,CAFpB,SAAM,2BAA0B,CAAwDlG,EAAAuD,CAAA,EAAW,OAAM,gBAAA,oBAEzG,mBAAgB,CAAA,EACnB2C,EAE6B,IAAA,CAF1B,SAAM,UAAS,EAAwDlG,EAAAuD,CAAA,EAAW,OAAM,qBAExF,yBAAsB,CAAA,kCAM1BvD,EAAA4H,CAAA,EAAY,OAAM,GAAQ5H,EAAA4H,CAAA,EAAY,OAAM,OAAvD/H,EAOM,MAAA,OANF,SAAM,6BAA4B,CAAgDG,EAAAuD,CAAA,EAAW,qGAI1F,yCAEP,CAAA,+BA3OCvD,EAAA2H,CAAA,CAAU,yrBCxNvC,MAAM/F,EAASC,GAAS,EAClBoJ,EAAQC,GAAQ,EAChBC,EAAmBrK,EAAI,EAAK,EAC5BY,EAAYC,GAAY,EACxB4B,EAAaC,GAAa,EAE1B4H,EAAa7L,GAAS,IAAM,CAC9B,CAAE,KAAM,OAAQ,KAAM,IAAK,QAAS0L,EAAM,OAAS,GAAG,EACtD,CAAE,KAAM,QAAS,KAAM,SAAU,QAASA,EAAM,OAAS,QAAQ,EACjE,CAAE,KAAM,WAAY,KAAM,YAAa,QAASA,EAAM,OAAS,WAAW,EAC1E,CAAE,KAAM,OAAQ,KAAM,QAAS,QAASA,EAAM,OAAS,OAAO,EAC9D,CAAE,KAAM,MAAO,KAAM,OAAQ,QAASA,EAAM,OAAS,MAAM,EAC3D,CAAE,KAAM,UAAW,KAAM,WAAY,QAASA,EAAM,OAAS,UAAU,CAC3E,CAAC,EAED,OAAA7H,GAAU,IAAM,CACZG,EAAW,UAAS,CACxB,CAAC,+CAOG1D,EA0HM,MAAA,KAAA,CAzHFqG,EAwHM,MAAA,CAxHA,MAAKH,EAAA,CAAA,iFAAiG/F,EAAAuD,CAAA,EAAW,OAAM,iCAAA,kCAIzH2C,EAKS,MAAA,CALJ,SAAM,yBAAwB,+BAA0ElG,EAAAuD,CAAA,EAAW,kJAOxH2C,EAoFM,MApFNpG,GAoFM,CAnFFoG,EAkFM,MAlFNkE,GAkFM,CAhFFlE,EAeM,MAfNE,GAeM,CAdFrG,EAacsL,EAAA,CAbD,GAAG,IAAI,MAAM,4EACtB,IAKM,CAAA,GAAAtE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CALNb,EAKM,MAAA,CALD,MAAM,UAAU,EAAA,CAIjBA,EAAoG,MAAA,CAA/F,IAAI,8BAA8B,MAAM,kCAAkC,IAAI,sBAEvFA,EAKM,MAAA,CALD,MAAM,EAAE,EAAA,CACTA,EAEO,OAAA,CAFD,MAAM,iGAAiG,EAAC,WAE9G,EACAA,EAAsE,MAAA,CAAjE,MAAM,2CAA2C,EAAC,WAAS,mBAK5EA,EAoBM,MApBNG,GAoBM,CAnBFtG,EAkBiBC,EAAAsL,EAAA,EAAA,KAAA,WAjBb,IAgBqB,CAhBrBvL,EAgBqBC,EAAAY,EAAA,EAAA,CAhBD,MAAM,WAAW,EAAA,WACb,IAA0B,QAA9Cf,EAcqB0G,EAAA,KAAAC,EAdc4E,EAAA,MAARvC,QAA3BrI,EAcqBR,EAAAuL,EAAA,EAAA,CAd2B,IAAK1C,EAAK,iBACtD,IAYc,CAZd9I,EAYcsL,EAAA,CAZA,GAAIxC,EAAK,KAAO,MAAK9C,EAAA,qQAA2a8C,EAAK,6OAQ/c,IAAe,KAAZA,EAAK,IAAI,EAAG,IACf,CAAA,EAAWA,EAAK,SAAhBjJ,IAAAC,EAEM,MAFNyG,EAEM,+EAO1BJ,EAwCM,MAxCNsF,GAwCM,CAtCFzL,EAAkB0L,EAAA,EAElB1L,EASSC,EAAA6F,CAAA,EAAA,CARL,QAAQ,QACR,KAAK,OACJ,QAAKkB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAEzG,EAAAuD,CAAA,EAAW,YAAW,GAC9B,MAAM,sLACL,MAAOvD,EAAAuD,CAAA,EAAW,OAAM,uBAAA,kCAEzB,IAAgD,CAArCvD,EAAAuD,CAAA,EAAW,YAAtB/C,EAAgDR,EAAA0L,EAAA,EAAA,OAAlB,MAAM,kBACpClL,EAA+BR,EAAA2L,EAAA,EAAA,OAAlB,MAAM,iCAEK3L,EAAA0B,CAAA,EAAU,qBAAtClB,EAAyDoL,GAAA,CAAA,IAAA,CAAA,CAAA,YACzC5L,EAAA0B,CAAA,EAAU,qBACtBlB,EAQSR,EAAA6F,CAAA,EAAA,OAPL,QAAQ,QACP,QAAKkB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAEzG,EAAA4B,CAAA,EAAO,KAAI,YAAA,GACnB,MAAM,iNACN,IAAA,mBAEM,QAFM5B,GAAAA,EAAAA,EAAA0B,CAAA,IAAA1B,YAAAA,EAAW,OAAXA,MAAAA,EAAiB,mBAG7BH,EAAgH,MAAA,OAAnG,KAAKG,GAAAA,EAAAA,EAAA0B,CAAA,IAAA1B,YAAAA,EAAW,OAAXA,YAAAA,EAAiB,cAAe,IAAI,gBAAgB,MAAM,sDAH5EH,EAEM,MAFN6G,GAEMV,GADChG,GAAAA,GAAAA,EAAAA,EAAA0B,CAAA,IAAA1B,YAAAA,EAAW,OAAXA,YAAAA,EAAiB,WAAjBA,YAAAA,EAA2B,OAAM,GAAI,aAAW,EAAA,CAAA,kBAM3DQ,EAISR,EAAA6F,CAAA,EAAA,OAJA,QAAKkB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAEzG,EAAA4B,CAAA,EAAO,KAAI,QAAA,GACvB,MAAM,qKACN,IAAqB,CAArB7B,EAAqBC,EAAA6L,EAAA,EAAA,CAAhB,MAAM,OAAO,CAAA,gBAAG,YAEzB,EAAA,YAEJ9L,EAMSC,EAAA6F,CAAA,EAAA,CAND,QAAQ,QAAQ,KAAK,OACzB,MAAM,6KACL,QAAKkB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAN,GAAE0E,EAAA,MAAgB,CAAIA,EAAA,mBAC5B,IAAiD,CAApCA,EAAA,WACb3K,EAA4BR,EAAAmG,EAAA,EAAA,OAAlB,MAAM,kBADhB3F,EAAiDR,EAAAhB,EAAA,EAAA,OAAlB,MAAM,aAErC+H,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAb,EAAwC,OAAA,CAAlC,MAAM,SAAS,EAAC,cAAW,EAAA,iBAKjDnG,EAuBakG,GAAA,CAvBD,KAAK,MAAM,EAAA,WACnB,IAqBM,CArBKkF,EAAA,WAAXtL,EAqBM,MAAA,OArBuB,SAAM,kEAAiE,CAA+BG,EAAAuD,CAAA,EAAW,OAAM,iCAAA,mCAGhJ2C,EAKS,MAAA,CALJ,SAAM,yBAAwB,+BAA0FlG,EAAAuD,CAAA,EAAW,2IAOxI2C,EAUM,MAVNU,GAUM,QATF/G,EAQc0G,EAAA,KAAAC,EARc4E,EAAA,MAARvC,QAApBrI,EAQc6K,EAAA,CAR2B,IAAKxC,EAAK,KAAO,GAAIA,EAAK,KAC/D,SAAM,2HAA0H,CACtFA,EAAK,yMAI3C,uBAAOsC,EAAA,MAAgB,gBAC3B,IAAe,CAAZW,EAAA9F,EAAA6C,EAAK,IAAI,EAAA,CAAA","x_google_ignoreList":[0,1,2]}