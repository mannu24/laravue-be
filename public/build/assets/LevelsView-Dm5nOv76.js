import{_ as f,a as p,b as x,o as d,D as e,A as v,z as L,ax as P,j as q,p as b,q as S,d as $,f as m,x as C,F as B,E as V}from"./app-Bvnl7d0n.js";import{a as j,u as z}from"./levelStore-AlnWSn7u.js";import{L as A}from"./LoadingSpinner-ekVe37eh.js";const N={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 shadow-sm hover:shadow-md transition-shadow","data-test":"level-card"},D={class:"flex items-start justify-between mb-4"},E={class:"text-xl font-bold text-gray-900 dark:text-white mb-1"},M={class:"flex items-center gap-2"},F={class:"text-right"},I={class:"text-2xl font-bold text-gray-900 dark:text-white"},U={class:"mb-4"},X={class:"flex items-center justify-between mb-2"},O={class:"text-sm font-semibold text-gray-900 dark:text-white"},R={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Y={__name:"LevelCard",props:{level:{type:Object,default:()=>({id:null,name:"",xp_required:0,tier:"beginner"})},progress:{type:Number,default:0,validator:s=>s>=0&&s<=100}},setup(s){const i=s,l=p(()=>{var a;const u=((a=i.level)==null?void 0:a.tier)||"beginner",r={beginner:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",intermediate:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",advanced:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",expert:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",legend:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"};return r[u]||r.beginner});return(u,r)=>{var a,c,g;return d(),x("div",N,[e("div",D,[e("div",null,[e("h3",E,v(((a=s.level)==null?void 0:a.name)||"Level 1"),1),e("div",M,[e("span",{class:L([l.value,"px-2 py-1 text-xs font-semibold rounded-full"]),"data-test":"tier-badge"},v(((c=s.level)==null?void 0:c.tier)||"beginner"),3)])]),e("div",F,[e("div",I,v(((g=s.level)==null?void 0:g.xp_required)||0),1),r[0]||(r[0]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"XP Required",-1))])]),e("div",U,[e("div",X,[r[1]||(r[1]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Progress",-1)),e("span",O,v(s.progress)+"% ",1)]),e("div",R,[e("div",{class:"h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500",style:P({width:`${s.progress}%`})},null,4)])])])}}},_=f(Y,[["__scopeId","data-v-86d7f46e"]]),G={class:"container mx-auto px-4 py-8"},H={key:0,class:"text-center py-12"},J={key:1},K={class:"mb-8"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T={__name:"LevelsView",setup(s){const i=q(),l=j(),u=z(),r=b(!0),a=b(0),c=p(()=>l.allLevels),g=p(()=>l.userCurrentLevel),h=p(()=>l.levelProgress||{progress_percent:0});S(async()=>{var o,t;try{await l.fetchLevels(),i.isAuthenticated&&((o=i.user)!=null&&o.id)&&(await Promise.all([l.fetchLevelProgress(i.user.id),u.fetchUserProfile(i.user.id)]),a.value=((t=u.userProfile)==null?void 0:t.xp_total)||0),r.value=!1}catch(n){console.error("Error loading levels:",n),r.value=!1}});const y=o=>{const t=c.value.find(w=>w.xp_required>o.xp_required);if(!t)return 100;const n=t.xp_required-o.xp_required,k=(a.value-o.xp_required)/n*100;return Math.min(100,Math.max(0,k))};return(o,t)=>(d(),x("div",G,[t[2]||(t[2]=e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-8"},"Levels",-1)),r.value?(d(),x("div",H,[$(A,{size:"lg"})])):(d(),x("div",J,[e("div",K,[t[0]||(t[0]=e("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-4"},"Your Progress",-1)),g.value?(d(),m(_,{key:0,level:g.value,progress:h.value.progress_percent||0},null,8,["level","progress"])):C("",!0)]),e("div",null,[t[1]||(t[1]=e("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-4"},"All Levels",-1)),e("div",Q,[(d(!0),x(B,null,V(c.value,n=>(d(),m(_,{key:n.id,level:n,progress:y(n)},null,8,["level","progress"]))),128))])])]))]))}},te=f(T,[["__scopeId","data-v-5b57c8ca"]]);export{te as default};
//# sourceMappingURL=LevelsView-Dm5nOv76.js.map
