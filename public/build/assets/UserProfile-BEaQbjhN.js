import{j as S,p,I as k,_ as B,t as C,aq as D,a as F,as as j,l as z,q as T,J as U,b as h,D as d,z as _,u as c,d as b,at as q,o as y}from"./app-BusCMfsw.js";import{B as E,P as L}from"./ProfileTabs-ChmlNrKS.js";import{P as N}from"./ProfileCard-CuuxxsT3.js";import{F as $}from"./file-text-CCni2WtV.js";import{U as G}from"./users-C4SGZO8j.js";import"./EmptyState-NxnJnIdz.js";import"./folder-open-B70ERHKg.js";import"./activity-DQPhffiL.js";import"./bookmark-DBYfvgfa.js";import"./code-xml-Bho0_5ph.js";import"./search-D7HZvnyK.js";import"./ConfirmDialog-C7h6FdHb.js";import"./AlertDialogTitle-CaEIQJxU.js";import"./InfiniteScroll-BfxCILxB.js";import"./PostCard-BWC1877M.js";import"./DialogContent-BW3DkoVX.js";import"./chevron-right-Bojz4hc6.js";import"./message-square-Bg3vIftc.js";import"./Skeleton-l3cOuYxv.js";import"./Card-rloiMM0U.js";import"./CardContent-DRH463jB.js";import"./heart-ouhcQglh.js";import"./arrow-right-CqIEQI_B.js";import"./ProjectsInfiniteList-DYUllWHv.js";import"./index-CTbBREyF.js";import"./user-CaHqtWKQ.js";import"./calendar-B1aSQWq4.js";import"./star-B8JIQlIP.js";import"./eye-dx6brfk1.js";import"./loader-circle-C3MxRGn-.js";import"./TaskList-C9Op4z0L.js";import"./circle-alert-CVqoJgI8.js";import"./BadgeList-CzjJilw6.js";import"./BadgeItem-58Rn2CWK.js";import"./square-pen-DJQxEXN6.js";import"./sparkles-tXxI0ic8.js";import"./mail-3ZjzIVKa.js";function I(){const v=S(),s=p(!1),l=p(!1),o=p(0),m=p(0),r=async n=>{var t;if(!v.isAuthenticated)return console.warn("Authentication required to follow users"),!1;if(l.value)return!1;l.value=!0;try{const i=await k.post(`/api/v1/users/${n}/follow`,{},v.config);return i.data.status==="success"?(s.value=i.data.data.is_following,o.value=i.data.data.user.followers_count,m.value=i.data.data.user.following_count,!0):!1}catch(i){return console.error("Follow toggle error:",((t=i.response)==null?void 0:t.data)||i.message),!1}finally{l.value=!1}},a=async n=>{if(!v.isAuthenticated){s.value=!1;return}try{const t=await k.get(`/api/v1/users/${n}/follow/check`,v.config);t.data.status==="success"&&(s.value=t.data.data.is_following,o.value=t.data.data.user.followers_count,m.value=t.data.data.user.following_count)}catch(t){console.error("Error checking follow status:",t),s.value=!1}};return{isFollowing:s,isLoading:l,followersCount:o,followingCount:m,toggleFollow:r,checkFollowStatus:a,initialize:(n,t=null)=>{t?(s.value=t.is_following||!1,o.value=t.followers_count||0,m.value=t.following_count||0):a(n)}}}const M={class:"min-h-screen"},V={key:0,class:"flex items-center justify-center min-h-screen"},J={class:"text-center"},O={key:1},R={class:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-8"},H={key:2,class:"flex items-center justify-center min-h-screen"},K={class:"text-center"},Q={__name:"UserProfile",emits:["share_url"],setup(v){const s=U(),l=S(),o=C(),m=D(),r=p(null),a=p(null),w=p(!0),n=F(()=>{var e;return l.isAuthenticated&&((e=l.user)==null?void 0:e.username)===r.value}),{isFollowing:t,followersCount:i,followingCount:P}=I(),A=F(()=>{var e,u;return(u=(e=a.value)==null?void 0:e.gamification)!=null&&u.summary?a.value.gamification.summary:m.gamificationSummary}),x=async()=>{var e,u,g;w.value=!0;try{const f=await q.get(`/users/${r.value}`);f.data.status==="success"&&(a.value=f.data.data.user||f.data.data,i.value=((e=a.value)==null?void 0:e.followers_count)||0,P.value=((u=a.value)==null?void 0:u.following_count)||0,l.isAuthenticated&&!n.value&&(t.value=((g=a.value)==null?void 0:g.is_following)||!1),f.data.data.gamification&&(a.value.gamification=f.data.data.gamification))}catch(f){console.error("Error fetching user profile:",f),a.value=null}finally{w.value=!1}};return j(async(e,u)=>{e.params.username!==u.params.username&&(r.value=e.params.username,await x())}),z(()=>s.params.username,e=>{e&&e!==r.value&&(r.value=e,x())}),T(async()=>{var e;r.value=s.params.username,await x(),(e=a.value)!=null&&e.gamification||await m.fetchGlobalData()}),(e,u)=>{var g;return y(),h("div",M,[w.value?(y(),h("div",V,[d("div",J,[d("div",{class:_(["animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",[c(o).isDark?"border-white":"border-gray-900"]])},null,2),d("p",{class:_([c(o).isDark?"text-gray-400":"text-gray-600"])},"Loading profile...",2)])])):a.value?(y(),h("div",O,[b(N,{user:a.value,"social-links":a.value.social_links||[],"gamification-summary":A.value},null,8,["user","social-links","gamification-summary"]),d("div",R,[b(L,{"user-id":(g=a.value)==null?void 0:g.id,tabs:[{value:"feed",label:"Feed",icon:c($)},{value:"projects",label:"Projects",icon:c(E)}],"default-tab":"feed",username:r.value,"is-own-profile":n.value},null,8,["user-id","tabs","username","is-own-profile"])])])):(y(),h("div",H,[d("div",K,[b(c(G),{class:_(["h-16 w-16 mx-auto mb-4 opacity-50",[c(o).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"]),d("h2",{class:_(["text-2xl font-bold mb-2",[c(o).isDark?"text-white":"text-gray-900"]])},"User Not Found",2),d("p",{class:_([c(o).isDark?"text-gray-400":"text-gray-600"])},"The user you're looking for doesn't exist.",2)])]))])}}},Te=B(Q,[["__scopeId","data-v-3c4f454b"]]);export{Te as default};
//# sourceMappingURL=UserProfile-BEaQbjhN.js.map
