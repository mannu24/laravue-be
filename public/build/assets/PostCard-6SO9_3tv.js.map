{"version":3,"file":"PostCard-6SO9_3tv.js","sources":["../../../node_modules/lucide-vue-next/dist/esm/icons/chevron-left.js","../../../resources/js/composables/useMentions.js","../../../resources/js/components/feed/PostForm.vue","../../../resources/js/components/feed/PostCard.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeftIcon\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","import { ref, watch } from 'vue';\nimport axios from 'axios';\nimport { useAuthStore } from '../stores/auth';\n\nexport function useMentions() {\n    const mentionSuggestions = ref([]);\n    const mentionQuery = ref('');\n    const isMentioning = ref(false);\n    const authStore = useAuthStore();\n    \n    const searchMentions = async (query) => {\n        if(query.length) {\n            try {\n                const response = await axios.get('/api/v1/posts/mention-suggestions?q='+query, authStore.config);\n                mentionSuggestions.value = response.data;\n            } catch (error) {\n                console.error('Mention search failed:', error);\n            }\n        }\n    };\n\n    watch(mentionQuery, (newVal) => {\n        if (newVal.length > 0) {\n            searchMentions(newVal);\n        } else {\n            mentionSuggestions.value = [];\n        }\n    });\n\n    return {\n        mentionSuggestions,\n        mentionQuery,\n        isMentioning,\n    };\n}","<script setup>\nimport axios from 'axios';\nimport { ref, onMounted, onUnmounted, nextTick, watch, computed } from \"vue\";\nimport { Teleport } from 'vue';\nimport CustomInput from \"../elements/CustomInput.vue\";\nimport { useMentions } from '@/composables/useMentions';\nimport { useAuthStore } from '../../stores/auth';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { useThemeStore } from '../../stores/theme';\n\nconst { mentionSuggestions, mentionQuery } = useMentions();\nconst mentionState = ref({\n    active: false,\n    position: { node: null, offset: 0 },\n    query: '',\n});\nconst newPost = ref({\n    title: '',\n    content: '',\n    mentions: [],\n    media: []\n});\n\nconst emit = defineEmits(['fetch', 'close'])\nconst authStore = useAuthStore();\nconst themeStore = useThemeStore();\nconst deleted = ref([]);\nconst previews = ref([]);\nconst editor = ref(null);\nconst props = defineProps(['post']);\nconst expanded = ref(false);\nconst isSubmitting = ref(false);\nconst errors = ref({});\n\n// Character count for content\nconst contentLength = computed(() => {\n    if (!editor.value) return 0;\n    const text = editor.value.innerText || editor.value.textContent || '';\n    return text.length;\n});\n\nconst maxContentLength = 5000;\n\nconst expandCard = (val) => {\n    expanded.value = val;\n    if (!val) {\n        resetForm();\n    }\n};\n\nconst handleInput = () => {\n    newPost.value.content = editor.value.innerHTML;\n    detectMentionTrigger();\n};\n\nconst handleKeyDown = (e) => {\n    if (e.key === 'Backspace') {\n        const sel = window.getSelection();\n        if (!sel.rangeCount) return;\n\n        const range = sel.getRangeAt(0);\n        const mentionNode = getMentionBeforeCursor(range);\n\n        if (mentionNode) {\n            e.preventDefault();\n            removeMention(mentionNode);\n            return;\n        }\n    }\n    if (mentionState.value.active) {\n        if (['Escape', 'ArrowUp', 'ArrowDown', 'Enter'].includes(e.key)) {\n            e.preventDefault();\n        }\n    }\n};\n\nconst getMentionBeforeCursor = (range) => {\n    if (!range.collapsed) return null;\n\n    let node = range.startContainer;\n    let offset = range.startOffset;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        if (offset === 0) {\n            node = node.previousSibling;\n        } else {\n            return null;\n        }\n    }\n    else if (node.nodeType === Node.ELEMENT_NODE) {\n        if (offset > 0) {\n            node = node.childNodes[offset - 1];\n        } else {\n            node = node.previousSibling;\n        }\n    }\n\n    while (node) {\n        if (node.nodeType === Node.ELEMENT_NODE && node.classList.contains('mention')) {\n            return node;\n        }\n        if (node.nodeType === Node.TEXT_NODE && node.textContent === '\\u00A0') {\n            node = node.previousSibling;\n        } else {\n            break;\n        }\n    }\n\n    return null;\n};\n\nconst removeMention = (mentionNode) => {\n    const userId = parseInt(mentionNode.dataset.userId);\n\n    const parent = mentionNode.parentNode;\n    parent.removeChild(mentionNode);\n    console.log(parent.innerHTML);\n\n    newPost.value.mentions = newPost.value.mentions.filter(m => m.id !== userId);\n    newPost.value.content = parent.innerHTML;\n\n    const event = new Event('input', { bubbles: true });\n    editor.value.dispatchEvent(event);\n};\n\nconst detectMentionTrigger = () => {\n    const selection = window.getSelection();\n    if (!selection.rangeCount) return;\n\n    const range = selection.getRangeAt(0);\n    const textBeforeCursor = getTextBeforeCursor(range);\n    const atIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (atIndex > -1) {\n        const precedingChar = textBeforeCursor[atIndex - 1];\n        const validTrigger = !precedingChar || /\\s/.test(precedingChar);\n\n        if (validTrigger) {\n            mentionState.value = {\n                active: true,\n                position: {\n                    node: range.startContainer,\n                    offset: atIndex\n                },\n                query: textBeforeCursor.slice(atIndex + 1)\n            };\n            mentionQuery.value = mentionState.value.query;\n            return;\n        }\n    }\n    mentionState.value.active = false;\n};\n\nconst getTextBeforeCursor = (range) => {\n    let text = '';\n    let node = range.startContainer;\n    const offset = range.startOffset;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        text = node.textContent.slice(0, offset);\n    }\n    return text;\n};\n\nconst insertMention = (user) => {\n    if (!mentionState.value.active) return;\n\n    const range = new Range();\n    const startNode = mentionState.value.position.node;\n    const startOffset = mentionState.value.position.offset;\n\n    range.setStart(startNode, startOffset);\n    range.setEnd(window.getSelection().getRangeAt(0).endContainer, window.getSelection().getRangeAt(0).endOffset);\n\n    range.deleteContents();\n\n    const mentionEl = document.createElement('span');\n    mentionEl.className = 'mention-link';\n    mentionEl.contentEditable = 'false';\n    mentionEl.dataset.userId = user.id;\n    mentionEl.textContent = `@${user.username}`;\n\n    const space = document.createTextNode('\\u00A0');\n    const wrapper = document.createDocumentFragment();\n    wrapper.appendChild(mentionEl);\n    wrapper.appendChild(space);\n\n    range.insertNode(wrapper);\n\n    const newRange = new Range();\n    newRange.setStartAfter(space);\n    newRange.collapse(true);\n\n    const sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(newRange);\n\n    if (!newPost.value.mentions.some(m => m.id === user.id)) {\n        newPost.value.mentions.push({\n            id: user.id,\n            username: user.username\n        });\n    }\n\n    mentionState.value = { active: false, position: { node: null, offset: 0 }, query: '' };\n    mentionSuggestions.value = [];\n\n    const event = new Event('input', { bubbles: true });\n    editor.value.dispatchEvent(event);\n    editor.value.focus();\n};\n\nconst resetForm = () => {\n    newPost.value = {\n        title: '',\n        content: '',\n        mentions: [],\n        media: []\n    };\n    expanded.value = false;\n    errors.value = {};\n    deleted.value = [];\n\n    // Revoke all object URLs to free memory\n    previews.value.forEach(preview => {\n        if (preview.url && preview.url.startsWith('blob:')) {\n            URL.revokeObjectURL(preview.url);\n        }\n    });\n\n    previews.value = [];\n\n    if (editor.value) {\n        editor.value.innerHTML = '';\n    }\n};\n\nconst handle_media = (event) => {\n    const files = Array.from(event.target.files);\n    files.forEach((file) => {\n        const exists = newPost.value.media.some(\n            (existingFile) => existingFile.name === file.name && existingFile.size === file.size\n        );\n\n        if (!exists) {\n            newPost.value.media.push(file);\n            const url = URL.createObjectURL(file);\n            previews.value.push({\n                type: 'og',\n                url,\n                id: Date.now() + Math.random()\n            });\n        }\n    });\n    event.target.value = \"\";\n};\n\nconst errorFallbackImage = (event) => {\n    event.target.src = '/placeholder.svg';\n};\n\nconst validateForm = () => {\n    errors.value = {};\n    let isValid = true;\n\n    if (!newPost.value.title || newPost.value.title.trim().length === 0) {\n        errors.value.title = 'Title is required';\n        isValid = false;\n    } else if (newPost.value.title.trim().length > 200) {\n        errors.value.title = 'Title must be less than 200 characters';\n        isValid = false;\n    }\n\n    if (!editor.value || !editor.value.innerText || editor.value.innerText.trim().length === 0) {\n        errors.value.content = 'Content is required';\n        isValid = false;\n    } else if (contentLength.value > maxContentLength) {\n        errors.value.content = `Content must be less than ${maxContentLength} characters`;\n        isValid = false;\n    }\n\n    return isValid;\n};\n\nconst submitPost = async () => {\n    if (!validateForm()) {\n        return;\n    }\n\n    try {\n        isSubmitting.value = true;\n        errors.value = {};\n\n        const formData = new FormData();\n        formData.append(\"title\", newPost.value.title.trim());\n        formData.append(\"content\", newPost.value.content);\n\n        newPost.value.mentions.forEach((obj, index) => {\n            formData.append(`mentions[${index}][id]`, obj.id);\n            formData.append(`mentions[${index}][username]`, obj.username);\n        });\n\n        newPost.value.media.forEach((file, index) => {\n            formData.append(`media[${index}]`, file);\n        });\n\n        deleted.value.forEach(url => {\n            formData.append('deleted[]', url);\n        });\n\n        const endpoint = props.post\n            ? `/api/v1/posts/${props.post.post_code}`\n            : '/api/v1/posts';\n\n        if (props.post) {\n            formData.append(\"_method\", \"PUT\");\n        }\n\n        const response = await axios.post(endpoint, formData, {\n            headers: {\n                \"Content-Type\": \"multipart/form-data\",\n                Authorization: `Bearer ${authStore.token}`\n            },\n        });\n\n        if (response.data.status === 'success') {\n            resetForm();\n            closeModal();\n            emit('fetch');\n        } else {\n            errors.value.submit = response.data.message || 'An error occurred. Please try again.';\n        }\n    } catch (error) {\n        console.error(\"Error submitting post:\", error.response?.data || error.message);\n        if (error.response?.data?.errors) {\n            errors.value = { ...errors.value, ...error.response.data.errors };\n        } else {\n            errors.value.submit = error.response?.data?.message || 'An error occurred. Please try again.';\n        }\n    } finally {\n        isSubmitting.value = false;\n    }\n};\n\nconst removeimage = (index, type) => {\n    if (type !== 'url') {\n        // Remove new file from media array\n        const previewToRemove = previews.value[index];\n        // Find the file by matching the preview URL (we need to track which file created which preview)\n        // Since we create the URL when adding the file, we can match by finding the file that would create the same preview\n        // For simplicity, we'll remove by index correlation (assuming order is maintained)\n        if (index < newPost.value.media.length) {\n            newPost.value.media.splice(index, 1);\n        }\n        // Revoke object URL to free memory\n        if (previewToRemove.url && previewToRemove.url.startsWith('blob:')) {\n            URL.revokeObjectURL(previewToRemove.url);\n        }\n        previews.value.splice(index, 1);\n    } else {\n        // Mark existing media URL for deletion\n        const urlToDelete = previews.value[index].url;\n        deleted.value.push(urlToDelete);\n        previews.value.splice(index, 1);\n    }\n};\n\nconst closeModal = () => {\n    if (isSubmitting.value) return; // Prevent closing while submitting\n    expanded.value = false;\n    resetForm();\n    emit('close');\n};\n\n// Handle ESC key to close modal\nconst handleEscKey = (e) => {\n    if (e.key === 'Escape' && props.post && expanded.value) {\n        closeModal();\n    }\n};\n\n// Handle click outside modal\nconst handleBackdropClick = (e) => {\n    if (e.target === e.currentTarget && props.post) {\n        closeModal();\n    }\n};\n\n// Prevent body scroll when modal is open\nwatch(() => props.post && expanded.value, (isOpen) => {\n    if (isOpen) {\n        document.body.style.overflow = 'hidden';\n        document.addEventListener('keydown', handleEscKey);\n    } else {\n        document.body.style.overflow = '';\n        document.removeEventListener('keydown', handleEscKey);\n    }\n}, { immediate: true });\n\nonMounted(() => {\n    if (props.post) {\n        expandCard(true);\n        newPost.value.post_code = props.post.post_code;\n        newPost.value.content = props.post.content;\n        newPost.value.title = props.post.title;\n        previews.value = props.post.media_urls.map((url, index) => ({\n            type: 'url',\n            url: url,\n            id: index\n        }));\n        nextTick(() => {\n            if (editor.value) {\n                editor.value.innerHTML = props.post.content;\n            }\n        });\n    }\n});\n\nonUnmounted(() => {\n    // Cleanup: revoke all object URLs\n    previews.value.forEach(preview => {\n        if (preview.url && preview.url.startsWith('blob:')) {\n            URL.revokeObjectURL(preview.url);\n        }\n    });\n    document.body.style.overflow = '';\n    document.removeEventListener('keydown', handleEscKey);\n});\n</script>\n<template>\n    <Teleport to=\"body\" v-if=\"props.post\">\n        <Transition name=\"modal\" appear>\n            <div v-if=\"props.post && expanded\"\n                class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\"\n                @click=\"handleBackdropClick\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"edit-post-title\">\n                <div class=\"bg-white dark:bg-gray-800 rounded-2xl shadow-xl dark:shadow-gray-900/50 max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-800\"\n                    @click.stop>\n                    <div class=\"p-6\">\n                        <!-- Header -->\n                        <div class=\"flex items-center gap-3 mb-4\">\n                            <div class=\"flex-shrink-0\">\n                                <img v-if=\"authStore.user?.profile_photo\" :src=\"authStore.user?.profile_photo\"\n                                    alt=\"User Avatar\"\n                                    class=\"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\" />\n                                <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\"\n                                    class=\"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\" />\n                            </div>\n                            <div class=\"flex-1 flex items-center justify-between\">\n                                <div>\n                                    <h3 id=\"edit-post-title\"\n                                        class=\"font-semibold text-gray-900 dark:text-white text-base\">{{\n                                            authStore.user?.name || authStore.user?.username }}</h3>\n                                    <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">Edit Post</p>\n                                </div>\n                                <button @click.stop=\"closeModal\" :disabled=\"isSubmitting\"\n                                    class=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed\">\n                                    <i class=\"fas fa-times text-sm\"></i>\n                                </button>\n                            </div>\n                        </div>\n                        <!-- Form Content -->\n                        <form class=\"space-y-4\" @submit.prevent=\"submitPost\">\n                            <CustomInput type=\"text\" placeholder=\"Title of this post\" v-model=\"newPost.title\"\n                                :error=\"errors.title\"\n                                class=\"!bg-white dark:!bg-gray-700/50 !border-gray-300 dark:!border-gray-600 !text-gray-900 dark:!text-gray-100 placeholder:!text-gray-400 dark:placeholder:!text-gray-400 focus:!border-green-500 dark:focus:!border-green-500 hover:!border-gray-400 dark:hover:!border-gray-500\" />\n\n                            <div class=\"relative\">\n                                <div ref=\"editor\" contenteditable=\"true\" @input=\"handleInput\" @keydown=\"handleKeyDown\"\n                                    data-placeholder=\"Share your thoughts...\"\n                                    class=\"w-full min-h-[120px] text-sm border rounded-xl px-4 py-3 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500/50 bg-white dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:border-green-500 dark:focus:border-green-500\"\n                                    :class=\"{ 'border-red-500 dark:border-red-500': errors.content }\"></div>\n\n                                <!-- Character Count -->\n                                <div class=\"flex items-center justify-between mt-1\">\n                                    <span v-if=\"errors.content\" class=\"text-xs text-red-600 dark:text-red-400 ml-1\">{{\n                                        errors.content }}</span>\n                                    <span v-else class=\"text-xs text-gray-500 dark:text-gray-400 ml-1\"></span>\n                                    <span :class=\"[\n                                        'text-xs ml-auto',\n                                        contentLength > maxContentLength\n                                            ? 'text-red-600 dark:text-red-400'\n                                            : 'text-gray-500 dark:text-gray-400'\n                                    ]\">\n                                        {{ contentLength }} / {{ maxContentLength }}\n                                    </span>\n                                </div>\n\n                                <!-- Mention Suggestions -->\n                                <Transition name=\"fade\">\n                                    <div v-if=\"mentionSuggestions.length\"\n                                        class=\"absolute bottom-full left-0 mb-2 w-full max-h-60 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl dark:shadow-gray-900/50 overflow-y-auto z-50\">\n                                        <div v-for=\"user, i in mentionSuggestions\" :key=\"i\"\n                                            @mousedown.prevent=\"insertMention(user)\"\n                                            class=\"p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700/50 last:border-0\">\n                                            <img v-if=\"user.avatar\" :src=\"user.avatar\"\n                                                class=\"w-10 h-10 rounded-full object-cover ring-1 ring-gray-200 dark:ring-gray-700\">\n                                            <i v-else\n                                                class=\"fas fa-user-circle text-2xl text-gray-400 dark:text-gray-500\"></i>\n                                            <div class=\"flex-1 min-w-0\">\n                                                <p class=\"font-medium text-sm text-gray-900 dark:text-white truncate\">{{\n                                                    user.name }}</p>\n                                                <p class=\"text-xs text-gray-500 dark:text-gray-400 truncate\">@{{\n                                                    user.username }}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </Transition>\n                            </div>\n\n                            <!-- Error Message -->\n                            <div v-if=\"errors.submit\"\n                                class=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n                                <p class=\"text-sm text-red-600 dark:text-red-400\">{{ errors.submit }}</p>\n                            </div>\n\n                            <!-- Media Previews -->\n                            <div v-if=\"previews.length\" class=\"flex flex-wrap gap-3 pb-2\">\n                                <TransitionGroup name=\"bounce\" appear>\n                                    <div v-for=\"(file, index) in previews\" :key=\"file.id || index\"\n                                        class=\"relative h-32 w-32 flex-shrink-0 group\">\n                                        <button @click=\"removeimage(index, file.type)\" :disabled=\"isSubmitting\"\n                                            class=\"absolute -top-2 -right-2 w-6 h-6 flex items-center justify-center bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white rounded-full transition-all duration-200 hover:scale-110 z-10 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\">\n                                            <i class=\"fas fa-times text-xs\"></i>\n                                        </button>\n                                        <img :src=\"file.url\"\n                                            class=\"h-full w-full rounded-xl object-cover border-2 border-gray-200 dark:border-gray-700 ring-1 ring-gray-100 dark:ring-gray-800\"\n                                            alt=\"Image Preview\" @error=\"errorFallbackImage\" />\n                                        <div v-if=\"file.type === 'url'\"\n                                            class=\"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs px-2 py-1 rounded-b-xl\">\n                                            Existing\n                                        </div>\n                                    </div>\n                                </TransitionGroup>\n                            </div>\n\n                            <!-- Actions -->\n                            <div\n                                class=\"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700\">\n                                <input type=\"file\" @change=\"handle_media\" accept=\"image/*\" class=\"hidden\"\n                                    id=\"media_upload_edit\" multiple :disabled=\"isSubmitting\">\n                                <label for=\"media_upload_edit\" :class=\"[\n                                    'flex items-center gap-2 px-4 py-2 rounded-lg text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer transition-colors font-medium text-sm',\n                                    isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n                                ]\">\n                                    <i class=\"fas fa-paperclip\"></i>\n                                    <span>Attach Media</span>\n                                </label>\n                                <Button type=\"submit\"\n                                    class=\"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 dark:from-green-500 dark:to-green-600 dark:hover:from-green-600 dark:hover:to-green-700 text-white transition-all duration-300 shadow-md hover:shadow-lg px-6\"\n                                    :disabled=\"isSubmitting || contentLength > maxContentLength\">\n                                    <span v-if=\"!isSubmitting\">Update Post</span>\n                                    <span v-else class=\"flex items-center gap-2\">\n                                        <i class=\"fas fa-spinner fa-spin\"></i>\n                                        Updating...\n                                    </span>\n                                </Button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </Transition>\n    </Teleport>\n\n    <div v-else class=\"max-w-2xl mx-auto sm:px-6\">\n        <Card class=\"overflow-hidden transition-all duration-300\" :class=\"[\n            expanded\n                ? 'shadow-lg border-gray-200 dark:border-gray-800'\n                : 'shadow-sm hover:shadow-md border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700'\n        ]\">\n            <div class=\"relative overflow-hidden\" :class=\"[\n                expanded\n                    ? 'bg-gradient-to-r from-green-50 via-green-50/25 to-white dark:from-vue/15 dark:via-none dark:to-black'\n                    : ''\n            ]\">\n                <CardContent class=\"p-0\">\n                    <!-- Header -->\n                    <div class=\"px-6 py-4\" :class=\"[\n                        expanded\n                            ? 'border-b border-gray-200 dark:border-gray-700'\n                            : ''\n                    ]\">\n                        <div class=\"flex items-center gap-3\">\n                            <div class=\"flex-shrink-0\">\n                                <img v-if=\"authStore.user?.profile_photo\" :src=\"authStore.user?.profile_photo\"\n                                    alt=\"User Avatar\"\n                                    class=\"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\" />\n                                <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\"\n                                    class=\"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\" />\n                            </div>\n                            <Transition name=\"fade\" mode=\"out-in\">\n                                <div v-if=\"!expanded\"\n                                    class=\"flex-1 rounded-lg h-12 px-4 bg-gray-100 dark:bg-gray-800/50 flex items-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors border border-transparent hover:border-gray-300 dark:hover:border-gray-900\"\n                                    @click=\"expandCard(true)\">\n                                    <p class=\"text-gray-500 dark:text-gray-300 text-sm\">What's on your mind, {{\n                                        authStore.user?.name || authStore.user?.username }}?</p>\n                                </div>\n                                <div v-else class=\"flex-1 flex items-center justify-between\">\n                                    <div>\n                                        <h3 class=\"font-semibold text-gray-900 dark:text-white text-base\">{{\n                                            authStore.user?.name || authStore.user?.username }}</h3>\n                                        <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">{{ $filters.date(new\n                                            Date()) }}</p>\n                                    </div>\n                                </div>\n                            </Transition>\n                        </div>\n                    </div>\n\n                    <!-- Form Content -->\n                    <form v-if=\"expanded\" class=\"px-6 py-4 space-y-4\" @submit.prevent=\"submitPost\">\n                        <CustomInput type=\"text\" placeholder=\"Title of this post\" v-model=\"newPost.title\"\n                            :error=\"errors.title\"\n                            class=\"!bg-white dark:!bg-gray-700/50 !border-gray-300 dark:!border-gray-600 !text-gray-900 dark:!text-gray-100 placeholder:!text-gray-400 dark:placeholder:!text-gray-400 focus:!border-green-500 dark:focus:!border-green-500 hover:!border-gray-400 dark:hover:!border-gray-500 rounded-md\" />\n\n                        <div class=\"relative\">\n                            <div ref=\"editor\" contenteditable=\"true\" @input=\"handleInput\" @keydown=\"handleKeyDown\"\n                                data-placeholder=\"Share your thoughts...\"\n                                class=\"w-full min-h-[120px] text-sm border rounded-md px-4 py-3 transition-all duration-200 focus:outline-none  bg-white dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:border-green-500 dark:focus:border-green-500\"\n                                :class=\"{ 'border-red-500 dark:border-red-500': errors.content }\"></div>\n\n                            <!-- Character Count -->\n                            <div class=\"flex items-center justify-between mt-1\">\n                                <span v-if=\"errors.content\" class=\"text-xs text-red-600 dark:text-red-400 ml-1\">{{\n                                    errors.content }}</span>\n                                <span v-else class=\"text-xs text-gray-500 dark:text-gray-400 ml-1\"></span>\n                                <span :class=\"[\n                                    'text-xs ml-auto',\n                                    contentLength > maxContentLength\n                                        ? 'text-red-600 dark:text-red-400'\n                                        : 'text-gray-500 dark:text-gray-400'\n                                ]\">\n                                    {{ contentLength }} / {{ maxContentLength }}\n                                </span>\n                            </div>\n\n                            <!-- Mention Suggestions -->\n                            <Transition name=\"fade\">\n                                <div v-if=\"mentionSuggestions.length\"\n                                    class=\"absolute bottom-full left-0 mb-2 w-full max-h-60 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl dark:shadow-gray-900/50 overflow-y-auto z-50\">\n                                    <div v-for=\"user, i in mentionSuggestions\" :key=\"i\"\n                                        @mousedown.prevent=\"insertMention(user)\"\n                                        class=\"p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700/50 last:border-0\">\n                                        <img v-if=\"user.avatar\" :src=\"user.avatar\"\n                                            class=\"w-10 h-10 rounded-full object-cover ring-1 ring-gray-200 dark:ring-gray-700\">\n                                        <i v-else\n                                            class=\"fas fa-user-circle text-2xl text-gray-400 dark:text-gray-500\"></i>\n                                        <div class=\"flex-1 min-w-0\">\n                                            <p class=\"font-medium text-sm text-gray-900 dark:text-white truncate\">{{\n                                                user.name }}</p>\n                                            <p class=\"text-xs text-gray-500 dark:text-gray-400 truncate\">@{{\n                                                user.username }}</p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </Transition>\n                        </div>\n\n                        <!-- Error Message -->\n                        <div v-if=\"errors.submit\"\n                            class=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\n                            <p class=\"text-sm text-red-600 dark:text-red-400\">{{ errors.submit }}</p>\n                        </div>\n\n                        <!-- Media Previews -->\n                        <div v-if=\"previews.length\" class=\"flex flex-wrap gap-3 pb-2\">\n                            <TransitionGroup name=\"bounce\" appear>\n                                <div v-for=\"(file, index) in previews\" :key=\"file.id || index\"\n                                    class=\"relative h-32 w-32 flex-shrink-0 group\">\n                                    <button @click=\"removeimage(index, file.type)\" :disabled=\"isSubmitting\"\n                                        class=\"absolute -top-2 -right-2 w-6 h-6 flex items-center justify-center bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white rounded-full transition-all duration-200 hover:scale-110 z-10 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\">\n                                        <i class=\"fas fa-times text-xs\"></i>\n                                    </button>\n                                    <img :src=\"file.url\"\n                                        class=\"h-full w-full rounded-xl object-cover border-2 border-gray-200 dark:border-gray-700 ring-1 ring-gray-100 dark:ring-gray-800\"\n                                        alt=\"Image Preview\" @error=\"errorFallbackImage\" />\n                                    <div v-if=\"file.type === 'url'\"\n                                        class=\"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs px-2 py-1 rounded-b-xl\">\n                                        Existing\n                                    </div>\n                                </div>\n                            </TransitionGroup>\n                        </div>\n\n                        <!-- Actions -->\n                        <div\n                            class=\"flex items-center justify-between gap-3 pt-2 border-t border-gray-200 dark:border-gray-700\">\n                            <input type=\"file\" @change=\"handle_media\" accept=\"image/*\" class=\"hidden\" id=\"media_upload\"\n                                multiple :disabled=\"isSubmitting\">\n                            <label for=\"media_upload\" :class=\"[\n                                'flex items-center gap-2 px-4 py-2 rounded-lg text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer transition-colors font-medium text-sm',\n                                isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n                            ]\">\n                                <i class=\"fas fa-paperclip\"></i>\n                                <span>Attach Media</span>\n                            </label>\n                            <Button variant=\"outline\" size=\"lg\" :class=\"[isSubmitting ? 'opacity-50 cursor-not-allowed' : '', 'ms-auto']\" @click.stop=\"closeModal\">\n                                Cancel\n                            </Button>\n                            <Button type=\"submit\"\n                                class=\"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 dark:from-green-500 dark:to-green-600 dark:hover:from-green-600 dark:hover:to-green-700 text-white transition-all duration-300 shadow-md hover:shadow-lg px-6\"\n                                :disabled=\"isSubmitting || contentLength > maxContentLength\">\n                                <span v-if=\"!isSubmitting\">Submit Post</span>\n                                <span v-else class=\"flex items-center gap-2\">\n                                    <i class=\"fas fa-spinner fa-spin\"></i>\n                                    Posting...\n                                </span>\n                            </Button>\n                        </div>\n                    </form>\n                </CardContent>\n            </div>\n        </Card>\n    </div>\n</template>\n<style scoped>\n.mention-link {\n    --tw-text-opacity: 1;\n    color: rgb(42 97 70 / var(--tw-text-opacity, 1));\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    --tw-bg-opacity: 1;\n    background-color: rgb(209 235 223 / var(--tw-bg-opacity, 1));\n    border-radius: 0.25rem;\n}\n\n.dark .mention-link {\n    color: rgb(134 239 172 / var(--tw-text-opacity, 1));\n    background-color: rgb(20 83 45 / var(--tw-bg-opacity, 1));\n}\n\n[contenteditable][data-placeholder]:empty:before {\n    content: attr(data-placeholder);\n    color: rgb(156 163 175);\n    pointer-events: none;\n}\n\n.dark [contenteditable][data-placeholder]:empty:before {\n    color: rgb(107 114 128);\n}\n\n.scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n}\n\n.scrollbar-hide::-webkit-scrollbar {\n    display: none;\n}\n\n/* Modal transitions */\n.modal-enter-active,\n.modal-leave-active {\n    transition: opacity 0.3s ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n    opacity: 0;\n}\n\n.modal-enter-active .bg-white,\n.modal-leave-active .bg-white {\n    transition: transform 0.3s ease, opacity 0.3s ease;\n}\n\n.modal-enter-from .bg-white,\n.modal-leave-to .bg-white {\n    transform: scale(0.95);\n    opacity: 0;\n}\n\n/* Fade transition */\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.2s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n    opacity: 0;\n}\n\n/* Bounce transition for media */\n.bounce-enter-active {\n    transition: all 0.3s ease;\n}\n\n.bounce-leave-active {\n    transition: all 0.3s ease;\n}\n\n.bounce-enter-from {\n    opacity: 0;\n    transform: scale(0.8);\n}\n\n.bounce-leave-to {\n    opacity: 0;\n    transform: scale(0.8);\n}\n</style>","<script setup>\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { LucideChevronLeft, LucideChevronRight, LucideEllipsisVertical } from 'lucide-vue-next';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport PostForm from './PostForm.vue';\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '../../stores/auth';\nimport { useBookmark } from '../../composables/useBookmark';\nimport { Bookmark } from 'lucide-vue-next';\nimport axios from 'axios';\n\nconst { post } = defineProps(['post'])\nconst element = ref(null)\nconst showDropdown = ref(false)\nconst isModalVisible = ref(false)\nconst emit = defineEmits(['load_more', 'fetch', 'delete_post', 'liked_action', 'share_url', 'bookmarked_action'])\nconst $router = useRouter();\nconst authStore = useAuthStore()\nconst post_url = computed(() => '/feed/' + post.post_code)\n\n// Bookmark functionality\nconst { isBookmarked, bookmarkCount, isLoading: isBookmarkLoading, toggleBookmark, initialize } = useBookmark(post, 'post')\n\n// Initialize bookmark state from post data\nwatch(() => post, (newPost) => {\n    if (newPost) {\n        initialize(newPost)\n    }\n}, { immediate: true })\n\n// Gallery popup state:\nconst isGalleryVisible = ref(false)\nconst selectedImageIndex = ref(0)\n\nconst handleOpenGallery = (index) => {\n    selectedImageIndex.value = index;\n    isGalleryVisible.value = true;\n};\n\nconst closeGallery = () => {\n    isGalleryVisible.value = false;\n};\n\nconst nextImage = () => {\n    if (selectedImageIndex.value < post.media_urls.length - 1) {\n        selectedImageIndex.value++;\n    }\n};\n\nconst prevImage = () => {\n    if (selectedImageIndex.value > 0) {\n        selectedImageIndex.value--;\n    }\n};\n\nconst errorFallbackImage = (event) => {\n    event.target.src = '/placeholder.svg'\n}\n\nconst errorFallbackUserImage = (event) => {\n    event.target.src = '/assets/front/images/user.png'\n}\n\nconst edit_post = () => {\n    isModalVisible.value = true\n    showDropdown.value = false\n}\n\nconst action = async (type) => {\n    if (type === 'delete') {\n        showDropdown.value = false\n        await axios.delete(`/api/v1/posts/${post.post_code}`, authStore.config).then(() => {\n            emit('delete_post', post.post_code)\n        })\n    } else {\n        showDropdown.value = false\n        await axios.get(`/api/v1/posts/duplicate/${post.post_code}`, authStore.config).then(() => {\n            emit('fetch')\n        })\n    }\n}\n\nconst renderContent = (content) => {\n    return content.replace(/@(\\w+)/g, '<a href=\"/@$1\">@$1</a>');\n};\n\nconst checkItem = () => {\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n                emit('load_more')\n            }\n        });\n    });\n    observer.observe(element.value);\n}\n\nconst handleLike = async () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n    }\n    else {\n        const response = await axios.get(`/api/v1/posts/like-unlike/${post.post_code}`, authStore.config)\n        if (response.data.status == 'success') {\n            emit('liked_action', [post.post_code, response.data.liked])\n        }\n        else {\n            alert('Something went wrong')\n        }\n    }\n};\n\nconst handleComment = () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n    }\n    else {\n        $router.push(post_url.value)\n    }\n};\n\nconst handleShare = () => {\n    emit('share_url', post_url.value)\n};\n\nconst handleBookmark = async () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n        return\n    }\n    \n    // Posts use 'post_code' as the unique identifier for bookmarks\n    const recordId = post.post_code\n    if (!recordId) {\n        console.error('Post code not found')\n        return\n    }\n    \n    const result = await toggleBookmark('post', recordId)\n    if (result !== undefined) {\n        emit('bookmarked_action', [recordId, result, bookmarkCount.value])\n    }\n};\n\nconst fetch = () => {\n    emit('fetch')\n}\n\nconst closeModal = () => {\n    isModalVisible.value = false\n};\n\nonMounted(() => {\n    if (element.value.classList.contains('last_item')) {\n        checkItem();\n    }\n});\n\n</script>\n<template>\n    <div ref=\"element\">\n        <article\n            @click=\"$router.push(post_url)\"\n            class=\"group bg-white/95 dark:bg-card border border-gray-200 dark:border-gray-800 rounded-xl p-5 shadow-[0_20px_70px_rgba(15,23,42,0.08)] dark:shadow-none hover:shadow-[0_25px_80px_rgba(15,23,42,0.12)] dark:hover:shadow-xl transition-all duration-300 hover:cursor-pointer hover:border-gray-300 dark:hover:border-gray-700\"\n        >\n            <div class=\"flex flex-col gap-4\">\n                <!-- Title and Content Section -->\n                <div class=\"flex items-start justify-between gap-3\">\n                    <div class=\"flex-1 min-w-0\">\n                        <h3 v-if=\"post.title\" \n                            class=\"text-lg cursor-pointer group-hover:text-green-600 dark:group-hover:text-green-400 lg:text-xl font-semibold text-gray-900 dark:text-white leading-tight mb-2 line-clamp-2\">\n                            {{ post.title }}\n                        </h3>\n                        <div class=\"prose prose-sm dark:prose-invert max-w-none\">\n                            <p class=\"text-sm text-gray-600 dark:text-gray-300 line-clamp-3 leading-relaxed whitespace-pre-wrap break-words\" \n                                v-html=\"renderContent(post.content)\" \n                                @click.stop></p>\n                        </div>\n                    </div>\n\n                    <div\n                        v-if=\"authStore.isAuthenticated && post.owner\"\n                        class=\"relative flex-shrink-0\"\n                        @click.stop\n                    >\n                        <button\n                            @click=\"showDropdown = !showDropdown\"\n                            class=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/60 text-gray-500 dark:text-gray-400\"\n                        >\n                            <LucideEllipsisVertical class=\"w-5 h-5\" />\n                        </button>\n                        <transition name=\"fade\">\n                            <div\n                                v-if=\"showDropdown\"\n                                @click.stop\n                        class=\"absolute right-2 top-full mt-2 z-20 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden\"\n                                role=\"menu\"\n                                aria-orientation=\"vertical\"\n                            >\n                                <button\n                                    @click.stop=\"edit_post()\"\n                                    class=\"w-full text-left px-4 py-2.5 text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700/60 text-gray-700 dark:text-gray-300\"\n                                >\n                                    <i class=\"fas fa-pencil-alt text-xs\"></i>\n                                    Edit Post\n                                </button>\n                                <AlertDialog>\n                                    <AlertDialogTrigger as-child>\n                                        <button\n                                            @click.stop\n                                            class=\"w-full text-left px-4 py-2.5 text-sm flex items-center gap-2 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400\"\n                                        >\n                                            <i class=\"fas fa-trash text-xs\"></i>\n                                            Delete\n                                        </button>\n                                    </AlertDialogTrigger>\n                                    <AlertDialogContent>\n                                        <AlertDialogHeader>\n                                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                            <AlertDialogDescription>\n                                                This action cannot be undone. This will permanently delete your post.\n                                            </AlertDialogDescription>\n                                        </AlertDialogHeader>\n                                        <AlertDialogFooter>\n                                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                            <AlertDialogAction @click.stop=\"action('delete')\">Continue</AlertDialogAction>\n                                        </AlertDialogFooter>\n                                    </AlertDialogContent>\n                                </AlertDialog>\n                            </div>\n                        </transition>\n                    </div>\n                </div>\n\n                <!-- Media Gallery -->\n                <div v-if=\"post.media_urls && post.media_urls.length\" \n                    class=\"rounded-lg overflow-hidden border border-gray-100 dark:border-gray-700\">\n                        <div v-if=\"post.media_urls.length === 1\" \n                            class=\"relative group/media\">\n                            <img :src=\"post.media_urls[0]\" alt=\"Post Media\"\n                                class=\"w-full h-auto max-h-[500px] object-cover cursor-pointer transition-transform duration-300 group-hover:scale-[1.02]\" \n                                @click.stop=\"handleOpenGallery(0)\"\n                                @error=\"errorFallbackImage\" />\n                        </div>\n                        <div v-else-if=\"post.media_urls.length === 2\" \n                            class=\"grid grid-cols-2 gap-1\">\n                            <template v-for=\"(media, index) in post.media_urls\" :key=\"media\">\n                                <img v-if=\"index < 2\" :src=\"media\" alt=\"Post Media\" \n                                    class=\"w-full h-64 object-cover cursor-pointer transition-transform duration-300 hover:scale-105\" \n                                    @click.stop=\"handleOpenGallery(index)\"\n                                    @error=\"errorFallbackImage\" />\n                            </template>\n                        </div>\n                        <div v-else-if=\"post.media_urls.length === 3\" \n                            class=\"grid grid-cols-2 gap-1\">\n                            <template v-for=\"(media, index) in post.media_urls.slice(0, 2)\" :key=\"index\">\n                                <img :src=\"media\" alt=\"Post Media\" \n                                    class=\"w-full h-48 object-cover cursor-pointer transition-transform duration-300 hover:scale-105\" \n                                    @click.stop=\"handleOpenGallery(index)\"\n                                    @error=\"errorFallbackImage\" />\n                            </template>\n                            <img :src=\"post.media_urls[2]\" alt=\"Post Media\" \n                                class=\"col-span-2 w-full h-64 object-cover cursor-pointer transition-transform duration-300 hover:scale-105\" \n                                @click.stop=\"handleOpenGallery(2)\"\n                                @error=\"errorFallbackImage\" />\n                        </div>\n                        <div v-else \n                            class=\"grid grid-cols-2 gap-1 relative\">\n                            <template v-for=\"(media, index) in post.media_urls.slice(0, 4)\" :key=\"index\">\n                                <div class=\"relative overflow-hidden\">\n                                    <img :src=\"media\" alt=\"Post Media\" \n                                        class=\"w-full h-48 object-cover cursor-pointer transition-transform duration-300 hover:scale-110\" \n                                        @click.stop=\"handleOpenGallery(index)\"\n                                        @error=\"errorFallbackImage\" />\n                                    <div v-if=\"index === 3 && post.media_urls.length > 4\"\n                                        class=\"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-lg font-bold cursor-pointer backdrop-blur-sm\"\n                                        @click.stop=\"handleOpenGallery(3)\">\n                                        +{{ post.media_urls.length - 4 }} more\n                                    </div>\n                                </div>\n                            </template>\n                        </div>\n                    </div>\n\n                <!-- User Info Section -->\n                <div class=\"flex flex-wrap items-center justify-between gap-3 text-sm\">\n                    <div class=\"flex items-center gap-3 text-gray-500 dark:text-gray-400\">\n                        <div class=\"flex items-center gap-2\">\n                            <router-link :to=\"post.user.username != authStore.user?.username ? '/@' + post.user.username : '/dashboard'\" @click.stop class=\"flex-shrink-0\">\n                                <img v-if=\"post.user?.profile_photo\" :src=\"post.user?.profile_photo\" alt=\"User Avatar\"\n                                    class=\"w-8 h-8 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\"\n                                    @error=\"errorFallbackUserImage\" />\n                                <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\"\n                                    class=\"w-8 h-8 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\"\n                                    @error=\"errorFallbackUserImage\" />\n                            </router-link>\n                            <router-link @click.stop :to=\"post.user.username != authStore.user?.username ? '/@' + post.user.username : '/dashboard'\">\n                                <div>\n                                    <p class=\"font-medium text-gray-900 dark:text-gray-100\">\n                                        {{ post.user.name }}\n                                    </p>\n                                    <p class=\"text-xs text-gray-500 dark:text-gray-400\">{{ post.posted_at }}</p>\n                                </div>\n                            </router-link>\n                        </div>\n                    </div>\n                    <div class=\"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400\">\n                        <span>{{ post.views_count || 0 }} views &bull; {{ post.likes_count || 0 }} likes</span>\n                    </div>\n                </div>\n\n                <!-- Actions Footer -->\n                <div class=\"flex flex-wrap items-center justify-between gap-3 pt-3 border-t border-gray-100 dark:border-gray-700\">\n                    <div class=\"flex items-center\">\n                        <button\n                            class=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-colors\"\n                            :class=\"post.liked ? 'bg-red-600/10 text-red-600 dark:bg-red-600/20' : 'bg-gray-50 text-gray-600 dark:bg-card dark:text-gray-300'\"\n                            @click.stop=\"handleLike\"\n                        >\n                            <i :class=\"post.liked ? 'fas fa-heart' : 'far fa-heart'\" class=\"text-base\"></i>\n                            <span>{{ post.likes_count || 0 }}</span>\n                        </button>\n                        <button\n                            class=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm bg-gray-50 text-gray-600 dark:bg-card dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-all duration-300\"\n                            @click.stop=\"handleComment\"\n                        >\n                            <i class=\"far fa-comment text-base\"></i>\n                            <span>{{ post.comments_count || 0 }}</span>\n                        </button>\n                        <button\n                            class=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm bg-gray-50 dark:bg-card hover:text-vue transition-all duration-300 text-gray-600 dark:text-gray-300\"\n                            @click.stop=\"handleShare\"\n                        >\n                            <i class=\"far fa-paper-plane text-base\"></i>\n                            <span>Share</span>\n                        </button>\n                    </div>\n                    <button\n                        :disabled=\"isBookmarkLoading || !authStore.isAuthenticated\"\n                        class=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-colors\"\n                        :class=\"isBookmarked ? 'bg-yellow-50 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300' : 'bg-gray-50 text-gray-600 dark:bg-card dark:text-gray-300'\"\n                        @click.stop=\"handleBookmark\"\n                    >\n                        <Bookmark :class=\"['w-4 h-4', isBookmarked ? 'fill-current' : '']\" />\n                        <span>{{ bookmarkCount || post.bookmark_count || 0 }}</span>\n                    </button>\n                </div>\n            </div>\n        </article>\n\n        <PostForm v-if=\"isModalVisible\" @close=\"closeModal\" @fetch=\"fetch\" :post=\"post\" />\n        \n        <Dialog v-model:open=\"isGalleryVisible\">\n            <DialogContent class=\"max-w-5xl p-0 border-0 bg-transparent shadow-2xl\">\n                <div class=\"relative bg-black/90 rounded-xl overflow-hidden\">\n                    <img :src=\"post.media_urls[selectedImageIndex]\" alt=\"Gallery image\" \n                        class=\"w-full h-auto max-h-[80vh] object-contain\" />\n                    <button v-if=\"selectedImageIndex > 0\" \n                        @click=\"prevImage\" \n                        class=\"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-200 hover:scale-110\">\n                        <LucideChevronLeft class=\"w-6 h-6\" />\n                    </button>\n                    <button v-if=\"selectedImageIndex < post.media_urls.length - 1\" \n                        @click=\"nextImage\" \n                        class=\"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-200 hover:scale-110\">\n                        <LucideChevronRight class=\"w-6 h-6\" />\n                    </button>\n                    <div class=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm\">\n                        {{ selectedImageIndex + 1 }} / {{ post.media_urls.length }}\n                    </div>\n                </div>\n            </DialogContent>\n        </Dialog>\n    </div>\n</template>\n<style scoped>\n.mention-link {\n    --tw-text-opacity: 1;\n    color: rgb(42 97 70 / var(--tw-text-opacity, 1));\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    --tw-bg-opacity: 1;\n    background-color: rgb(209 235 223 / var(--tw-bg-opacity, 1));\n    border-radius: 0.25rem;\n    transition: all 0.2s ease;\n}\n\n.mention-link:hover {\n    text-decoration: underline;\n    background-color: rgb(187 227 210 / var(--tw-bg-opacity, 1));\n}\n\n.dark .mention-link {\n    color: rgb(134 239 172 / var(--tw-text-opacity, 1));\n    background-color: rgb(20 83 45 / var(--tw-bg-opacity, 1));\n}\n\n.dark .mention-link:hover {\n    background-color: rgb(22 101 52 / var(--tw-bg-opacity, 1));\n}\n\n.line-clamp-2 {\n    display: -webkit-box;\n    line-clamp: 2;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n</style>\n"],"names":["ChevronLeft","createLucideIcon","useMentions","mentionSuggestions","ref","mentionQuery","isMentioning","authStore","useAuthStore","searchMentions","query","response","axios","error","watch","newVal","maxContentLength","mentionState","newPost","emit","__emit","useThemeStore","deleted","previews","editor","props","__props","expanded","isSubmitting","errors","contentLength","computed","expandCard","val","handleInput","detectMentionTrigger","handleKeyDown","e","sel","range","mentionNode","getMentionBeforeCursor","removeMention","node","offset","userId","parent","m","event","selection","textBeforeCursor","getTextBeforeCursor","atIndex","precedingChar","text","insertMention","user","startNode","startOffset","mentionEl","space","wrapper","newRange","resetForm","preview","handle_media","file","existingFile","url","errorFallbackImage","validateForm","isValid","submitPost","formData","obj","index","endpoint","closeModal","_a","_c","_b","_e","_d","removeimage","type","previewToRemove","urlToDelete","handleEscKey","handleBackdropClick","isOpen","onMounted","nextTick","onUnmounted","_createBlock","_Teleport","_createVNode","_Transition","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_unref","_openBlock","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_cache","CustomInput","$event","_hoisted_9","_normalizeClass","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_Fragment","_renderList","i","_withModifiers","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_TransitionGroup","_hoisted_25","_hoisted_26","Button","_hoisted_29","_hoisted_30","Card","CardContent","_hoisted_31","_hoisted_32","_hoisted_34","_hoisted_36","_hoisted_37","_hoisted_38","$filters","_hoisted_35","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_55","_hoisted_56","_hoisted_59","element","showDropdown","isModalVisible","$router","useRouter","post_url","isBookmarked","bookmarkCount","isBookmarkLoading","toggleBookmark","initialize","useBookmark","isGalleryVisible","selectedImageIndex","handleOpenGallery","nextImage","prevImage","errorFallbackUserImage","edit_post","action","renderContent","content","checkItem","entries","entry","handleLike","handleComment","handleShare","handleBookmark","recordId","result","fetch","_hoisted_4","LucideEllipsisVertical","AlertDialog","AlertDialogTrigger","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","_hoisted_8","media","_hoisted_15","_component_router_link","_hoisted_23","_hoisted_24","Bookmark","PostForm","Dialog","DialogContent","_hoisted_27","LucideChevronLeft","LucideChevronRight"],"mappings":"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","x_google_ignoreList":[0]}