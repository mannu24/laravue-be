import{c as re,f as oe,o as l,w as k,r as ie,n as de,h as ue,u,ax as ce,p as y,j as G,l as se,I as F,_ as ae,q as ne,K as ge,b as i,D as r,x as E,d as g,A as C,G as p,T as te,a7 as fe,F as z,E as V,ar as me,H as R,C as ve,z as D,k as le,a as pe,L as he}from"./app-BusCMfsw.js";import{_ as ke,a as ye,b as be,c as xe,d as we,e as _e,f as Ce,g as $e}from"./AlertDialogTitle-CaEIQJxU.js";import{_ as Ee,a as Te}from"./DialogContent-BW3DkoVX.js";import{B as Me}from"./bookmark-DBYfvgfa.js";import{C as Ae}from"./chevron-right-Bojz4hc6.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=re("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=re("EllipsisVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Be={__name:"AlertDialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const I=o;return(w,T)=>(l(),oe(u(ce),de(ue(I)),{default:k(()=>[ie(w.$slots,"default")]),_:3},16))}};function Le(){const o=y([]),I=y(""),w=y(!1),T=G(),c=async d=>{if(d.length)try{const b=await F.get("/api/v1/posts/mention-suggestions?q="+d,T.config);o.value=b.data}catch(b){console.error("Mention search failed:",b)}};return se(I,d=>{d.length>0?c(d):o.value=[]}),{mentionSuggestions:o,mentionQuery:I,isMentioning:w}}const Ne={class:"flex items-center gap-3 mb-4"},je={class:"flex-shrink-0"},Pe=["src"],Re={key:1,src:"/assets/front/images/user.png",alt:"User Avatar",class:"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700"},ze={class:"text-gray-500 dark:text-gray-300 text-sm"},De={key:1,class:"flex-1 flex items-center justify-between"},Oe={class:"font-semibold text-gray-900 dark:text-white text-base"},Ue={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},Ve={class:"relative"},Fe={key:0,class:"absolute bottom-full left-0 mb-2 w-full max-h-60 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl dark:shadow-gray-900/50 overflow-y-auto z-50"},He=["onMousedown"],qe=["src"],Ge={key:1,class:"fas fa-user-circle text-2xl text-gray-400 dark:text-gray-500"},Ke={class:"flex-1 min-w-0"},Xe={class:"font-medium text-sm text-gray-900 dark:text-white truncate"},Qe={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},We={key:0,class:"flex overflow-x-auto gap-3 pb-2 scrollbar-hide"},Je=["onClick"],Ye=["src"],Ze={class:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700"},et={key:0},tt={key:1,class:"flex items-center gap-2"},rt={__name:"PostForm",props:["post"],emits:["fetch","close"],setup(o,{emit:I}){const{mentionSuggestions:w,mentionQuery:T}=Le(),c=y({active:!1,position:{node:null,offset:0},query:""}),d=y({title:"",content:"",mentions:[],media:[]}),b=I,h=G(),j=y([]),M=y([]),x=y(null),f=o,m=y(!1),B=y(!1),O=y({}),A=n=>{m.value=n},N=()=>{d.value.content=x.value.innerHTML,H()},K=n=>{if(n.key==="Backspace"){const t=window.getSelection();if(!t.rangeCount)return;const s=t.getRangeAt(0),a=X(s);if(a){n.preventDefault(),P(a);return}}c.value.active&&["Escape","ArrowUp","ArrowDown","Enter"].includes(n.key)&&n.preventDefault()},X=n=>{if(!n.collapsed)return null;let t=n.startContainer,s=n.startOffset;if(t.nodeType===Node.TEXT_NODE)if(s===0)t=t.previousSibling;else return null;else t.nodeType===Node.ELEMENT_NODE&&(s>0?t=t.childNodes[s-1]:t=t.previousSibling);for(;t;){if(t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("mention"))return t;if(t.nodeType===Node.TEXT_NODE&&t.textContent===" ")t=t.previousSibling;else break}return null},P=n=>{const t=parseInt(n.dataset.userId),s=n.parentNode;s.removeChild(n),console.log(s.innerHTML),d.value.mentions=d.value.mentions.filter(e=>e.id!==t),d.value.content=s.innerHTML;const a=new Event("input",{bubbles:!0});x.value.dispatchEvent(a)},H=()=>{const n=window.getSelection();if(!n.rangeCount)return;const t=n.getRangeAt(0),s=Q(t),a=s.lastIndexOf("@");if(a>-1){const e=s[a-1];if(!e||/\s/.test(e)){c.value={active:!0,position:{node:t.startContainer,offset:a},query:s.slice(a+1)},T.value=c.value.query;return}}c.value.active=!1},Q=n=>{let t="",s=n.startContainer;const a=n.startOffset;return s.nodeType===Node.TEXT_NODE&&(t=s.textContent.slice(0,a)),t},W=n=>{if(!c.value.active)return;const t=new Range,s=c.value.position.node,a=c.value.position.offset;t.setStart(s,a),t.setEnd(window.getSelection().getRangeAt(0).endContainer,window.getSelection().getRangeAt(0).endOffset),t.deleteContents();const e=document.createElement("span");e.className="mention-link",e.contentEditable="false",e.dataset.userId=n.id,e.textContent=`@${n.username}`;const _=document.createTextNode(" "),S=document.createDocumentFragment();S.appendChild(e),S.appendChild(_),t.insertNode(S);const L=new Range;L.setStartAfter(_),L.collapse(!0);const v=window.getSelection();v.removeAllRanges(),v.addRange(L),d.value.mentions.some(U=>U.id===n.id)||d.value.mentions.push({id:n.id,username:n.username}),c.value={active:!1,position:{node:null,offset:0},query:""},w.value=[];const $=new Event("input",{bubbles:!0});x.value.dispatchEvent($),x.value.focus()},q=()=>{d.value={title:"",content:"",mentions:[],media:[]},m.value=!1,x.value.innerHTML="",M.value=[]},J=n=>{Array.from(n.target.files).forEach(s=>{if(!d.value.media.some(e=>e.name===s.name&&e.size===s.size)){d.value.media.push(s);const e=URL.createObjectURL(s);M.value.push({type:"og",url:e})}}),n.target.value=""},Y=async()=>{var n;try{B.value=!0;const t=new FormData;t.append("title",d.value.title),t.append("content",d.value.content),d.value.mentions.forEach((s,a)=>{t.append(`mentions[${a}][id]`,s.id),t.append(`mentions[${a}][username]`,s.username)}),d.value.media.forEach((s,a)=>{t.append(`media[${a}]`,s)}),j.value.forEach(s=>{t.append("deleted[]",s)}),f.post?(t.append("_method","PUT"),await F.post("/api/v1/posts/"+f.post.post_code,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${h.token}`}}).then(s=>{B.value=!1,s.data.status=="success"?(q(),b("fetch")):console.error("Error creating post:",s.data.message)}).catch(s=>{B.value=!1})):await F.post("/api/v1/posts",t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${h.token}`}}).then(s=>{B.value=!1,s.data.status=="success"?(q(),b("fetch")):console.error("Error creating post:",s.data.message)}).catch(s=>{B.value=!1})}catch(t){console.error("Error creating post:",((n=t.response)==null?void 0:n.data)||t.message)}},Z=(n,t)=>{t!="url"||j.value.push(n),M.value.splice(n,1)},ee=()=>{m.value=!1,b("close")};return ne(()=>{f.post&&(A(!0),d.value.post_code=f.post.post_code,d.value.content=f.post.content,d.value.title=f.post.title,M.value=f.post.media_urls.map(n=>({type:"url",url:n})),ge(()=>{x.value.innerHTML=f.post.content}))}),(n,t)=>{var s,a;return l(),i("div",{class:D(["max-w-2xl mx-auto sm:px-6",f.post?"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm":""])},[r("div",{class:D(["rounded-2xl shadow-xl dark:shadow-gray-900/50 transition-all duration-300 ease-in-out",[f.post?"bg-white dark:bg-gray-800 p-6 max-w-2xl border border-gray-200 dark:border-gray-700":"",!f.post&&m.value?"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6 shadow-lg":"",!f.post&&!m.value?"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 shadow-md hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all":""]])},[r("div",Ne,[r("div",je,[(s=u(h).user)!=null&&s.profile_photo?(l(),i("img",{key:0,src:(a=u(h).user)==null?void 0:a.profile_photo,alt:"User Avatar",class:"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700"},null,8,Pe)):(l(),i("img",Re))]),g(te,{name:"fade",mode:"out-in"},{default:k(()=>{var e,_,S,L;return[m.value?(l(),i("div",De,[r("div",null,[r("h3",Oe,C(((S=u(h).user)==null?void 0:S.name)||((L=u(h).user)==null?void 0:L.username)),1),r("p",Ue,C(n.$filters.date(new Date)),1)]),f.post?E("",!0):(l(),i("button",{key:0,onClick:p(ee,["stop"]),class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},[...t[2]||(t[2]=[r("i",{class:"fas fa-times text-sm"},null,-1)])]))])):(l(),i("div",{key:0,class:"flex-1 rounded-xl h-12 px-4 bg-gray-100 dark:bg-gray-700 flex items-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-transparent hover:border-gray-300 dark:hover:border-gray-500",onClick:t[0]||(t[0]=v=>A(!0))},[r("p",ze,"What's on your mind, "+C(((e=u(h).user)==null?void 0:e.name)||((_=u(h).user)==null?void 0:_.username))+"?",1)]))]}),_:1})]),m.value?(l(),i("form",{key:0,class:"space-y-4",onSubmit:p(Y,["prevent"])},[g(fe,{type:"text",placeholder:"Title of this post",modelValue:d.value.title,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value.title=e),error:O.value.title,class:"dark:bg-gray-900/50 dark:border-gray-600 dark:text-white"},null,8,["modelValue","error"]),r("div",Ve,[r("div",{ref_key:"editor",ref:x,contenteditable:"true",onInput:N,onKeydown:K,"data-placeholder":"Share your thoughts...",class:"w-full min-h-[120px] text-sm border rounded-xl px-4 py-3 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500/50 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:border-green-500 dark:focus:border-green-500"},null,544),g(te,{name:"fade"},{default:k(()=>[u(w).length?(l(),i("div",Fe,[(l(!0),i(z,null,V(u(w),(e,_)=>(l(),i("div",{key:_,onMousedown:p(S=>W(e),["prevent"]),class:"p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700/50 last:border-0"},[e.avatar?(l(),i("img",{key:0,src:e.avatar,class:"w-10 h-10 rounded-full object-cover ring-1 ring-gray-200 dark:ring-gray-700"},null,8,qe)):(l(),i("i",Ge)),r("div",Ke,[r("p",Xe,C(e.name),1),r("p",Qe,"@"+C(e.username),1)])],40,He))),128))])):E("",!0)]),_:1})]),M.value.length?(l(),i("div",We,[g(me,{name:"bounce",appear:""},{default:k(()=>[(l(!0),i(z,null,V(M.value,(e,_)=>(l(),i("div",{key:_,class:"relative h-32 w-32 flex-shrink-0 group"},[r("button",{onClick:S=>Z(_,e.type),class:"absolute -top-2 -right-2 w-6 h-6 flex items-center justify-center bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white rounded-full transition-all duration-200 hover:scale-110 z-10 shadow-lg"},[...t[3]||(t[3]=[r("i",{class:"fas fa-times text-xs"},null,-1)])],8,Je),r("img",{src:e.url,class:"h-full w-full rounded-xl object-cover border-2 border-gray-200 dark:border-gray-700 ring-1 ring-gray-100 dark:ring-gray-800",alt:"Image Preview"},null,8,Ye)]))),128))]),_:1})])):E("",!0),r("div",Ze,[r("input",{type:"file",onChange:J,accept:"image/*",class:"hidden",id:"media_upload",multiple:""},null,32),t[5]||(t[5]=r("label",{for:"media_upload",class:"flex items-center gap-2 px-4 py-2 rounded-lg text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer transition-colors font-medium text-sm"},[r("i",{class:"fas fa-paperclip"}),r("span",null,"Attach Media")],-1)),g(u(ve),{type:"submit",class:"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 dark:from-green-500 dark:to-green-600 dark:hover:from-green-600 dark:hover:to-green-700 text-white transition-all duration-300 shadow-md hover:shadow-lg px-6",disabled:B.value},{default:k(()=>[B.value?(l(),i("span",tt,[...t[4]||(t[4]=[r("i",{class:"fas fa-spinner fa-spin"},null,-1),R(" Posting... ",-1)])])):(l(),i("span",et,"Submit Post"))]),_:1},8,["disabled"])])],32)):E("",!0)],2)],2)}}},ot=ae(rt,[["__scopeId","data-v-5578dad7"]]);function st(o=null,I="post"){const w=G(),T=le(),c=y(!1),d=y(0),b=y(!1);return o&&(c.value=o.bookmarked??!1,d.value=o.bookmark_count??0),{isBookmarked:c,bookmarkCount:d,isLoading:b,toggleBookmark:async(x,f)=>{if(!w.isAuthenticated)return T.push("/login"),!1;if(b.value)return c.value;b.value=!0;try{const m=await F.post("/api/v1/bookmarks/toggle",{type:x,record_id:f},w.config);return m.data.status==="success"&&(c.value=m.data.data.bookmarked,d.value=m.data.data.bookmark_count),c.value}catch(m){return console.error("Error toggling bookmark:",m),c.value}finally{b.value=!1}},checkBookmarkStatus:async(x,f)=>{if(w.isAuthenticated)try{const m=await F.get(`/api/v1/bookmarks/check?type=${x}&record_id=${f}`,w.config);m.data.status==="success"&&(c.value=m.data.data.bookmarked,d.value=m.data.data.bookmark_count)}catch(m){console.error("Error checking bookmark status:",m)}},initialize:x=>{x&&(c.value=x.bookmarked??!1,d.value=x.bookmark_count??0)}}}const at={class:"flex items-start justify-between p-5 pb-4"},nt={class:"flex items-center gap-3 flex-1 min-w-0"},lt={class:"relative"},it=["src"],dt={class:"flex items-center gap-2"},ut={class:"font-semibold text-gray-900 dark:text-white text-base truncate group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors"},ct={class:"text-sm text-gray-500 dark:text-gray-400 truncate"},gt={class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},ft={key:0,class:"relative inline-block ml-2 self-start"},mt={role:"none"},vt={class:"px-5 pb-4"},pt={key:0,class:"font-bold text-xl text-gray-900 dark:text-white mb-3 leading-tight line-clamp-2"},ht={class:"prose prose-sm dark:prose-invert max-w-none mb-4"},kt=["innerHTML"],yt={key:1,class:"rounded-xl overflow-hidden mb-4 border border-gray-200 dark:border-gray-700"},bt={key:0,class:"relative group/media"},xt=["src"],wt={key:1,class:"grid grid-cols-2 gap-1"},_t=["src","onClick"],Ct={key:2,class:"grid grid-cols-2 gap-1"},$t=["src","onClick"],Et=["src"],Tt={key:3,class:"grid grid-cols-2 gap-1 relative"},Mt=["src","onClick"],At={class:"px-5 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50"},St={class:"flex items-center justify-between"},It={class:"flex items-center gap-6"},Bt={class:"text-sm font-medium"},Lt={class:"text-sm font-medium"},Nt={class:"text-sm font-medium"},jt={class:"flex items-center gap-4"},Pt={class:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"},Rt=["disabled","title"],zt={class:"relative bg-black/90 rounded-xl overflow-hidden"},Dt=["src"],Ot={class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm"},Ut={__name:"PostCard",props:["post"],emits:["load_more","fetch","delete_post","liked_action","share_url","bookmarked_action"],setup(o,{emit:I}){const w=y(null),T=y(!1),c=y(!1),d=I,b=le(),h=G(),j=pe(()=>"/@"+o.post.user.username+"/"+o.post.post_code),{isBookmarked:M,bookmarkCount:x,isLoading:f,toggleBookmark:m,initialize:B}=st(o.post,"post");se(()=>o.post,a=>{a&&B(a)},{immediate:!0});const O=y(!1),A=y(0),N=a=>{A.value=a,O.value=!0},K=()=>{A.value<o.post.media_urls.length-1&&A.value++},X=()=>{A.value>0&&A.value--},P=a=>{a.target.src="/placeholder.svg"},H=a=>{a.target.src="/assets/front/images/user.png"},Q=()=>{c.value=!0,T.value=!1},W=async a=>{T.value=!1,await axios.delete(`/api/v1/posts/${o.post.post_code}`,h.config).then(()=>{d("delete_post",o.post.post_code)})},q=a=>a.replace(/@(\w+)/g,'<a href="/@$1">@$1</a>'),J=()=>{new IntersectionObserver(e=>{e.forEach(_=>{_.isIntersecting&&d("load_more")})}).observe(w.value)},Y=async()=>{if(!h.isAuthenticated)b.push("/login");else{const a=await axios.get(`/api/v1/posts/like-unlike/${o.post.post_code}`,h.config);a.data.status=="success"?d("liked_action",[o.post.post_code,a.data.liked]):alert("Something went wrong")}},Z=()=>{h.isAuthenticated?b.push(j.value):b.push("/login")},ee=()=>{d("share_url",j.value)},n=async()=>{if(!h.isAuthenticated){b.push("/login");return}const a=o.post.post_code;if(!a){console.error("Post code not found");return}const e=await m("post",a);e!==void 0&&d("bookmarked_action",[a,e,x.value])},t=()=>{d("fetch")},s=()=>{c.value=!1};return ne(()=>{w.value.classList.contains("last_item")&&J()}),(a,e)=>{var S,L;const _=he("router-link");return l(),i("div",{ref_key:"element",ref:w},[r("article",{onClick:e[11]||(e[11]=v=>u(b).push(j.value)),class:"group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm dark:shadow-gray-900/50 hover:shadow-xl dark:hover:shadow-gray-900 rounded-2xl overflow-hidden hover:cursor-pointer transition-all duration-300 ease-out hover:border-gray-300 dark:hover:border-gray-600"},[r("div",at,[r("div",nt,[g(_,{to:o.post.user.username!=((S=u(h).user)==null?void 0:S.username)?"/@"+o.post.user.username:"/dashboard",onClick:e[0]||(e[0]=p(()=>{},["stop"])),class:"flex-shrink-0"},{default:k(()=>{var v,$;return[r("div",lt,[(v=o.post.user)!=null&&v.profile_photo?(l(),i("img",{key:0,src:($=o.post.user)==null?void 0:$.profile_photo,alt:"User Avatar",class:"w-14 h-14 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700 transition-all duration-300 group-hover:ring-green-500/50",onError:H},null,40,it)):(l(),i("img",{key:1,src:"/assets/front/images/user.png",alt:"User Avatar",class:"w-14 h-14 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700 transition-all duration-300 group-hover:ring-green-500/50",onError:H},null,32))])]}),_:1},8,["to"]),g(_,{onClick:e[1]||(e[1]=p(()=>{},["stop"])),to:o.post.user.username!=((L=u(h).user)==null?void 0:L.username)?"/@"+o.post.user.username:"/dashboard",class:"flex-1 min-w-0"},{default:k(()=>[r("div",dt,[r("h4",ut,C(o.post.user.name),1),r("span",ct,"@"+C(o.post.user.username),1)]),r("p",gt,C(o.post.posted_at),1)]),_:1},8,["to"])]),u(h).isAuthenticated&&o.post.owner?(l(),i("div",ft,[r("button",{onClick:e[2]||(e[2]=p(v=>T.value=!T.value,["stop"])),class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},[g(u(Ie),{class:"w-5 h-5"})]),g(te,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:k(()=>[T.value?(l(),i("div",{key:0,onClick:e[6]||(e[6]=p(()=>{},["stop"])),class:"absolute right-0 top-full mt-2 z-20 w-40 origin-top-right bg-white dark:bg-gray-800 rounded-xl shadow-lg ring-1 ring-black/5 dark:ring-white/10 overflow-hidden",role:"menu","aria-orientation":"vertical"},[r("div",mt,[r("button",{onClick:e[3]||(e[3]=p(v=>Q(),["stop"])),class:"w-full text-left px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors flex items-center gap-2"},[...e[13]||(e[13]=[r("i",{class:"fas fa-pencil-alt text-xs"},null,-1),R(" Edit Post ",-1)])]),g(u(ke),null,{default:k(()=>[g(u(Be),{"as-child":""},{default:k(()=>[r("button",{onClick:e[4]||(e[4]=p(()=>{},["stop"])),class:"w-full text-left px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2"},[...e[14]||(e[14]=[r("i",{class:"fas fa-trash text-xs"},null,-1),R(" Delete ",-1)])])]),_:1}),g(u(ye),null,{default:k(()=>[g(u(be),null,{default:k(()=>[g(u(xe),null,{default:k(()=>[...e[15]||(e[15]=[R("Are you absolutely sure?",-1)])]),_:1}),g(u(we),null,{default:k(()=>[...e[16]||(e[16]=[R(" This action cannot be undone. This will permanently delete your post. ",-1)])]),_:1})]),_:1}),g(u(_e),null,{default:k(()=>[g(u(Ce),null,{default:k(()=>[...e[17]||(e[17]=[R("Cancel",-1)])]),_:1}),g(u($e),{onClick:e[5]||(e[5]=p(v=>W("delete"),["stop"]))},{default:k(()=>[...e[18]||(e[18]=[R("Continue",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])])):E("",!0)]),_:1})])):E("",!0)]),r("div",vt,[o.post.title?(l(),i("h3",pt,C(o.post.title),1)):E("",!0),r("div",ht,[r("p",{class:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap break-words",innerHTML:q(o.post.content),onClick:e[7]||(e[7]=p(()=>{},["stop"]))},null,8,kt)]),o.post.media_urls&&o.post.media_urls.length?(l(),i("div",yt,[o.post.media_urls.length===1?(l(),i("div",bt,[r("img",{src:o.post.media_urls[0],alt:"Post Media",class:"w-full h-auto max-h-[500px] object-cover cursor-pointer transition-transform duration-300 group-hover:scale-[1.02]",onClick:e[8]||(e[8]=p(v=>N(0),["stop"])),onError:P},null,40,xt)])):o.post.media_urls.length===2?(l(),i("div",wt,[(l(!0),i(z,null,V(o.post.media_urls,(v,$)=>(l(),i(z,{key:v},[$<2?(l(),i("img",{key:0,src:v,alt:"Post Media",class:"w-full h-64 object-cover cursor-pointer transition-transform duration-300 hover:scale-105",onClick:p(U=>N($),["stop"]),onError:P},null,40,_t)):E("",!0)],64))),128))])):o.post.media_urls.length===3?(l(),i("div",Ct,[(l(!0),i(z,null,V(o.post.media_urls.slice(0,2),(v,$)=>(l(),i("img",{key:$,src:v,alt:"Post Media",class:"w-full h-48 object-cover cursor-pointer transition-transform duration-300 hover:scale-105",onClick:p(U=>N($),["stop"]),onError:P},null,40,$t))),128)),r("img",{src:o.post.media_urls[2],alt:"Post Media",class:"col-span-2 w-full h-64 object-cover cursor-pointer transition-transform duration-300 hover:scale-105",onClick:e[9]||(e[9]=p(v=>N(2),["stop"])),onError:P},null,40,Et)])):(l(),i("div",Tt,[(l(!0),i(z,null,V(o.post.media_urls.slice(0,4),(v,$)=>(l(),i("div",{key:$,class:"relative overflow-hidden"},[r("img",{src:v,alt:"Post Media",class:"w-full h-48 object-cover cursor-pointer transition-transform duration-300 hover:scale-110",onClick:p(U=>N($),["stop"]),onError:P},null,40,Mt),$===3&&o.post.media_urls.length>4?(l(),i("div",{key:0,class:"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-lg font-bold cursor-pointer backdrop-blur-sm",onClick:e[10]||(e[10]=p(U=>N(3),["stop"]))}," +"+C(o.post.media_urls.length-4)+" more ",1)):E("",!0)]))),128))]))])):E("",!0)]),r("div",At,[r("div",St,[r("div",It,[r("button",{onClick:p(Y,["stop"]),class:D(["flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-200",o.post.liked?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"])},[r("i",{class:D([o.post.liked?"fas fa-heart":"far fa-heart","text-base"])},null,2),r("span",Bt,C(o.post.likes_count||0),1)],2),r("button",{onClick:p(Z,["stop"]),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all duration-200"},[e[19]||(e[19]=r("i",{class:"far fa-comment text-base"},null,-1)),r("span",Lt,C(o.post.comments_count||0),1)]),r("button",{onClick:p(ee,["stop"]),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all duration-200"},[e[20]||(e[20]=r("i",{class:"far fa-paper-plane text-base"},null,-1)),r("span",Nt,C(o.post.views_count||0),1)])]),r("div",jt,[r("div",Pt,[e[21]||(e[21]=r("i",{class:"far fa-eye"},null,-1)),r("span",null,C(o.post.views_count||0)+" views",1)]),r("button",{onClick:p(n,["stop"]),disabled:u(f)||!u(h).isAuthenticated,class:D(["p-2 rounded-lg transition-all duration-200",u(M)?"text-yellow-600 dark:text-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20":"text-gray-600 dark:text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 hover:bg-gray-100 dark:hover:bg-gray-700/50",u(f)?"opacity-50 cursor-not-allowed":"cursor-pointer"]),title:u(M)?"Remove from bookmarks":"Save to bookmarks"},[g(u(Me),{class:D(["w-5 h-5 transition-transform duration-200",u(M)?"fill-current":"",u(f)?"animate-pulse":""])},null,8,["class"])],10,Rt)])])])]),c.value?(l(),oe(ot,{key:0,onClose:s,onFetch:t,post:o.post},null,8,["post"])):E("",!0),g(u(Te),{open:O.value,"onUpdate:open":e[12]||(e[12]=v=>O.value=v)},{default:k(()=>[g(u(Ee),{class:"max-w-5xl p-0 border-0 bg-transparent shadow-2xl"},{default:k(()=>[r("div",zt,[r("img",{src:o.post.media_urls[A.value],alt:"Gallery image",class:"w-full h-auto max-h-[80vh] object-contain"},null,8,Dt),A.value>0?(l(),i("button",{key:0,onClick:X,class:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-200 hover:scale-110"},[g(u(Se),{class:"w-6 h-6"})])):E("",!0),A.value<o.post.media_urls.length-1?(l(),i("button",{key:1,onClick:K,class:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-200 hover:scale-110"},[g(u(Ae),{class:"w-6 h-6"})])):E("",!0),r("div",Ot,C(A.value+1)+" / "+C(o.post.media_urls.length),1)])]),_:1})]),_:1},8,["open"])],512)}}},Kt=ae(Ut,[["__scopeId","data-v-44c450fd"]]);export{Ie as E,ot as P,Be as _,Kt as a,st as u};
//# sourceMappingURL=PostCard-BWC1877M.js.map
