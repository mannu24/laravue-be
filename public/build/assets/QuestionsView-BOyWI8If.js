import{_ as b,p as f,l as Q,b as i,o as n,M as _,D as l,a8 as w,x as p,F as S,E as $,f as C,a as y,q as F,d as h,A as L,w as M,k as B}from"./app-BusCMfsw.js";import{u as V}from"./questionStore-CtjXILBN.js";import{u as T,Q as A,C as N}from"./QuestionForm-WScsGCEj.js";import{Q as D}from"./QuestionCard-D8whfOUh.js";const E={class:"relative","data-test":"question-search-bar"},I=["placeholder"],j={__name:"QuestionSearchBar",props:{placeholder:{type:String,default:"Search questions..."}},emits:["search"],setup(o,{emit:c}){const s=c,d=f("");let u=null;return Q(d,e=>{clearTimeout(u),u=setTimeout(()=>{(e.length>=2||e.length===0)&&s("search",e)},400)}),(e,t)=>(n(),i("div",E,[_(l("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>d.value=m),type:"text",placeholder:o.placeholder,class:"w-full px-4 py-3 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white","data-test":"search-input"},null,8,I),[[w,d.value]]),t[1]||(t[1]=l("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}," ðŸ” ",-1))]))}},O=b(j,[["__scopeId","data-v-a7911bc8"]]),R={class:"space-y-4"},U={key:0,class:"text-center py-12"},z={key:1,class:"text-center py-12"},G={key:2,class:"space-y-4"},H={key:3,class:"text-center py-4"},J={__name:"QuestionList",props:{questions:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["load-more","select-question"],setup(o,{emit:c}){const s=c,d=()=>{s("load-more")},u=e=>{s("select-question",e)};return(e,t)=>(n(),i("div",R,[o.loading&&o.questions.length===0?(n(),i("div",U,[...t[0]||(t[0]=[l("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),l("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"Loading questions...",-1)])])):o.questions.length===0?(n(),i("div",z,[...t[1]||(t[1]=[l("p",{class:"text-gray-500 dark:text-gray-400"},"No questions found",-1)])])):(n(),i("div",G,[(n(!0),i(S,null,$(o.questions,m=>(n(),C(D,{key:m.id,question:m,onOpen:u,"data-test":"question-card"},null,8,["question"]))),128))])),o.loading&&o.questions.length>0?(n(),i("div",H,[...t[2]||(t[2]=[l("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)])])):p("",!0),!o.loading&&o.questions.length>0?(n(),i("button",{key:4,type:"button",onClick:d,class:"w-full py-3 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium","data-test":"load-more-button"}," Load More ")):p("",!0)]))}},K=b(J,[["__scopeId","data-v-76e7362a"]]),P={class:"container mx-auto px-4 py-8"},W={class:"flex items-center justify-between mb-6"},X={key:0,class:"mb-6"},Y={class:"mb-6"},Z={__name:"QuestionsView",setup(o){const c=B(),s=V(),{toastSuccess:d,toastError:u}=T(),e=f(!1),t=y(()=>s.allQuestions),m=y(()=>s.loading),g=async r=>{if(!r||r.length<2){await s.fetchQuestions();return}try{await s.searchQuestions(r)}catch{u("Failed to search questions")}},v=async r=>{try{const a=await s.askQuestion(r);d("Question created successfully!"),e.value=!1,c.push(`/questions/${a.id}`)}catch(a){u(a.message||"Failed to create question")}},x=async()=>{try{await s.loadMoreQuestions()}catch{u("Failed to load more questions")}},k=r=>{c.push(`/questions/${r}`)};return F(async()=>{try{await s.fetchQuestions()}catch{u("Failed to load questions")}}),(r,a)=>(n(),i("div",P,[l("div",W,[a[2]||(a[2]=l("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Questions",-1)),l("button",{type:"button",onClick:a[0]||(a[0]=q=>e.value=!e.value),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors","data-test":"toggle-question-form"},L(e.value?"Cancel":"Ask Question"),1)]),e.value?(n(),i("div",X,[h(N,{title:"Ask a Question"},{default:M(()=>[h(A,{onSubmit:v,onCancel:a[1]||(a[1]=q=>e.value=!1)})]),_:1})])):p("",!0),l("div",Y,[h(O,{placeholder:"Search questions...",onSearch:g})]),h(K,{questions:t.value,loading:m.value,onLoadMore:x,onSelectQuestion:k},null,8,["questions","loading"])]))}},ae=b(Z,[["__scopeId","data-v-ccde2215"]]);export{ae as default};
//# sourceMappingURL=QuestionsView-BOyWI8If.js.map
