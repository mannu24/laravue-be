{"version":3,"file":"answerStore-Cp3xBYy3.js","sources":["../../../resources/js/stores/answerStore.js"],"sourcesContent":["/**\r\n * Answer Store\r\n * Manages answers, answer creation, and verification\r\n */\r\nimport { defineStore } from 'pinia'\r\nimport { ref, computed } from 'vue'\r\nimport api from '@/lib/api'\r\nimport endpoints from '@/lib/endpoints'\r\n\r\nexport const useAnswerStore = defineStore('answer', () => {\r\n  // State\r\n  const loading = ref(false)\r\n  const error = ref(null)\r\n  const answers = ref([])\r\n\r\n  // Getters\r\n  const allAnswers = computed(() => answers.value)\r\n  const verifiedAnswers = computed(() => {\r\n    return answers.value.filter(a => a.is_verified)\r\n  })\r\n  const aiAnswers = computed(() => {\r\n    return answers.value.filter(a => a.is_ai_generated)\r\n  })\r\n  const userAnswers = computed(() => {\r\n    return answers.value.filter(a => !a.is_ai_generated)\r\n  })\r\n\r\n  /**\r\n   * Submit a new answer\r\n   * @param {object} payload - Answer data\r\n   */\r\n  const submitAnswer = async (payload) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.post(endpoints.answers.create(), payload)\r\n      const newAnswer = response.data.data\r\n      \r\n      // Add to answers list\r\n      answers.value.push(newAnswer)\r\n      \r\n      return newAnswer\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to submit answer'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verify an answer\r\n   * @param {number|string} answerId - Answer ID\r\n   */\r\n  const verifyAnswer = async (answerId) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.post(endpoints.answers.verify(), {\r\n        answer_id: answerId\r\n      })\r\n      const verifiedAnswer = response.data.data\r\n      \r\n      // Update answer in list\r\n      const index = answers.value.findIndex(a => a.id === answerId)\r\n      if (index !== -1) {\r\n        answers.value[index] = verifiedAnswer\r\n      }\r\n      \r\n      return verifiedAnswer\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to verify answer'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fetch answers for a question\r\n   * @param {number|string} questionId - Question ID\r\n   */\r\n  const fetchAnswersForQuestion = async (questionId) => {\r\n    try {\r\n      loading.value = true\r\n      error.value = null\r\n      const response = await api.get(endpoints.answers.listForQuestion(questionId))\r\n      answers.value = response.data.data\r\n      return response.data.data\r\n    } catch (err) {\r\n      error.value = err.response?.data?.message || 'Failed to fetch answers'\r\n      throw err\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear answer data\r\n   */\r\n  const clearAnswers = () => {\r\n    answers.value = []\r\n    error.value = null\r\n  }\r\n\r\n  return {\r\n    // State\r\n    loading,\r\n    error,\r\n    answers,\r\n    // Getters\r\n    allAnswers,\r\n    verifiedAnswers,\r\n    aiAnswers,\r\n    userAnswers,\r\n    // Actions\r\n    submitAnswer,\r\n    verifyAnswer,\r\n    fetchAnswersForQuestion,\r\n    clearAnswers\r\n  }\r\n})\r\n\r\n"],"names":["useAnswerStore","defineStore","loading","ref","error","answers","allAnswers","computed","verifiedAnswers","a","aiAnswers","userAnswers","payload","newAnswer","api","endpoints","err","_b","_a","answerId","verifiedAnswer","index","questionId","response"],"mappings":"qEASY,MAACA,EAAiBC,EAAY,SAAU,IAAM,CAExD,MAAMC,EAAUC,EAAI,EAAK,EACnBC,EAAQD,EAAI,IAAI,EAChBE,EAAUF,EAAI,EAAE,EAGhBG,EAAaC,EAAS,IAAMF,EAAQ,KAAK,EACzCG,EAAkBD,EAAS,IACxBF,EAAQ,MAAM,OAAOI,GAAKA,EAAE,WAAW,CAC/C,EACKC,EAAYH,EAAS,IAClBF,EAAQ,MAAM,OAAOI,GAAKA,EAAE,eAAe,CACnD,EACKE,EAAcJ,EAAS,IACpBF,EAAQ,MAAM,OAAOI,GAAK,CAACA,EAAE,eAAe,CACpD,EAgFD,MAAO,CAEL,QAAAP,EACA,MAAAE,EACA,QAAAC,EAEA,WAAAC,EACA,gBAAAE,EACA,UAAAE,EACA,YAAAC,EAEA,aArFmB,MAAOC,GAAY,SACtC,GAAI,CACFV,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,KAEd,MAAMS,GADW,MAAMC,EAAI,KAAKC,EAAU,QAAQ,OAAM,EAAIH,CAAO,GACxC,KAAK,KAGhC,OAAAP,EAAQ,MAAM,KAAKQ,CAAS,EAErBA,CACT,OAASG,EAAK,CACZ,MAAAZ,EAAM,QAAQa,GAAAC,EAAAF,EAAI,WAAJ,YAAAE,EAAc,OAAd,YAAAD,EAAoB,UAAW,0BACvCD,CACR,QAAC,CACCd,EAAQ,MAAQ,EAClB,CACF,EAqEE,aA/DmB,MAAOiB,GAAa,SACvC,GAAI,CACFjB,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,KAId,MAAMgB,GAHW,MAAMN,EAAI,KAAKC,EAAU,QAAQ,SAAU,CAC1D,UAAWI,CACnB,CAAO,GAC+B,KAAK,KAG/BE,EAAQhB,EAAQ,MAAM,UAAUI,GAAKA,EAAE,KAAOU,CAAQ,EAC5D,OAAIE,IAAU,KACZhB,EAAQ,MAAMgB,CAAK,EAAID,GAGlBA,CACT,OAASJ,EAAK,CACZ,MAAAZ,EAAM,QAAQa,GAAAC,EAAAF,EAAI,WAAJ,YAAAE,EAAc,OAAd,YAAAD,EAAoB,UAAW,0BACvCD,CACR,QAAC,CACCd,EAAQ,MAAQ,EAClB,CACF,EA0CE,wBApC8B,MAAOoB,GAAe,SACpD,GAAI,CACFpB,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,KACd,MAAMmB,EAAW,MAAMT,EAAI,IAAIC,EAAU,QAAQ,gBAAgBO,CAAU,CAAC,EAC5E,OAAAjB,EAAQ,MAAQkB,EAAS,KAAK,KACvBA,EAAS,KAAK,IACvB,OAASP,EAAK,CACZ,MAAAZ,EAAM,QAAQa,GAAAC,EAAAF,EAAI,WAAJ,YAAAE,EAAc,OAAd,YAAAD,EAAoB,UAAW,0BACvCD,CACR,QAAC,CACCd,EAAQ,MAAQ,EAClB,CACF,EAwBE,aAnBmB,IAAM,CACzBG,EAAQ,MAAQ,CAAA,EAChBD,EAAM,MAAQ,IAChB,CAiBF,CACA,CAAC"}