import{a as V,r as p,P as Q,X as q,a4 as r,b as U,f as a,w as n,e as s,j as k,l as B,m as E,a5 as C,o as x,g as l,d as u,y as S,i as $,t as T}from"./app-BYKYNp4m.js";import{_ as P,a as A}from"./CardContent-C-Vk5b1h.js";import{_ as D,a as F,b as N}from"./CardTitle-DD1DMKAN.js";import{_ as j}from"./CardFooter-CQ0oXYle.js";import{_ as z}from"./Input-Do1Hw_rn.js";import{_ as I,a as f,b as M}from"./TagInput-DkqeS7o2.js";import{_ as R,a as H}from"./BackNavigator-C7a6kw1k.js";import"./index-Bcd6cYoq.js";import"./DialogContent-DSvNf_40.js";import"./index-BAa00HGy.js";const X={class:"max-w-3xl mx-auto py-8 px-4"},Y={class:"space-y-2"},G={class:"space-y-2"},J={class:"space-y-2"},le={__name:"EditAskedQuestion",setup(K){const c=V(),v=E(),g=C(),d=p(!1),m=p(!1),b=[{name:"Questions",href:"/qna"},{name:"Edit",href:`/qna/edit/${g.params.slug}`}],t=p({title:"",content:"",tags:[],id:null});Q(async()=>{await w()});const w=async()=>{try{const e=(await q.get(`/api/v1/questions/${g.params.slug}`,{headers:{Authorization:`Bearer ${c.token}`}})).data.data.question;t.value={id:e.id,title:e.title,content:e.content,tags:(e.tags||[]).map(i=>i.name)}}catch(o){console.error("Error fetching question:",o),r({variant:"destructive",description:"Failed to load question. Please try again."}),v.push("/qna")}},_=async()=>{if(y())try{d.value=!0;const o=new FormData;o.append("title",t.value.title),o.append("content",t.value.content),o.append("_method","PUT"),t.value.tags.forEach((i,L)=>{o.append("tags[]",i)});const e=await q.post(`/api/v1/questions/${t.value.id}`,o,{headers:{Authorization:`Bearer ${c.token}`,"Content-Type":"multipart/form-data"}});v.push(`/qna/${e.data.data.slug}`),r({description:"Your question has been successfully updated."})}catch(o){console.error("Error updating question:",o),r({variant:"destructive",description:"Failed to update question. Please try again."})}finally{d.value=!1}},y=()=>t.value.title.length<15?(r({variant:"destructive",description:"Title should be at least 15 characters long."}),!1):t.value.content.length<30?(r({variant:"destructive",description:"Question details should be at least 30 characters long."}),!1):t.value.tags.length<1?(r({variant:"destructive",description:"At least 1 Tag is required!"}),!1):!0,h=()=>{y()&&(m.value=!0)};return(o,e)=>(x(),U("div",X,[a(R,{items:b}),a(s(A),{class:"overflow-hidden"},{default:n(()=>[a(s(D),null,{default:n(()=>[a(s(F),null,{default:n(()=>e[4]||(e[4]=[l("Edit Question")])),_:1}),a(s(N),null,{default:n(()=>e[5]||(e[5]=[l("Update your question details")])),_:1})]),_:1}),a(s(P),null,{default:n(()=>[u("form",{onSubmit:S(_,["prevent"]),class:"space-y-6"},[u("div",Y,[a(s(f),{for:"title"},{default:n(()=>e[6]||(e[6]=[l("Question Title")])),_:1}),a(s(z),{modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value.title=i),id:"title",type:"text",placeholder:"e.g., How do I center a div in CSS?",required:""},null,8,["modelValue"]),e[7]||(e[7]=u("p",{class:"text-sm text-muted-foreground"}," Be specific and imagine you're updating a question for others. ",-1))]),u("div",G,[a(s(f),{for:"content"},{default:n(()=>e[8]||(e[8]=[l("Question Details")])),_:1}),a(H,{modelValue:t.value.content,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value.content=i),placeholder:"Update the context about your question...","min-height":300},null,8,["modelValue"]),e[9]||(e[9]=u("p",{class:"text-sm text-muted-foreground"}," Include all the information someone would need to understand your updated question. ",-1))]),u("div",J,[a(s(f),null,{default:n(()=>e[10]||(e[10]=[l("Tags")])),_:1}),a(M,{modelValue:t.value.tags,"onUpdate:modelValue":e[2]||(e[2]=i=>t.value.tags=i),"max-tags":5,placeholder:"Update up to 5 tags"},null,8,["modelValue"]),e[11]||(e[11]=u("p",{class:"text-sm text-muted-foreground"}," Update up to 5 tags to describe what your question is about. ",-1))])],32)]),_:1}),a(s(j),{class:"flex justify-between"},{default:n(()=>[a(s($),{variant:"outline",onClick:h},{default:n(()=>e[12]||(e[12]=[l(" Preview ")])),_:1}),a(s($),{onClick:_,disabled:d.value},{default:n(()=>[l(T(d.value?"Updating...":"Update Question"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),m.value?(x(),k(I,{key:0,question:t.value,onClose:e[3]||(e[3]=i=>m.value=!1)},null,8,["question"])):B("",!0)]))}};export{le as default};
//# sourceMappingURL=EditAskedQuestion-4AMCEYEp.js.map
