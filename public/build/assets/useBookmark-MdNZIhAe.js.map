{"version":3,"file":"useBookmark-MdNZIhAe.js","sources":["../../../node_modules/lucide-vue-next/dist/esm/icons/ellipsis-vertical.js","../../../resources/js/components/ui/alert-dialog/AlertDialogTrigger.vue","../../../resources/js/composables/useBookmark.js"],"sourcesContent":["/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EllipsisVertical = createLucideIcon(\"EllipsisVerticalIcon\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { EllipsisVertical as default };\n//# sourceMappingURL=ellipsis-vertical.js.map\n","<script setup>\nimport { AlertDialogTrigger } from 'radix-vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n});\n</script>\n\n<template>\n  <AlertDialogTrigger v-bind=\"props\">\n    <slot />\n  </AlertDialogTrigger>\n</template>\n","/**\r\n * Bookmark Composable\r\n * \r\n * Handles bookmark/unbookmark functionality for posts, questions, and projects.\r\n * Similar to useFollow but for bookmarks.\r\n */\r\n\r\nimport { ref } from 'vue'\r\nimport { useAuthStore } from '../stores/auth'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios'\r\n\r\n/**\r\n * Bookmark Composable\r\n * \r\n * @param {Object} recordData - The record data (post, question, or project)\r\n * @param {string} type - The type: 'post', 'question', or 'project'\r\n */\r\nexport function useBookmark(recordData = null, type = 'post') {\r\n    const authStore = useAuthStore()\r\n    const router = useRouter()\r\n    \r\n    // Instance-specific state\r\n    const isBookmarked = ref(false)\r\n    const bookmarkCount = ref(0)\r\n    const isLoading = ref(false)\r\n\r\n    // Initialize state if recordData is provided\r\n    if (recordData) {\r\n        isBookmarked.value = recordData.bookmarked ?? false\r\n        bookmarkCount.value = recordData.bookmark_count ?? 0\r\n    }\r\n\r\n    /**\r\n     * Toggle bookmark status\r\n     * \r\n     * @param {string} type - 'post', 'question', or 'project'\r\n     * @param {number} recordId - The ID of the record\r\n     * @returns {Promise<boolean>} - Returns true if bookmarked, false if unbookmarked\r\n     */\r\n    const toggleBookmark = async (type, recordId) => {\r\n        if (!authStore.isAuthenticated) {\r\n            router.push('/login')\r\n            return false\r\n        }\r\n\r\n        if (isLoading.value) {\r\n            return isBookmarked.value\r\n        }\r\n\r\n        isLoading.value = true\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                '/api/v1/bookmarks/toggle',\r\n                {\r\n                    type: type,\r\n                    record_id: recordId,\r\n                },\r\n                authStore.config\r\n            )\r\n\r\n            if (response.data.status === 'success') {\r\n                isBookmarked.value = response.data.data.bookmarked\r\n                bookmarkCount.value = response.data.data.bookmark_count\r\n\r\n                // Optional: You can add toast notifications here if needed\r\n                // For now, we'll just update the state silently\r\n\r\n                return isBookmarked.value\r\n            } else {\r\n                return isBookmarked.value\r\n            }\r\n        } catch (error) {\r\n            console.error('Error toggling bookmark:', error)\r\n            return isBookmarked.value\r\n        } finally {\r\n            isLoading.value = false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check bookmark status\r\n     * \r\n     * @param {string} type - 'post', 'question', or 'project'\r\n     * @param {number} recordId - The ID of the record\r\n     */\r\n    const checkBookmarkStatus = async (type, recordId) => {\r\n        if (!authStore.isAuthenticated) {\r\n            return\r\n        }\r\n\r\n        try {\r\n            const response = await axios.get(\r\n                `/api/v1/bookmarks/check?type=${type}&record_id=${recordId}`,\r\n                authStore.config\r\n            )\r\n\r\n            if (response.data.status === 'success') {\r\n                isBookmarked.value = response.data.data.bookmarked\r\n                bookmarkCount.value = response.data.data.bookmark_count\r\n            }\r\n        } catch (error) {\r\n            console.error('Error checking bookmark status:', error)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initialize bookmark state from record data\r\n     * \r\n     * @param {Object} recordData - The record data\r\n     */\r\n    const initialize = (recordData) => {\r\n        if (recordData) {\r\n            isBookmarked.value = recordData.bookmarked ?? false\r\n            bookmarkCount.value = recordData.bookmark_count ?? 0\r\n        }\r\n    }\r\n\r\n    return {\r\n        isBookmarked,\r\n        bookmarkCount,\r\n        isLoading,\r\n        toggleBookmark,\r\n        checkBookmarkStatus,\r\n        initialize,\r\n    }\r\n}\r\n\r\n"],"names":["EllipsisVertical","createLucideIcon","props","__props","_openBlock","_createBlock","_unref","_renderSlot","_ctx","useBookmark","recordData","type","authStore","useAuthStore","router","useRouter","isBookmarked","ref","bookmarkCount","isLoading","recordId","response","axios","error"],"mappings":"2HAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASK,MAACA,EAAmBC,EAAiB,uBAAwB,CAChE,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,IAAK,IAAK,SAAU,EACxD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,IAAK,EAAG,IAAK,IAAK,SAAU,EACvD,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,IAAK,IAAK,QAAQ,CAAE,CAC1D,CAAC,gHCVD,MAAMC,EAAQC,gBAOZC,EAAA,EAAAC,EAEqBC,SAFOJ,CAAK,CAAA,EAAA,WAC/B,IAAQ,CAARK,EAAQC,EAAA,OAAA,SAAA,gBCOL,SAASC,EAAYC,EAAa,KAAMC,EAAO,OAAQ,CAC1D,MAAMC,EAAYC,EAAY,EACxBC,EAASC,EAAS,EAGlBC,EAAeC,EAAI,EAAK,EACxBC,EAAgBD,EAAI,CAAC,EACrBE,EAAYF,EAAI,EAAK,EAG3B,OAAIP,IACAM,EAAa,MAAQN,EAAW,YAAc,GAC9CQ,EAAc,MAAQR,EAAW,gBAAkB,GAyFhD,CACH,aAAAM,EACA,cAAAE,EACA,UAAAC,EACA,eAnFmB,MAAOR,EAAMS,IAAa,CAC7C,GAAI,CAACR,EAAU,gBACX,OAAAE,EAAO,KAAK,QAAQ,EACb,GAGX,GAAIK,EAAU,MACV,OAAOH,EAAa,MAGxBG,EAAU,MAAQ,GAElB,GAAI,CACA,MAAME,EAAW,MAAMC,EAAM,KACzB,2BACA,CACI,KAAMX,EACN,UAAWS,CAC/B,EACgBR,EAAU,MAC1B,EAEY,OAAIS,EAAS,KAAK,SAAW,YACzBL,EAAa,MAAQK,EAAS,KAAK,KAAK,WACxCH,EAAc,MAAQG,EAAS,KAAK,KAAK,gBAKlCL,EAAa,KAI5B,OAASO,EAAO,CACZ,eAAQ,MAAM,2BAA4BA,CAAK,EACxCP,EAAa,KACxB,QAAC,CACGG,EAAU,MAAQ,EACtB,CACJ,EA6CI,oBArCwB,MAAOR,EAAMS,IAAa,CAClD,GAAKR,EAAU,gBAIf,GAAI,CACA,MAAMS,EAAW,MAAMC,EAAM,IACzB,gCAAgCX,CAAI,cAAcS,CAAQ,GAC1DR,EAAU,MAC1B,EAEgBS,EAAS,KAAK,SAAW,YACzBL,EAAa,MAAQK,EAAS,KAAK,KAAK,WACxCH,EAAc,MAAQG,EAAS,KAAK,KAAK,eAEjD,OAASE,EAAO,CACZ,QAAQ,MAAM,kCAAmCA,CAAK,CAC1D,CACJ,EAoBI,WAbgBb,GAAe,CAC3BA,IACAM,EAAa,MAAQN,EAAW,YAAc,GAC9CQ,EAAc,MAAQR,EAAW,gBAAkB,EAE3D,CASJ,CACA","x_google_ignoreList":[0]}