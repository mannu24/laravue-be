{"version":3,"file":"BadgesView-D4qbGCF7.js","sources":["../../../resources/js/views/BadgesView.vue"],"sourcesContent":["<!--\r\n  BadgesView\r\n  Purpose: Full list of all badges with filters\r\n-->\r\n<template>\r\n  <div class=\"container mx-auto px-4 py-8 max-w-6xl\">\r\n    <!-- Header -->\r\n    <div class=\"mb-8\">\r\n      <h1 class=\"text-4xl font-bold text-gray-900 dark:text-white\">Badges</h1>\r\n      <p class=\"mt-2 text-gray-600 dark:text-white/80\">\r\n        Collect badges by completing achievements and leveling up\r\n      </p>\r\n    </div>\r\n\r\n    <!-- Filters -->\r\n    <div class=\"mb-6 flex flex-wrap gap-3\">\r\n      <!-- Status Filter -->\r\n      <div class=\"flex items-center gap-2\">\r\n        <span class=\"text-sm font-medium text-gray-700 dark:text-white/70\">Status:</span>\r\n        <button\r\n          v-for=\"status in statusFilters\"\r\n          :key=\"status.id\"\r\n          @click=\"activeStatusFilter = status.id\"\r\n          class=\"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200\"\r\n          :class=\"{\r\n            'bg-blue-500 text-white shadow-lg shadow-blue-500/30': activeStatusFilter === status.id,\r\n            'bg-gray-200 dark:bg-gray-900 text-gray-700 dark:text-white/70 hover:bg-gray-300 dark:hover:bg-gray-800': activeStatusFilter !== status.id\r\n          }\"\r\n        >\r\n          {{ status.label }}\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Type Filter -->\r\n      <div class=\"flex items-center gap-2\">\r\n        <span class=\"text-sm font-medium text-gray-700 dark:text-white/70\">Type:</span>\r\n        <button\r\n          v-for=\"type in typeFilters\"\r\n          :key=\"type.id\"\r\n          @click=\"activeTypeFilter = type.id\"\r\n          class=\"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200\"\r\n          :class=\"{\r\n            'bg-purple-500 text-white shadow-lg shadow-purple-500/30': activeTypeFilter === type.id,\r\n            'bg-gray-200 dark:bg-gray-900 text-gray-700 dark:text-white/70 hover:bg-gray-300 dark:hover:bg-gray-800': activeTypeFilter !== type.id\r\n          }\"\r\n        >\r\n          {{ type.label }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Badges List -->\r\n    <div v-if=\"globalDataStore.loading\" class=\"relative z-10 text-center py-12\">\r\n      <LoadingSpinner />\r\n    </div>\r\n    <div v-else class=\"relative z-10\">\r\n      <BadgeList\r\n        :badges=\"filteredBadges\"\r\n        ui=\"grid\"\r\n        @view-badge=\"handleViewBadge\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useGlobalDataStore } from '@/stores/globalData'\r\nimport BadgeList from '@/components/gamification/BadgeList.vue'\r\nimport LoadingSpinner from '@/components/ui/LoadingSpinner.vue'\r\nimport EmptyState from '@/components/ui/EmptyState.vue'\r\n\r\nconst router = useRouter()\r\nconst globalDataStore = useGlobalDataStore()\r\n\r\n// Filters\r\nconst activeStatusFilter = ref('all') // all, earned, unearned\r\nconst activeTypeFilter = ref('all') // all, quality, contribution, rare, event\r\n\r\nconst statusFilters = [\r\n  { id: 'all', label: 'All' },\r\n  { id: 'earned', label: 'Earned' },\r\n  { id: 'unearned', label: 'Unearned' }\r\n]\r\n\r\nconst typeFilters = [\r\n  { id: 'all', label: 'All' },\r\n  { id: 'quality', label: 'Quality' },\r\n  { id: 'contribution', label: 'Contribution' },\r\n  { id: 'rare', label: 'Rare' },\r\n  { id: 'event', label: 'Event' }\r\n]\r\n\r\n// Get all badges and earned badges from global data store\r\nconst allBadges = computed(() => globalDataStore.allBadges)\r\nconst earnedBadges = computed(() => globalDataStore.earnedBadges)\r\n\r\n// Create a map of earned badge IDs for quick lookup\r\nconst earnedBadgeIds = computed(() => {\r\n  return new Set(earnedBadges.value.map(badge => badge.id))\r\n})\r\n\r\n// Filter badges based on active filters\r\nconst filteredBadges = computed(() => {\r\n  let badges = [...allBadges.value]\r\n\r\n  // Filter by status\r\n  if (activeStatusFilter.value === 'earned') {\r\n    badges = badges.filter(badge => earnedBadgeIds.value.has(badge.id))\r\n  } else if (activeStatusFilter.value === 'unearned') {\r\n    badges = badges.filter(badge => !earnedBadgeIds.value.has(badge.id))\r\n  }\r\n\r\n  // Filter by type\r\n  if (activeTypeFilter.value !== 'all') {\r\n    badges = badges.filter(badge => badge.type === activeTypeFilter.value)\r\n  }\r\n\r\n  // Add awarded_at property based on earned status\r\n  badges = badges.map(badge => ({\r\n    ...badge,\r\n    awarded_at: earnedBadgeIds.value.has(badge.id) ? earnedBadges.value.find(eb => eb.id === badge.id)?.awarded_at : null\r\n  }))\r\n\r\n  return badges\r\n})\r\n\r\nonMounted(async () => {\r\n  try {\r\n    // Fetch global data if not already loaded\r\n    if (!globalDataStore.payload) {\r\n      await globalDataStore.fetchGlobalData({ force: true })\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading badges:', error)\r\n  }\r\n})\r\n\r\nconst handleViewBadge = (badgeSlug) => {\r\n  router.push(`/badges/${badgeSlug}`)\r\n}\r\n</script>\r\n"],"names":["router","useRouter","globalDataStore","useGlobalDataStore","activeStatusFilter","ref","activeTypeFilter","statusFilters","typeFilters","allBadges","computed","earnedBadges","earnedBadgeIds","badge","filteredBadges","badges","_a","eb","onMounted","error","handleViewBadge","badgeSlug","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_Fragment","_renderList","status","$event","_toDisplayString","_hoisted_4","_hoisted_5","type","_hoisted_6","_unref","_hoisted_7","_createVNode","LoadingSpinner","_hoisted_8","BadgeList"],"mappings":"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"}