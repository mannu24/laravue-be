{"version":3,"file":"PostCard-ClOV3R8I.js","sources":["../../../node_modules/lucide-vue-next/dist/esm/icons/chevron-left.js","../../../node_modules/lucide-vue-next/dist/esm/icons/ellipsis-vertical.js","../../../resources/js/components/ui/alert-dialog/AlertDialogTrigger.vue","../../../resources/js/composables/useMentions.js","../../../resources/js/components/feed/PostForm.vue","../../../resources/js/composables/useBookmark.js","../../../resources/js/components/feed/PostCard.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeftIcon\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst EllipsisVertical = createLucideIcon(\"EllipsisVerticalIcon\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { EllipsisVertical as default };\n//# sourceMappingURL=ellipsis-vertical.js.map\n","<script setup>\nimport { AlertDialogTrigger } from 'radix-vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n});\n</script>\n\n<template>\n  <AlertDialogTrigger v-bind=\"props\">\n    <slot />\n  </AlertDialogTrigger>\n</template>\n","import { ref, watch } from 'vue';\nimport axios from 'axios';\nimport { useAuthStore } from '../stores/auth';\n\nexport function useMentions() {\n    const mentionSuggestions = ref([]);\n    const mentionQuery = ref('');\n    const isMentioning = ref(false);\n    const authStore = useAuthStore();\n    \n    const searchMentions = async (query) => {\n        if(query.length) {\n            try {\n                const response = await axios.get('/api/v1/posts/mention-suggestions?q='+query, authStore.config);\n                mentionSuggestions.value = response.data;\n            } catch (error) {\n                console.error('Mention search failed:', error);\n            }\n        }\n    };\n\n    watch(mentionQuery, (newVal) => {\n        if (newVal.length > 0) {\n            searchMentions(newVal);\n        } else {\n            mentionSuggestions.value = [];\n        }\n    });\n\n    return {\n        mentionSuggestions,\n        mentionQuery,\n        isMentioning,\n    };\n}","<script setup>\nimport axios from 'axios';\nimport { ref, onMounted, nextTick } from \"vue\";\nimport CustomInput from \"../elements/CustomInput.vue\";\nimport { useMentions } from '@/composables/useMentions';\nimport { useAuthStore } from '../../stores/auth';\nimport { Button } from '@/components/ui/button';\n\nconst { mentionSuggestions, mentionQuery } = useMentions();\nconst mentionState = ref({\n    active: false,\n    position: { node: null, offset: 0 },\n    query: '',\n});\nconst newPost = ref({\n    title: '',\n    content: '',\n    mentions: [],\n    media: []\n});\n\nconst emit = defineEmits(['fetch', 'close'])\nconst authStore = useAuthStore();\nconst deleted = ref([]);\nconst previews = ref([]);\nconst editor = ref(null);\nconst props = defineProps(['post']);\nconst expanded = ref(false);\nconst isSubmitting = ref(false);\nconst errors = ref({});\n\nconst expandCard = (val) => {\n    expanded.value = val;\n    if (!val) {\n        resetForm();\n    }\n};\n\nconst handleInput = () => {\n    newPost.value.content = editor.value.innerHTML;\n    detectMentionTrigger();\n};\n\nconst handleKeyDown = (e) => {\n    if (e.key === 'Backspace') {\n        const sel = window.getSelection();\n        if (!sel.rangeCount) return;\n\n        const range = sel.getRangeAt(0);\n        const mentionNode = getMentionBeforeCursor(range);\n\n        if (mentionNode) {\n            e.preventDefault();\n            removeMention(mentionNode);\n            return;\n        }\n    }\n    if (mentionState.value.active) {\n        if (['Escape', 'ArrowUp', 'ArrowDown', 'Enter'].includes(e.key)) {\n            e.preventDefault();\n        }\n    }\n};\n\nconst getMentionBeforeCursor = (range) => {\n    if (!range.collapsed) return null;\n\n    let node = range.startContainer;\n    let offset = range.startOffset;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        if (offset === 0) {\n            node = node.previousSibling;\n        } else {\n            return null;\n        }\n    }\n    else if (node.nodeType === Node.ELEMENT_NODE) {\n        if (offset > 0) {\n            node = node.childNodes[offset - 1];\n        } else {\n            node = node.previousSibling;\n        }\n    }\n\n    while (node) {\n        if (node.nodeType === Node.ELEMENT_NODE && node.classList.contains('mention')) {\n            return node;\n        }\n        if (node.nodeType === Node.TEXT_NODE && node.textContent === '\\u00A0') {\n            node = node.previousSibling;\n        } else {\n            break;\n        }\n    }\n\n    return null;\n};\n\nconst removeMention = (mentionNode) => {\n    const userId = parseInt(mentionNode.dataset.userId);\n\n    const parent = mentionNode.parentNode;\n    parent.removeChild(mentionNode);\n    console.log(parent.innerHTML);\n\n    newPost.value.mentions = newPost.value.mentions.filter(m => m.id !== userId);\n    newPost.value.content = parent.innerHTML;\n\n    const event = new Event('input', { bubbles: true });\n    editor.value.dispatchEvent(event);\n};\n\nconst detectMentionTrigger = () => {\n    const selection = window.getSelection();\n    if (!selection.rangeCount) return;\n\n    const range = selection.getRangeAt(0);\n    const textBeforeCursor = getTextBeforeCursor(range);\n    const atIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (atIndex > -1) {\n        const precedingChar = textBeforeCursor[atIndex - 1];\n        const validTrigger = !precedingChar || /\\s/.test(precedingChar);\n\n        if (validTrigger) {\n            mentionState.value = {\n                active: true,\n                position: {\n                    node: range.startContainer,\n                    offset: atIndex\n                },\n                query: textBeforeCursor.slice(atIndex + 1)\n            };\n            mentionQuery.value = mentionState.value.query;\n            return;\n        }\n    }\n    mentionState.value.active = false;\n};\n\nconst getTextBeforeCursor = (range) => {\n    let text = '';\n    let node = range.startContainer;\n    const offset = range.startOffset;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        text = node.textContent.slice(0, offset);\n    }\n    return text;\n};\n\nconst insertMention = (user) => {\n    if (!mentionState.value.active) return;\n\n    const range = new Range();\n    const startNode = mentionState.value.position.node;\n    const startOffset = mentionState.value.position.offset;\n\n    range.setStart(startNode, startOffset);\n    range.setEnd(window.getSelection().getRangeAt(0).endContainer, window.getSelection().getRangeAt(0).endOffset);\n\n    range.deleteContents();\n\n    const mentionEl = document.createElement('span');\n    mentionEl.className = 'mention-link';\n    mentionEl.contentEditable = 'false';\n    mentionEl.dataset.userId = user.id;\n    mentionEl.textContent = `@${user.username}`;\n\n    const space = document.createTextNode('\\u00A0');\n    const wrapper = document.createDocumentFragment();\n    wrapper.appendChild(mentionEl);\n    wrapper.appendChild(space);\n\n    range.insertNode(wrapper);\n\n    const newRange = new Range();\n    newRange.setStartAfter(space);\n    newRange.collapse(true);\n\n    const sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(newRange);\n\n    if (!newPost.value.mentions.some(m => m.id === user.id)) {\n        newPost.value.mentions.push({\n            id: user.id,\n            username: user.username\n        });\n    }\n\n    mentionState.value = { active: false, position: { node: null, offset: 0 }, query: '' };\n    mentionSuggestions.value = [];\n\n    const event = new Event('input', { bubbles: true });\n    editor.value.dispatchEvent(event);\n    editor.value.focus();\n};\n\nconst resetForm = () => {\n    newPost.value = {\n        title: '',\n        content: '',\n        mentions: [],\n        media: []\n    };\n    expanded.value = false\n    editor.value.innerHTML = '';\n    previews.value = [];\n};\n\nconst handle_media = (event) => {\n    const files = Array.from(event.target.files);\n    files.forEach((file) => {\n        const exists = newPost.value.media.some(\n            (existingFile) => existingFile.name === file.name && existingFile.size === file.size\n        );\n\n        if (!exists) {\n            newPost.value.media.push(file);\n            const url = URL.createObjectURL(file);\n            previews.value.push({\n                type: 'og',\n                url,\n            });\n        }\n    });\n    event.target.value = \"\";\n};\n\nconst submitPost = async () => {\n    try {\n        isSubmitting.value = true\n        const formData = new FormData();\n        formData.append(\"title\", newPost.value.title);\n        formData.append(\"content\", newPost.value.content);\n\n        newPost.value.mentions.forEach((obj, index) => {\n            formData.append(`mentions[${index}][id]`, obj.id);\n            formData.append(`mentions[${index}][username]`, obj.username);\n        });\n\n        newPost.value.media.forEach((file, index) => {\n            formData.append(`media[${index}]`, file);\n        });\n\n        deleted.value.forEach(e => {\n            formData.append('deleted[]',e)\n        })\n\n        if(props.post) {\n            formData.append(\"_method\", \"PUT\");\n            await axios.post(\"/api/v1/posts/\"+props.post.post_code, formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\",\n                    Authorization: `Bearer ${authStore.token}`\n                },\n            }).then((response) => {\n                isSubmitting.value = false\n                if (response.data.status == 'success') {\n                    resetForm();\n                    emit('fetch')\n                }\n                else {\n                    console.error(\"Error creating post:\", response.data.message);\n                }\n            }).catch((err) => {\n                isSubmitting.value = false\n            });\n        }\n        else {\n            await axios.post(\"/api/v1/posts\", formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\",\n                    Authorization: `Bearer ${authStore.token}`\n                },\n            }).then((response) => {\n                isSubmitting.value = false\n                if (response.data.status == 'success') {\n                    resetForm();\n                    emit('fetch')\n                }\n                else {\n                    console.error(\"Error creating post:\", response.data.message);\n                }\n            }).catch((err) => {\n                isSubmitting.value = false\n            });\n        }\n    } catch (error) {\n        console.error(\"Error creating post:\", error.response?.data || error.message);\n    }\n};\n\nconst removeimage = (id,type) => {\n    if(type!='url'){\n        // var temp_id = newPost.value.media.findIndex(i => i.id == id)\n        // var prev_id = previews.value.findIndex(i => i.id == id)\n        // newPost.value.media.splice(temp_id, 1)\n        previews.value.splice(id, 1)\n    }\n    else {\n        deleted.value.push(id)\n        previews.value.splice(id, 1)\n    }\n};\n\nconst closeModal = () => {\n    expanded.value = false\n    emit('close');\n};\n\nonMounted(() => {\n    if(props.post) {\n        expandCard(true)\n        newPost.value.post_code = props.post.post_code;\n        newPost.value.content = props.post.content;\n        newPost.value.title = props.post.title;\n        previews.value = props.post.media_urls.map(url => {return {type:'url', url: url}});\n        nextTick(() => {\n            editor.value.innerHTML = props.post.content;\n        });\n    }\n});\n</script>\n<template>\n    <div class=\"max-w-2xl mx-auto sm:px-6\" :class=\"props.post ? 'fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm' : ''\">\n        <div class=\"rounded-2xl shadow-xl dark:shadow-gray-900/50 transition-all duration-300 ease-in-out\"\n            :class=\"[\n                props.post ? 'bg-white dark:bg-gray-800 p-6 max-w-2xl border border-gray-200 dark:border-gray-700' : '',\n                !props.post && expanded ? 'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-6 shadow-lg' : '',\n                !props.post && !expanded ? 'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 shadow-md hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all' : ''\n            ]\">\n            <!-- Header -->\n            <div class=\"flex items-center gap-3 mb-4\">\n                <div class=\"flex-shrink-0\">\n                    <img v-if=\"authStore.user?.profile_photo\" :src=\"authStore.user?.profile_photo\" alt=\"User Avatar\"\n                        class=\"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\" />\n                    <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\" \n                        class=\"w-12 h-12 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700\" />\n                </div>\n                <Transition name=\"fade\" mode=\"out-in\">\n                    <div v-if=\"!expanded\" \n                        class=\"flex-1 rounded-xl h-12 px-4 bg-gray-100 dark:bg-gray-700 flex items-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-transparent hover:border-gray-300 dark:hover:border-gray-500\"\n                        @click=\"expandCard(true)\">\n                        <p class=\"text-gray-500 dark:text-gray-300 text-sm\">What's on your mind, {{ authStore.user?.name || authStore.user?.username }}?</p>\n                    </div>\n                    <div v-else class=\"flex-1 flex items-center justify-between\">\n                        <div>\n                            <h3 class=\"font-semibold text-gray-900 dark:text-white text-base\">{{ authStore.user?.name || authStore.user?.username }}</h3>\n                            <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">{{ $filters.date(new Date()) }}</p>\n                        </div>\n                        <button v-if=\"!props.post\" \n                            @click.stop=\"closeModal\"\n                            class=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\">\n                            <i class=\"fas fa-times text-sm\"></i>\n                        </button>\n                    </div>\n                </Transition>\n            </div>\n\n            <!-- Form Content -->\n            <form v-if=\"expanded\" class=\"space-y-4\" @submit.prevent=\"submitPost\">\n                <CustomInput \n                    type=\"text\" \n                    placeholder=\"Title of this post\" \n                    v-model=\"newPost.title\" \n                    :error=\"errors.title\"\n                    class=\"dark:bg-gray-900/50 dark:border-gray-600 dark:text-white\"\n                />\n                \n                <div class=\"relative\">\n                    <div \n                        ref=\"editor\" \n                        contenteditable=\"true\" \n                        @input=\"handleInput\" \n                        @keydown=\"handleKeyDown\" \n                        data-placeholder=\"Share your thoughts...\"\n                        class=\"w-full min-h-[120px] text-sm border rounded-xl px-4 py-3 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500/50 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 focus:border-green-500 dark:focus:border-green-500\"\n                    ></div>\n                    \n                    <!-- Mention Suggestions -->\n                    <Transition name=\"fade\">\n                        <div v-if=\"mentionSuggestions.length\" \n                            class=\"absolute bottom-full left-0 mb-2 w-full max-h-60 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl dark:shadow-gray-900/50 overflow-y-auto z-50\">\n                            <div v-for=\"user,i in mentionSuggestions\" :key=\"i\" \n                                @mousedown.prevent=\"insertMention(user)\"\n                                class=\"p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer flex items-center gap-3 transition-colors border-b border-gray-100 dark:border-gray-700/50 last:border-0\">\n                                <img v-if=\"user.avatar\" :src=\"user.avatar\" class=\"w-10 h-10 rounded-full object-cover ring-1 ring-gray-200 dark:ring-gray-700\">\n                                <i v-else class=\"fas fa-user-circle text-2xl text-gray-400 dark:text-gray-500\"></i>\n                                <div class=\"flex-1 min-w-0\">\n                                    <p class=\"font-medium text-sm text-gray-900 dark:text-white truncate\">{{ user.name }}</p>\n                                    <p class=\"text-xs text-gray-500 dark:text-gray-400 truncate\">@{{ user.username }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </Transition>\n                </div>\n\n                <!-- Media Previews -->\n                <div v-if=\"previews.length\" class=\"flex overflow-x-auto gap-3 pb-2 scrollbar-hide\">\n                    <TransitionGroup name=\"bounce\" appear>\n                        <div v-for=\"(file, index) in previews\" :key=\"index\" \n                            class=\"relative h-32 w-32 flex-shrink-0 group\">\n                            <button \n                                @click=\"removeimage(index, file.type)\" \n                                class=\"absolute -top-2 -right-2 w-6 h-6 flex items-center justify-center bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white rounded-full transition-all duration-200 hover:scale-110 z-10 shadow-lg\">\n                                <i class=\"fas fa-times text-xs\"></i>\n                            </button>\n                            <img :src=\"file.url\" \n                                class=\"h-full w-full rounded-xl object-cover border-2 border-gray-200 dark:border-gray-700 ring-1 ring-gray-100 dark:ring-gray-800\" \n                                alt=\"Image Preview\" />\n                        </div>\n                    </TransitionGroup>\n                </div>\n\n                <!-- Actions -->\n                <div class=\"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700\">\n                    <input type=\"file\" @change=\"handle_media\" accept=\"image/*\" class=\"hidden\" id=\"media_upload\" multiple>\n                    <label for=\"media_upload\" \n                        class=\"flex items-center gap-2 px-4 py-2 rounded-lg text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer transition-colors font-medium text-sm\">\n                        <i class=\"fas fa-paperclip\"></i>\n                        <span>Attach Media</span>\n                    </label>\n                    <Button \n                        type=\"submit\" \n                        class=\"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 dark:from-green-500 dark:to-green-600 dark:hover:from-green-600 dark:hover:to-green-700 text-white transition-all duration-300 shadow-md hover:shadow-lg px-6\" \n                        :disabled=\"isSubmitting\">\n                        <span v-if=\"!isSubmitting\">Submit Post</span>\n                        <span v-else class=\"flex items-center gap-2\">\n                            <i class=\"fas fa-spinner fa-spin\"></i>\n                            Posting...\n                        </span>\n                    </Button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n<style scoped>\n.mention-link {\n    --tw-text-opacity: 1;\n    color: rgb(42 97 70 / var(--tw-text-opacity, 1));\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    --tw-bg-opacity: 1;\n    background-color: rgb(209 235 223 / var(--tw-bg-opacity, 1));\n    border-radius: 0.25rem;\n}\n\n.dark .mention-link {\n    color: rgb(134 239 172 / var(--tw-text-opacity, 1));\n    background-color: rgb(20 83 45 / var(--tw-bg-opacity, 1));\n}\n\n[contenteditable][data-placeholder]:empty:before {\n    content: attr(data-placeholder);\n    color: rgb(156 163 175);\n    pointer-events: none;\n}\n\n.dark [contenteditable][data-placeholder]:empty:before {\n    color: rgb(107 114 128);\n}\n\n.scrollbar-hide {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n}\n\n.scrollbar-hide::-webkit-scrollbar {\n    display: none;\n}\n</style>","/**\r\n * Bookmark Composable\r\n * \r\n * Handles bookmark/unbookmark functionality for posts, questions, and projects.\r\n * Similar to useFollow but for bookmarks.\r\n */\r\n\r\nimport { ref } from 'vue'\r\nimport { useAuthStore } from '../stores/auth'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios'\r\n\r\n/**\r\n * Bookmark Composable\r\n * \r\n * @param {Object} recordData - The record data (post, question, or project)\r\n * @param {string} type - The type: 'post', 'question', or 'project'\r\n */\r\nexport function useBookmark(recordData = null, type = 'post') {\r\n    const authStore = useAuthStore()\r\n    const router = useRouter()\r\n    \r\n    // Instance-specific state\r\n    const isBookmarked = ref(false)\r\n    const bookmarkCount = ref(0)\r\n    const isLoading = ref(false)\r\n\r\n    // Initialize state if recordData is provided\r\n    if (recordData) {\r\n        isBookmarked.value = recordData.bookmarked ?? false\r\n        bookmarkCount.value = recordData.bookmark_count ?? 0\r\n    }\r\n\r\n    /**\r\n     * Toggle bookmark status\r\n     * \r\n     * @param {string} type - 'post', 'question', or 'project'\r\n     * @param {number} recordId - The ID of the record\r\n     * @returns {Promise<boolean>} - Returns true if bookmarked, false if unbookmarked\r\n     */\r\n    const toggleBookmark = async (type, recordId) => {\r\n        if (!authStore.isAuthenticated) {\r\n            router.push('/login')\r\n            return false\r\n        }\r\n\r\n        if (isLoading.value) {\r\n            return isBookmarked.value\r\n        }\r\n\r\n        isLoading.value = true\r\n\r\n        try {\r\n            const response = await axios.post(\r\n                '/api/v1/bookmarks/toggle',\r\n                {\r\n                    type: type,\r\n                    record_id: recordId,\r\n                },\r\n                authStore.config\r\n            )\r\n\r\n            if (response.data.status === 'success') {\r\n                isBookmarked.value = response.data.data.bookmarked\r\n                bookmarkCount.value = response.data.data.bookmark_count\r\n\r\n                // Optional: You can add toast notifications here if needed\r\n                // For now, we'll just update the state silently\r\n\r\n                return isBookmarked.value\r\n            } else {\r\n                return isBookmarked.value\r\n            }\r\n        } catch (error) {\r\n            console.error('Error toggling bookmark:', error)\r\n            return isBookmarked.value\r\n        } finally {\r\n            isLoading.value = false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check bookmark status\r\n     * \r\n     * @param {string} type - 'post', 'question', or 'project'\r\n     * @param {number} recordId - The ID of the record\r\n     */\r\n    const checkBookmarkStatus = async (type, recordId) => {\r\n        if (!authStore.isAuthenticated) {\r\n            return\r\n        }\r\n\r\n        try {\r\n            const response = await axios.get(\r\n                `/api/v1/bookmarks/check?type=${type}&record_id=${recordId}`,\r\n                authStore.config\r\n            )\r\n\r\n            if (response.data.status === 'success') {\r\n                isBookmarked.value = response.data.data.bookmarked\r\n                bookmarkCount.value = response.data.data.bookmark_count\r\n            }\r\n        } catch (error) {\r\n            console.error('Error checking bookmark status:', error)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initialize bookmark state from record data\r\n     * \r\n     * @param {Object} recordData - The record data\r\n     */\r\n    const initialize = (recordData) => {\r\n        if (recordData) {\r\n            isBookmarked.value = recordData.bookmarked ?? false\r\n            bookmarkCount.value = recordData.bookmark_count ?? 0\r\n        }\r\n    }\r\n\r\n    return {\r\n        isBookmarked,\r\n        bookmarkCount,\r\n        isLoading,\r\n        toggleBookmark,\r\n        checkBookmarkStatus,\r\n        initialize,\r\n    }\r\n}\r\n\r\n","<script setup>\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { LucideChevronLeft, LucideChevronRight, LucideEllipsisVertical } from 'lucide-vue-next';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport { CardFooter } from '@/components/ui/card';\nimport PostForm from './PostForm.vue';\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '../../stores/auth';\nimport { useBookmark } from '../../composables/useBookmark';\nimport { Bookmark } from 'lucide-vue-next';\n\nconst { post } = defineProps(['post'])\nconst element = ref(null)\nconst showDropdown = ref(false)\nconst isModalVisible = ref(false)\nconst emit = defineEmits(['load_more', 'fetch', 'delete_post', 'liked_action', 'share_url', 'bookmarked_action'])\nconst $router = useRouter();\nconst authStore = useAuthStore()\nconst post_url = computed(() => '/@' + post.user.username + '/' + post.post_code)\n\n// Bookmark functionality\nconst { isBookmarked, bookmarkCount, isLoading: isBookmarkLoading, toggleBookmark, initialize } = useBookmark(post, 'post')\n\n// Initialize bookmark state from post data\nwatch(() => post, (newPost) => {\n    if (newPost) {\n        initialize(newPost)\n    }\n}, { immediate: true })\n\n// Gallery popup state:\nconst isGalleryVisible = ref(false)\nconst selectedImageIndex = ref(0)\n\nconst handleOpenGallery = (index) => {\n    selectedImageIndex.value = index;\n    isGalleryVisible.value = true;\n};\n\nconst closeGallery = () => {\n    isGalleryVisible.value = false;\n};\n\nconst nextImage = () => {\n    if (selectedImageIndex.value < post.media_urls.length - 1) {\n        selectedImageIndex.value++;\n    }\n};\n\nconst prevImage = () => {\n    if (selectedImageIndex.value > 0) {\n        selectedImageIndex.value--;\n    }\n};\n\nconst errorFallbackImage = (event) => {\n    event.target.src = '/placeholder.svg'\n}\n\nconst errorFallbackUserImage = (event) => {\n    event.target.src = '/assets/front/images/user.png'\n}\n\nconst edit_post = () => {\n    isModalVisible.value = true\n    showDropdown.value = false\n}\n\nconst action = async (type) => {\n    if (type === 'delete') {\n        showDropdown.value = false\n        await axios.delete(`/api/v1/posts/${post.post_code}`, authStore.config).then(() => {\n            emit('delete_post', post.post_code)\n        })\n    } else {\n        showDropdown.value = false\n        await axios.get(`/api/v1/posts/duplicate/${post.post_code}`, authStore.config).then(() => {\n            emit('fetch')\n        })\n    }\n}\n\nconst renderContent = (content) => {\n    return content.replace(/@(\\w+)/g, '<a href=\"/@$1\">@$1</a>');\n};\n\nconst checkItem = () => {\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n                emit('load_more')\n            }\n        });\n    });\n    observer.observe(element.value);\n}\n\nconst handleLike = async () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n    }\n    else {\n        const response = await axios.get(`/api/v1/posts/like-unlike/${post.post_code}`, authStore.config)\n        if (response.data.status == 'success') {\n            emit('liked_action', [post.post_code, response.data.liked])\n        }\n        else {\n            alert('Something went wrong')\n        }\n    }\n};\n\nconst handleComment = () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n    }\n    else {\n        $router.push(post_url.value)\n    }\n};\n\nconst handleShare = () => {\n    emit('share_url', post_url.value)\n};\n\nconst handleBookmark = async () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n        return\n    }\n    \n    // Posts use 'post_code' as the unique identifier for bookmarks\n    const recordId = post.post_code\n    if (!recordId) {\n        console.error('Post code not found')\n        return\n    }\n    \n    const result = await toggleBookmark('post', recordId)\n    if (result !== undefined) {\n        emit('bookmarked_action', [recordId, result, bookmarkCount.value])\n    }\n};\n\nconst fetch = () => {\n    emit('fetch')\n}\n\nconst closeModal = () => {\n    isModalVisible.value = false\n};\n\nonMounted(() => {\n    if (element.value.classList.contains('last_item')) {\n        checkItem();\n    }\n});\n\n</script>\n<template>\n    <div ref=\"element\">\n        <article @click=\"$router.push(post_url)\" \n            class=\"group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm dark:shadow-gray-900/50 hover:shadow-xl dark:hover:shadow-gray-900 rounded-2xl overflow-hidden hover:cursor-pointer transition-all duration-300 ease-out hover:border-gray-300 dark:hover:border-gray-600\">\n            <!-- Header Section -->\n            <div class=\"flex items-start justify-between p-5 pb-4\">\n                <div class=\"flex items-center gap-3 flex-1 min-w-0\">\n                    <router-link :to=\"post.user.username != authStore.user?.username ? '/@' + post.user.username : '/dashboard'\" @click.stop class=\"flex-shrink-0\">\n                        <div class=\"relative\">\n                            <img v-if=\"post.user?.profile_photo\" :src=\"post.user?.profile_photo\" alt=\"User Avatar\"\n                                class=\"w-14 h-14 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700 transition-all duration-300 group-hover:ring-green-500/50\" \n                                @error=\"errorFallbackUserImage\" />\n                            <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\" \n                                class=\"w-14 h-14 rounded-full object-cover ring-2 ring-gray-200 dark:ring-gray-700 transition-all duration-300 group-hover:ring-green-500/50\" \n                                @error=\"errorFallbackUserImage\" />\n                        </div>\n                    </router-link>\n                    <router-link @click.stop :to=\"post.user.username != authStore.user?.username ? '/@' + post.user.username : '/dashboard'\" class=\"flex-1 min-w-0\">\n                        <div class=\"flex items-center gap-2\">\n                            <h4 class=\"font-semibold text-gray-900 dark:text-white text-base truncate group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors\">\n                                {{ post.user.name }}\n                            </h4>\n                            <span class=\"text-sm text-gray-500 dark:text-gray-400 truncate\">@{{ post.user.username }}</span>\n                        </div>\n                        <p class=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">{{ post.posted_at }}</p>\n                    </router-link>\n                </div>\n                <div class=\"relative inline-block ml-2 self-start\" v-if=\"authStore.isAuthenticated && post.owner\">\n                    <button @click.stop=\"showDropdown = !showDropdown\" \n                        class=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\">\n                        <LucideEllipsisVertical class=\"w-5 h-5\" />\n                    </button>\n                    <transition enter-active-class=\"transition ease-out duration-100\"\n                        enter-from-class=\"transform opacity-0 scale-95\" enter-to-class=\"transform opacity-100 scale-100\"\n                        leave-active-class=\"transition ease-in duration-75\"\n                        leave-from-class=\"transform opacity-100 scale-100\"\n                        leave-to-class=\"transform opacity-0 scale-95\">\n                        <div v-if=\"showDropdown\" @click.stop\n                            class=\"absolute right-0 top-full mt-2 z-20 w-40 origin-top-right bg-white dark:bg-gray-800 rounded-xl shadow-lg ring-1 ring-black/5 dark:ring-white/10 overflow-hidden\"\n                            role=\"menu\" aria-orientation=\"vertical\">\n                            <div role=\"none\">\n                                <button @click.stop=\"edit_post()\"\n                                    class=\"w-full text-left px-4 py-2.5 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors flex items-center gap-2\">\n                                    <i class=\"fas fa-pencil-alt text-xs\"></i>\n                                    Edit Post\n                                </button>\n                                <AlertDialog>\n                                    <AlertDialogTrigger as-child>\n                                        <button @click.stop\n                                            class=\"w-full text-left px-4 py-2.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-2\">\n                                            <i class=\"fas fa-trash text-xs\"></i>\n                                            Delete\n                                        </button>\n                                    </AlertDialogTrigger>\n                                    <AlertDialogContent>\n                                        <AlertDialogHeader>\n                                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                            <AlertDialogDescription>\n                                                This action cannot be undone. This will permanently delete your post.\n                                            </AlertDialogDescription>\n                                        </AlertDialogHeader>\n                                        <AlertDialogFooter>\n                                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                            <AlertDialogAction @click.stop=\"action('delete')\">Continue</AlertDialogAction>\n                                        </AlertDialogFooter>\n                                    </AlertDialogContent>\n                                </AlertDialog>\n                            </div>\n                        </div>\n                    </transition>\n                </div>\n            </div>\n\n            <!-- Content Section -->\n            <div class=\"px-5 pb-4\">\n                <h3 v-if=\"post.title\" \n                    class=\"font-bold text-xl text-gray-900 dark:text-white mb-3 leading-tight line-clamp-2\">\n                    {{ post.title }}\n                </h3>\n                <div class=\"prose prose-sm dark:prose-invert max-w-none mb-4\">\n                    <p class=\"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap break-words\" \n                       v-html=\"renderContent(post.content)\" \n                       @click.stop></p>\n                </div>\n\n                <!-- Media Gallery -->\n                <div v-if=\"post.media_urls && post.media_urls.length\" \n                     class=\"rounded-xl overflow-hidden mb-4 border border-gray-200 dark:border-gray-700\">\n                    <div v-if=\"post.media_urls.length === 1\" \n                         class=\"relative group/media\">\n                        <img :src=\"post.media_urls[0]\" alt=\"Post Media\"\n                            class=\"w-full h-auto max-h-[500px] object-cover cursor-pointer transition-transform duration-300 group-hover:scale-[1.02]\" \n                            @click.stop=\"handleOpenGallery(0)\"\n                            @error=\"errorFallbackImage\" />\n                    </div>\n                    <div v-else-if=\"post.media_urls.length === 2\" \n                         class=\"grid grid-cols-2 gap-1\">\n                        <template v-for=\"(media, index) in post.media_urls\" :key=\"media\">\n                            <img v-if=\"index < 2\" :src=\"media\" alt=\"Post Media\" \n                                class=\"w-full h-64 object-cover cursor-pointer transition-transform duration-300 hover:scale-105\" \n                                @click.stop=\"handleOpenGallery(index)\"\n                                @error=\"errorFallbackImage\" />\n                        </template>\n                    </div>\n                    <div v-else-if=\"post.media_urls.length === 3\" \n                         class=\"grid grid-cols-2 gap-1\">\n                        <template v-for=\"(media, index) in post.media_urls.slice(0, 2)\" :key=\"index\">\n                            <img :src=\"media\" alt=\"Post Media\" \n                                class=\"w-full h-48 object-cover cursor-pointer transition-transform duration-300 hover:scale-105\" \n                                @click.stop=\"handleOpenGallery(index)\"\n                                @error=\"errorFallbackImage\" />\n                        </template>\n                        <img :src=\"post.media_urls[2]\" alt=\"Post Media\" \n                            class=\"col-span-2 w-full h-64 object-cover cursor-pointer transition-transform duration-300 hover:scale-105\" \n                            @click.stop=\"handleOpenGallery(2)\"\n                            @error=\"errorFallbackImage\" />\n                    </div>\n                    <div v-else \n                         class=\"grid grid-cols-2 gap-1 relative\">\n                        <template v-for=\"(media, index) in post.media_urls.slice(0, 4)\" :key=\"index\">\n                            <div class=\"relative overflow-hidden\">\n                                <img :src=\"media\" alt=\"Post Media\" \n                                    class=\"w-full h-48 object-cover cursor-pointer transition-transform duration-300 hover:scale-110\" \n                                    @click.stop=\"handleOpenGallery(index)\"\n                                    @error=\"errorFallbackImage\" />\n                                <div v-if=\"index === 3 && post.media_urls.length > 4\"\n                                    class=\"absolute inset-0 bg-black/60 flex items-center justify-center text-white text-lg font-bold cursor-pointer backdrop-blur-sm\"\n                                    @click.stop=\"handleOpenGallery(3)\">\n                                    +{{ post.media_urls.length - 4 }} more\n                                </div>\n                            </div>\n                        </template>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Actions Footer -->\n            <div class=\"px-5 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50\">\n                <div class=\"flex items-center justify-between\">\n                    <div class=\"flex items-center gap-6\">\n                        <button @click.stop=\"handleLike\" \n                            :class=\"[\n                                'flex items-center gap-2 px-3 py-1.5 rounded-lg transition-all duration-200',\n                                post.liked \n                                    ? 'text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20' \n                                    : 'text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700/50'\n                            ]\">\n                            <i :class=\"post.liked ? 'fas fa-heart' : 'far fa-heart'\" class=\"text-base\"></i>\n                            <span class=\"text-sm font-medium\">{{ post.likes_count || 0 }}</span>\n                        </button>\n                        <button @click.stop=\"handleComment\" \n                            class=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all duration-200\">\n                            <i class=\"far fa-comment text-base\"></i>\n                            <span class=\"text-sm font-medium\">{{ post.comments_count || 0 }}</span>\n                        </button>\n                        <button @click.stop=\"handleShare\" \n                            class=\"flex items-center gap-2 px-3 py-1.5 rounded-lg text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all duration-200\">\n                            <i class=\"far fa-paper-plane text-base\"></i>\n                            <span class=\"text-sm font-medium\">{{ post.views_count || 0 }}</span>\n                        </button>\n                    </div>\n                    <div class=\"flex items-center gap-4\">\n                        <div class=\"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400\">\n                            <i class=\"far fa-eye\"></i>\n                            <span>{{ post.views_count || 0 }} views</span>\n                        </div>\n                        <!-- Bookmark/Save Button (Instagram style) -->\n                        <button \n                            @click.stop=\"handleBookmark\"\n                            :disabled=\"isBookmarkLoading || !authStore.isAuthenticated\"\n                            :class=\"[\n                                'p-2 rounded-lg transition-all duration-200',\n                                isBookmarked\n                                    ? 'text-yellow-600 dark:text-yellow-400 hover:bg-yellow-50 dark:hover:bg-yellow-900/20'\n                                    : 'text-gray-600 dark:text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 hover:bg-gray-100 dark:hover:bg-gray-700/50',\n                                isBookmarkLoading ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'\n                            ]\"\n                            :title=\"isBookmarked ? 'Remove from bookmarks' : 'Save to bookmarks'\"\n                        >\n                            <Bookmark \n                                :class=\"[\n                                    'w-5 h-5 transition-transform duration-200',\n                                    isBookmarked ? 'fill-current' : '',\n                                    isBookmarkLoading ? 'animate-pulse' : ''\n                                ]\"\n                            />\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </article>\n\n        <PostForm v-if=\"isModalVisible\" @close=\"closeModal\" @fetch=\"fetch\" :post=\"post\" />\n        \n        <Dialog v-model:open=\"isGalleryVisible\">\n            <DialogContent class=\"max-w-5xl p-0 border-0 bg-transparent shadow-2xl\">\n                <div class=\"relative bg-black/90 rounded-xl overflow-hidden\">\n                    <img :src=\"post.media_urls[selectedImageIndex]\" alt=\"Gallery image\" \n                        class=\"w-full h-auto max-h-[80vh] object-contain\" />\n                    <button v-if=\"selectedImageIndex > 0\" \n                        @click=\"prevImage\" \n                        class=\"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-200 hover:scale-110\">\n                        <LucideChevronLeft class=\"w-6 h-6\" />\n                    </button>\n                    <button v-if=\"selectedImageIndex < post.media_urls.length - 1\" \n                        @click=\"nextImage\" \n                        class=\"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-full transition-all duration-200 hover:scale-110\">\n                        <LucideChevronRight class=\"w-6 h-6\" />\n                    </button>\n                    <div class=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 backdrop-blur-sm text-white px-4 py-2 rounded-full text-sm\">\n                        {{ selectedImageIndex + 1 }} / {{ post.media_urls.length }}\n                    </div>\n                </div>\n            </DialogContent>\n        </Dialog>\n    </div>\n</template>\n<style scoped>\n.mention-link {\n    --tw-text-opacity: 1;\n    color: rgb(42 97 70 / var(--tw-text-opacity, 1));\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    --tw-bg-opacity: 1;\n    background-color: rgb(209 235 223 / var(--tw-bg-opacity, 1));\n    border-radius: 0.25rem;\n    transition: all 0.2s ease;\n}\n\n.mention-link:hover {\n    text-decoration: underline;\n    background-color: rgb(187 227 210 / var(--tw-bg-opacity, 1));\n}\n\n.dark .mention-link {\n    color: rgb(134 239 172 / var(--tw-text-opacity, 1));\n    background-color: rgb(20 83 45 / var(--tw-bg-opacity, 1));\n}\n\n.dark .mention-link:hover {\n    background-color: rgb(22 101 52 / var(--tw-bg-opacity, 1));\n}\n\n.line-clamp-2 {\n    display: -webkit-box;\n    line-clamp: 2;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n</style>\n"],"names":["ChevronLeft","createLucideIcon","EllipsisVertical","props","__props","_openBlock","_createBlock","_unref","_renderSlot","_ctx","useMentions","mentionSuggestions","ref","mentionQuery","isMentioning","authStore","useAuthStore","searchMentions","query","response","axios","error","watch","newVal","mentionState","newPost","emit","__emit","deleted","previews","editor","expanded","isSubmitting","errors","expandCard","val","handleInput","detectMentionTrigger","handleKeyDown","e","sel","range","mentionNode","getMentionBeforeCursor","removeMention","node","offset","userId","parent","m","event","selection","textBeforeCursor","getTextBeforeCursor","atIndex","precedingChar","text","insertMention","user","startNode","startOffset","mentionEl","space","wrapper","newRange","resetForm","handle_media","file","existingFile","url","submitPost","formData","obj","index","err","_a","removeimage","id","type","closeModal","onMounted","nextTick","_createElementBlock","_normalizeClass","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_4","_createVNode","_Transition","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","$filters","_hoisted_5","CustomInput","_cache","$event","_hoisted_9","_hoisted_10","_Fragment","_renderList","i","_withModifiers","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_TransitionGroup","_hoisted_20","Button","_hoisted_22","useBookmark","recordData","router","useRouter","isBookmarked","bookmarkCount","isLoading","recordId","element","showDropdown","isModalVisible","$router","post_url","computed","isBookmarkLoading","toggleBookmark","initialize","isGalleryVisible","selectedImageIndex","handleOpenGallery","nextImage","prevImage","errorFallbackImage","errorFallbackUserImage","edit_post","action","renderContent","content","checkItem","entries","entry","handleLike","handleComment","handleShare","handleBookmark","result","fetch","_component_router_link","_hoisted_3","_b","LucideEllipsisVertical","AlertDialog","AlertDialogTrigger","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","_hoisted_11","_hoisted_12","_hoisted_18","media","_hoisted_23","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","Bookmark","PostForm","Dialog","DialogContent","_hoisted_34","LucideChevronLeft","LucideChevronRight","_hoisted_36"],"mappings":"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","x_google_ignoreList":[0,1]}