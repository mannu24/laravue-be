import{j as V,p,J as Q,q as k,I as y,ae as l,k as U,b as B,d as a,f as C,x as E,w as n,u as s,H as r,D as u,G as S,C as x,A as T,o as $}from"./app-DI7wrdgO.js";import{_ as A}from"./Card-gMLg_cpK.js";import{_ as D}from"./CardContent-Di6FSwIo.js";import{_ as P}from"./CardDescription-Cw2JmaYy.js";import{_ as F}from"./CardFooter-D4mS-9X3.js";import{_ as N,a as I}from"./CardTitle-Co8pmJYS.js";import{_ as j}from"./Input-BAuh1Qyv.js";import{_ as f}from"./Label-DLgIb2Vx.js";import{_ as z,a as H}from"./TagInput-CV5TsJnQ.js";import{_ as M,a as R}from"./BackNavigator-demGc8h9.js";import"./index-DffnKYK4.js";import"./DialogContent-B6PFM62Y.js";import"./DialogFooter-DNDlH1Bn.js";import"./DialogTitle-CAeRZ2aK.js";import"./index-DcI6fUKf.js";const G={class:"max-w-3xl mx-auto py-8 px-4"},J={class:"space-y-2"},Y={class:"space-y-2"},K={class:"space-y-2"},pt={__name:"EditAskedQuestion",setup(L){const c=V(),v=U(),_=Q(),d=p(!1),m=p(!1),w=[{name:"Questions",href:"/qna"},{name:"Edit",href:`/qna/edit/${_.params.slug}`}],e=p({title:"",content:"",tags:[],id:null});k(async()=>{await h()});const h=async()=>{try{const t=(await y.get(`/api/v1/questions/${_.params.slug}`,{headers:{Authorization:`Bearer ${c.token}`}})).data.data.question;e.value={id:t.id,title:t.title,content:t.content,tags:(t.tags||[]).map(i=>i.name)}}catch(o){console.error("Error fetching question:",o),l({variant:"destructive",description:"Failed to load question. Please try again."}),v.push("/qna")}},g=async()=>{if(q())try{d.value=!0;const o=new FormData;o.append("title",e.value.title),o.append("content",e.value.content),o.append("_method","PUT"),e.value.tags.forEach((i,O)=>{o.append("tags[]",i)});const t=await y.post(`/api/v1/questions/${e.value.id}`,o,{headers:{Authorization:`Bearer ${c.token}`,"Content-Type":"multipart/form-data"}});v.push(`/qna/${t.data.data.slug}`),l({description:"Your question has been successfully updated."})}catch(o){console.error("Error updating question:",o),l({variant:"destructive",description:"Failed to update question. Please try again."})}finally{d.value=!1}},q=()=>e.value.title.length<15?(l({variant:"destructive",description:"Title should be at least 15 characters long."}),!1):e.value.content.length<30?(l({variant:"destructive",description:"Question details should be at least 30 characters long."}),!1):e.value.tags.length<1?(l({variant:"destructive",description:"At least 1 Tag is required!"}),!1):!0,b=()=>{q()&&(m.value=!0)};return(o,t)=>($(),B("div",G,[a(M,{items:w}),a(s(A),{class:"overflow-hidden"},{default:n(()=>[a(s(N),null,{default:n(()=>[a(s(I),null,{default:n(()=>[...t[4]||(t[4]=[r("Edit Question",-1)])]),_:1}),a(s(P),null,{default:n(()=>[...t[5]||(t[5]=[r("Update your question details",-1)])]),_:1})]),_:1}),a(s(D),null,{default:n(()=>[u("form",{onSubmit:S(g,["prevent"]),class:"space-y-6"},[u("div",J,[a(s(f),{for:"title"},{default:n(()=>[...t[6]||(t[6]=[r("Question Title",-1)])]),_:1}),a(s(j),{modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=i=>e.value.title=i),id:"title",type:"text",placeholder:"e.g., How do I center a div in CSS?",required:""},null,8,["modelValue"]),t[7]||(t[7]=u("p",{class:"text-sm text-muted-foreground"}," Be specific and imagine you're updating a question for others. ",-1))]),u("div",Y,[a(s(f),{for:"content"},{default:n(()=>[...t[8]||(t[8]=[r("Question Details",-1)])]),_:1}),a(R,{modelValue:e.value.content,"onUpdate:modelValue":t[1]||(t[1]=i=>e.value.content=i),placeholder:"Update the context about your question...","min-height":300},null,8,["modelValue"]),t[9]||(t[9]=u("p",{class:"text-sm text-muted-foreground"}," Include all the information someone would need to understand your updated question. ",-1))]),u("div",K,[a(s(f),null,{default:n(()=>[...t[10]||(t[10]=[r("Tags",-1)])]),_:1}),a(z,{modelValue:e.value.tags,"onUpdate:modelValue":t[2]||(t[2]=i=>e.value.tags=i),"max-tags":5,placeholder:"Update up to 5 tags"},null,8,["modelValue"]),t[11]||(t[11]=u("p",{class:"text-sm text-muted-foreground"}," Update up to 5 tags to describe what your question is about. ",-1))])],32)]),_:1}),a(s(F),{class:"flex justify-between"},{default:n(()=>[a(s(x),{variant:"outline",onClick:b},{default:n(()=>[...t[12]||(t[12]=[r(" Preview ",-1)])]),_:1}),a(s(x),{onClick:g,disabled:d.value},{default:n(()=>[r(T(d.value?"Updating...":"Update Question"),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),m.value?($(),C(H,{key:0,question:e.value,onClose:t[3]||(t[3]=i=>m.value=!1)},null,8,["question"])):E("",!0)]))}};export{pt as default};
//# sourceMappingURL=EditAskedQuestion-ycAs6VNH.js.map
