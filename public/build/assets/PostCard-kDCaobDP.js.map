{"version":3,"file":"PostCard-kDCaobDP.js","sources":["../../../node_modules/lucide-vue-next/dist/esm/icons/chevron-left.js","../../../node_modules/lucide-vue-next/dist/esm/icons/chevron-right.js","../../../resources/js/components/ui/alert-dialog/AlertDialog.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogAction.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogCancel.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogContent.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogDescription.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogFooter.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogHeader.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogTitle.vue","../../../resources/js/components/ui/alert-dialog/AlertDialogTrigger.vue","../../../resources/js/composables/useMentions.js","../../../resources/js/components/feed/PostForm.vue","../../../resources/js/components/feed/PostCard.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeftIcon\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-vue-next v0.474.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRightIcon\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","<script setup>\nimport { AlertDialogRoot, useForwardPropsEmits } from 'radix-vue';\r\n\r\nconst props = defineProps({\r\n  open: { type: Boolean, required: false },\r\n  defaultOpen: { type: Boolean, required: false },\r\n});\r\nconst emits = defineEmits(['update:open']);\r\n\r\nconst forwarded = useForwardPropsEmits(props, emits);\n</script>\n\n<template>\n  <AlertDialogRoot v-bind=\"forwarded\">\n    <slot />\n  </AlertDialogRoot>\n</template>\n","<script setup>\nimport { buttonVariants } from '/resources/js/components/ui/button';\r\nimport { cn } from '/resources/js/lib/utils';\r\nimport { AlertDialogAction } from 'radix-vue';\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n  class: { type: null, required: false },\r\n});\r\n\r\nconst delegatedProps = computed(() => {\r\n  const { class: _, ...delegated } = props;\r\n\r\n  return delegated;\r\n});\n</script>\n\n<template>\n  <AlertDialogAction\n    v-bind=\"delegatedProps\"\n    :class=\"cn(buttonVariants(), props.class)\"\n  >\n    <slot />\n  </AlertDialogAction>\n</template>\n","<script setup>\nimport { buttonVariants } from '/resources/js/components/ui/button';\r\nimport { cn } from '/resources/js/lib/utils';\r\nimport { AlertDialogCancel } from 'radix-vue';\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n  class: { type: null, required: false },\r\n});\r\n\r\nconst delegatedProps = computed(() => {\r\n  const { class: _, ...delegated } = props;\r\n\r\n  return delegated;\r\n});\n</script>\n\n<template>\n  <AlertDialogCancel\n    v-bind=\"delegatedProps\"\n    :class=\"\n      cn(buttonVariants({ variant: 'outline' }), 'mt-2 sm:mt-0', props.class)\n    \"\n  >\n    <slot />\n  </AlertDialogCancel>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\r\nimport {\r\n  AlertDialogContent,\r\n  AlertDialogOverlay,\r\n  AlertDialogPortal,\r\n  useForwardPropsEmits,\r\n} from 'radix-vue';\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  forceMount: { type: Boolean, required: false },\r\n  trapFocus: { type: Boolean, required: false },\r\n  disableOutsidePointerEvents: { type: Boolean, required: false },\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n  class: { type: null, required: false },\r\n});\r\nconst emits = defineEmits([\r\n  'escapeKeyDown',\r\n  'pointerDownOutside',\r\n  'focusOutside',\r\n  'interactOutside',\r\n  'openAutoFocus',\r\n  'closeAutoFocus',\r\n]);\r\n\r\nconst delegatedProps = computed(() => {\r\n  const { class: _, ...delegated } = props;\r\n\r\n  return delegated;\r\n});\r\n\r\nconst forwarded = useForwardPropsEmits(delegatedProps, emits);\n</script>\n\n<template>\n  <AlertDialogPortal>\n    <AlertDialogOverlay\n      class=\"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\"\n    />\n    <AlertDialogContent\n      v-bind=\"forwarded\"\n      :class=\"\n        cn(\n          'fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg',\n          props.class,\n        )\n      \"\n    >\n      <slot />\n    </AlertDialogContent>\n  </AlertDialogPortal>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\r\nimport { AlertDialogDescription } from 'radix-vue';\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n  class: { type: null, required: false },\r\n});\r\n\r\nconst delegatedProps = computed(() => {\r\n  const { class: _, ...delegated } = props;\r\n\r\n  return delegated;\r\n});\n</script>\n\n<template>\n  <AlertDialogDescription\n    v-bind=\"delegatedProps\"\n    :class=\"cn('text-sm text-muted-foreground', props.class)\"\n  >\n    <slot />\n  </AlertDialogDescription>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\r\n\r\nconst props = defineProps({\r\n  class: { type: null, required: false },\r\n});\n</script>\n\n<template>\n  <div\n    :class=\"\n      cn(\n        'flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2',\n        props.class,\n      )\n    \"\n  >\n    <slot />\n  </div>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\r\n\r\nconst props = defineProps({\r\n  class: { type: null, required: false },\r\n});\n</script>\n\n<template>\n  <div\n    :class=\"cn('flex flex-col gap-y-2 text-center sm:text-left', props.class)\"\n  >\n    <slot />\n  </div>\n</template>\n","<script setup>\nimport { cn } from '/resources/js/lib/utils';\r\nimport { AlertDialogTitle } from 'radix-vue';\r\nimport { computed } from 'vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n  class: { type: null, required: false },\r\n});\r\n\r\nconst delegatedProps = computed(() => {\r\n  const { class: _, ...delegated } = props;\r\n\r\n  return delegated;\r\n});\n</script>\n\n<template>\n  <AlertDialogTitle\n    v-bind=\"delegatedProps\"\n    :class=\"cn('text-lg font-semibold', props.class)\"\n  >\n    <slot />\n  </AlertDialogTitle>\n</template>\n","<script setup>\nimport { AlertDialogTrigger } from 'radix-vue';\r\n\r\nconst props = defineProps({\r\n  asChild: { type: Boolean, required: false },\r\n  as: { type: null, required: false },\r\n});\n</script>\n\n<template>\n  <AlertDialogTrigger v-bind=\"props\">\n    <slot />\n  </AlertDialogTrigger>\n</template>\n","import { ref, watch } from 'vue';\nimport axios from 'axios';\nimport { useAuthStore } from '../stores/auth';\n\nexport function useMentions() {\n    const mentionSuggestions = ref([]);\n    const mentionQuery = ref('');\n    const isMentioning = ref(false);\n    const authStore = useAuthStore();\n    \n    const searchMentions = async (query) => {\n        if(query.length) {\n            try {\n                const response = await axios.get('/api/v1/posts/mention-suggestions?q='+query, authStore.config);\n                mentionSuggestions.value = response.data;\n            } catch (error) {\n                console.error('Mention search failed:', error);\n            }\n        }\n    };\n\n    watch(mentionQuery, (newVal) => {\n        if (newVal.length > 0) {\n            searchMentions(newVal);\n        } else {\n            mentionSuggestions.value = [];\n        }\n    });\n\n    return {\n        mentionSuggestions,\n        mentionQuery,\n        isMentioning,\n    };\n}","<script setup>\nimport axios from 'axios';\nimport { ref, onMounted, nextTick } from \"vue\";\nimport CustomInput from \"../elements/CustomInput.vue\";\nimport { useMentions } from '@/composables/useMentions';\nimport { useAuthStore } from '../../stores/auth';\nimport { Button } from '@/components/ui/button';\n\nconst { mentionSuggestions, mentionQuery } = useMentions();\nconst mentionState = ref({\n    active: false,\n    position: { node: null, offset: 0 },\n    query: '',\n});\nconst newPost = ref({\n    title: '',\n    content: '',\n    mentions: [],\n    media: []\n});\n\nconst emit = defineEmits(['fetch', 'close'])\nconst authStore = useAuthStore();\nconst deleted = ref([]);\nconst previews = ref([]);\nconst editor = ref(null);\nconst props = defineProps(['post']);\nconst expanded = ref(false);\nconst isSubmitting = ref(false);\nconst errors = ref({});\n\nconst expandCard = (val) => {\n    expanded.value = val;\n    if (!val) {\n        resetForm();\n    }\n};\n\nconst handleInput = () => {\n    newPost.value.content = editor.value.innerHTML;\n    detectMentionTrigger();\n};\n\nconst handleKeyDown = (e) => {\n    if (e.key === 'Backspace') {\n        const sel = window.getSelection();\n        if (!sel.rangeCount) return;\n\n        const range = sel.getRangeAt(0);\n        const mentionNode = getMentionBeforeCursor(range);\n\n        if (mentionNode) {\n            e.preventDefault();\n            removeMention(mentionNode);\n            return;\n        }\n    }\n    if (mentionState.value.active) {\n        if (['Escape', 'ArrowUp', 'ArrowDown', 'Enter'].includes(e.key)) {\n            e.preventDefault();\n        }\n    }\n};\n\nconst getMentionBeforeCursor = (range) => {\n    if (!range.collapsed) return null;\n\n    let node = range.startContainer;\n    let offset = range.startOffset;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        if (offset === 0) {\n            node = node.previousSibling;\n        } else {\n            return null;\n        }\n    }\n    else if (node.nodeType === Node.ELEMENT_NODE) {\n        if (offset > 0) {\n            node = node.childNodes[offset - 1];\n        } else {\n            node = node.previousSibling;\n        }\n    }\n\n    while (node) {\n        if (node.nodeType === Node.ELEMENT_NODE && node.classList.contains('mention')) {\n            return node;\n        }\n        if (node.nodeType === Node.TEXT_NODE && node.textContent === '\\u00A0') {\n            node = node.previousSibling;\n        } else {\n            break;\n        }\n    }\n\n    return null;\n};\n\nconst removeMention = (mentionNode) => {\n    const userId = parseInt(mentionNode.dataset.userId);\n\n    const parent = mentionNode.parentNode;\n    parent.removeChild(mentionNode);\n    console.log(parent.innerHTML);\n\n    newPost.value.mentions = newPost.value.mentions.filter(m => m.id !== userId);\n    newPost.value.content = parent.innerHTML;\n\n    const event = new Event('input', { bubbles: true });\n    editor.value.dispatchEvent(event);\n};\n\nconst detectMentionTrigger = () => {\n    const selection = window.getSelection();\n    if (!selection.rangeCount) return;\n\n    const range = selection.getRangeAt(0);\n    const textBeforeCursor = getTextBeforeCursor(range);\n    const atIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (atIndex > -1) {\n        const precedingChar = textBeforeCursor[atIndex - 1];\n        const validTrigger = !precedingChar || /\\s/.test(precedingChar);\n\n        if (validTrigger) {\n            mentionState.value = {\n                active: true,\n                position: {\n                    node: range.startContainer,\n                    offset: atIndex\n                },\n                query: textBeforeCursor.slice(atIndex + 1)\n            };\n            mentionQuery.value = mentionState.value.query;\n            return;\n        }\n    }\n    mentionState.value.active = false;\n};\n\nconst getTextBeforeCursor = (range) => {\n    let text = '';\n    let node = range.startContainer;\n    const offset = range.startOffset;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n        text = node.textContent.slice(0, offset);\n    }\n    return text;\n};\n\nconst insertMention = (user) => {\n    if (!mentionState.value.active) return;\n\n    const range = new Range();\n    const startNode = mentionState.value.position.node;\n    const startOffset = mentionState.value.position.offset;\n\n    range.setStart(startNode, startOffset);\n    range.setEnd(window.getSelection().getRangeAt(0).endContainer, window.getSelection().getRangeAt(0).endOffset);\n\n    range.deleteContents();\n\n    const mentionEl = document.createElement('span');\n    mentionEl.className = 'mention-link';\n    mentionEl.contentEditable = 'false';\n    mentionEl.dataset.userId = user.id;\n    mentionEl.textContent = `@${user.username}`;\n\n    const space = document.createTextNode('\\u00A0');\n    const wrapper = document.createDocumentFragment();\n    wrapper.appendChild(mentionEl);\n    wrapper.appendChild(space);\n\n    range.insertNode(wrapper);\n\n    const newRange = new Range();\n    newRange.setStartAfter(space);\n    newRange.collapse(true);\n\n    const sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(newRange);\n\n    if (!newPost.value.mentions.some(m => m.id === user.id)) {\n        newPost.value.mentions.push({\n            id: user.id,\n            username: user.username\n        });\n    }\n\n    mentionState.value = { active: false, position: { node: null, offset: 0 }, query: '' };\n    mentionSuggestions.value = [];\n\n    const event = new Event('input', { bubbles: true });\n    editor.value.dispatchEvent(event);\n    editor.value.focus();\n};\n\nconst resetForm = () => {\n    newPost.value = {\n        title: '',\n        content: '',\n        mentions: [],\n        media: []\n    };\n    expanded.value = false\n    editor.value.innerHTML = '';\n    previews.value = [];\n};\n\nconst handle_media = (event) => {\n    const files = Array.from(event.target.files);\n    files.forEach((file) => {\n        const exists = newPost.value.media.some(\n            (existingFile) => existingFile.name === file.name && existingFile.size === file.size\n        );\n\n        if (!exists) {\n            newPost.value.media.push(file);\n            const url = URL.createObjectURL(file);\n            previews.value.push({\n                type: 'og',\n                url,\n            });\n        }\n    });\n    event.target.value = \"\";\n};\n\nconst submitPost = async () => {\n    try {\n        isSubmitting.value = true\n        const formData = new FormData();\n        formData.append(\"title\", newPost.value.title);\n        formData.append(\"content\", newPost.value.content);\n\n        newPost.value.mentions.forEach((obj, index) => {\n            formData.append(`mentions[${index}][id]`, obj.id);\n            formData.append(`mentions[${index}][username]`, obj.username);\n        });\n\n        newPost.value.media.forEach((file, index) => {\n            formData.append(`media[${index}]`, file);\n        });\n\n        deleted.value.forEach(e => {\n            formData.append('deleted[]',e)\n        })\n\n        if(props.post) {\n            formData.append(\"_method\", \"PUT\");\n            await axios.post(\"/api/v1/posts/\"+props.post.post_code, formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\",\n                    Authorization: `Bearer ${authStore.token}`\n                },\n            }).then((response) => {\n                isSubmitting.value = false\n                if (response.data.status == 'success') {\n                    resetForm();\n                    emit('fetch')\n                }\n                else {\n                    console.error(\"Error creating post:\", response.data.message);\n                }\n            }).catch((err) => {\n                isSubmitting.value = false\n            });\n        }\n        else {\n            await axios.post(\"/api/v1/posts\", formData, {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\",\n                    Authorization: `Bearer ${authStore.token}`\n                },\n            }).then((response) => {\n                isSubmitting.value = false\n                if (response.data.status == 'success') {\n                    resetForm();\n                    emit('fetch')\n                }\n                else {\n                    console.error(\"Error creating post:\", response.data.message);\n                }\n            }).catch((err) => {\n                isSubmitting.value = false\n            });\n        }\n    } catch (error) {\n        console.error(\"Error creating post:\", error.response?.data || error.message);\n    }\n};\n\nconst removeimage = (id,type) => {\n    if(type!='url'){\n        // var temp_id = newPost.value.media.findIndex(i => i.id == id)\n        // var prev_id = previews.value.findIndex(i => i.id == id)\n        // newPost.value.media.splice(temp_id, 1)\n        previews.value.splice(id, 1)\n    }\n    else {\n        deleted.value.push(id)\n        previews.value.splice(id, 1)\n    }\n};\n\nconst closeModal = () => {\n    expanded.value = false\n    emit('close');\n};\n\nonMounted(() => {\n    if(props.post) {\n        expandCard(true)\n        newPost.value.post_code = props.post.post_code;\n        newPost.value.content = props.post.content;\n        newPost.value.title = props.post.title;\n        previews.value = props.post.media_urls.map(url => {return {type:'url', url: url}});\n        nextTick(() => {\n            editor.value.innerHTML = props.post.content;\n        });\n    }\n});\n</script>\n<template>\n    <div :class=\"props.post ? 'fixed inset-0 z-50 flex items-center justify-center bg-black/60' : 'none'\">\n        <!-- v-click-outside=\"{ closeCondition: () => expanded, closeAction: () => expandCard(false) }\" -->\n        <div class=\"mx-auto w-full rounded-lg shadow-lg p-4 transition-all duration-300 ease-in-out\"\n            :class=\"{ 'max-w-xl h-auto': expanded, 'max-w-lg h-20': !expanded, 'bg-gray-200 hover:bg-gray-300/40 dark:bg-gray-900/80 shadow-md dark:hover:bg-gray-900' : !props.post, 'bg-gray-200 dark:bg-gray-900 shadow-md' : props.post }\">\n            <div class=\"flex items-center\">\n                <img v-if=\"authStore.user?.profile_photo\" :src=\"authStore.user?.profile_photo\" alt=\"User Avatar\"\n                    class=\"w-10 h-10 rounded-full mr-3\" />\n                <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\" class=\"w-10 h-10 rounded-full mr-3\" />\n                <Transition name=\"fade\" mode=\"out-in\">\n                    <div class=\"w-full rounded-full h-10 px-4 bg-gray-300 dark:bg-gray-800/80 flex items-center cursor-pointer\"\n                        @click=\"expandCard(true)\" v-if=\"!expanded\">\n                        <p class=\"text-gray-600 dark:text-gray-200\">What's on your mind?</p>\n                    </div>\n                    <div class=\"w-full flex justify-between\" v-else>\n                        <div class=\"dark:text-white text-gray-800\">\n                            <h2 class=\"font-semibold mb-0\">{{ authStore.user.username }}</h2>\n                            <p class=\"text-xs text-gray-500 dark:text-gray-400\">{{ $filters.date(new Date()) }}</p>\n                        </div>\n                        <p :title=\"'Close'\" class=\"icon-hover w-8 h-8 rounded-full flex icon-hover text-gray-100 dark:text-gray-400 bg-black/10 hover:bg-black/20 dark:bg-white/10 dark:hover:bg-white/20 dark:hover:text-white hover:text-black-900\" @click.stop=\"closeModal\">\n                            <i class=\"fas fa-times m-auto fa-lg\"></i>\n                        </p>\n                    </div>\n                </Transition>\n            </div>\n            <form v-if=\"expanded\" class=\"mt-7\" @submit.prevent=\"submitPost\">\n                <CustomInput type=\"text\" placeholder=\"Title of this post\" v-model=\"newPost.title\" :error=\"errors.title\" />\n                <div class=\"relative\">\n                    <div ref=\"editor\" contenteditable=\"true\" @input=\"handleInput\" @keydown=\"handleKeyDown\" placeholder=\"What's on your mind?\"\n                        class=\"w-full dark:text-white text-gray-800 placeholder:text-slate-400 min-h-[100px] text-sm border rounded-md px-3 py-2 transition duration-300 ease focus:outline-none shadow-sm bg-transparent text-slate-700 border-gray-300 hover:border-gray-400/50 focus:border-gray-400 dark:border-slate-700 dark:hover:border-slate-600 dark:focus:border-slate-500\"\n                    ></div>\n                    <Transition name=\"fade\">\n                        <div v-if=\"mentionSuggestions.length\" class=\"absolute bottom-full left-0 w-full max-h-60 bg-white border rounded-lg shadow-lg overflow-y-auto z-50\">\n                            <div v-for=\"user,i in mentionSuggestions\" :key=\"i\" @mousedown.prevent=\"insertMention(user)\"\n                                class=\"p-2 hover:bg-gray-100 cursor-pointer flex items-center gap-2\">\n                                <img v-if=\"user.avatar\" :src=\"user.avatar\" class=\"w-8 h-8 rounded-full object-cover\">\n                                <i v-else class=\"fas fa-user-circle fa-2x text-black/50\"></i>\n                                <div>\n                                    <p class=\"font-medium text-sm\">{{ user.name }}</p>\n                                    <p class=\"text-xs text-gray-500\">@{{ user.username }}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </Transition>\n                </div>\n                <div class=\"media-previews flex overflow-x-auto space-x-4\" :class=\"{'pt-5':previews.length}\">\n                    <TransitionGroup name=\"bounce\" appear>\n                        <div v-for=\"(file, index) in previews\" :key=\"index\" class=\"h-32 w-32 flex-shrink-0 relative mb-1\">\n                            <div @click=\"removeimage(index, file.type)\" class=\"w-6 h-6 flex absolute -top-3 -right-3 bg-vue/80 cursor-pointer hover:bg-laravel/70 transition-all duration-300 rounded-full text-white\">\n                                <i class=\"fas fa-times m-auto fa-sm\"></i>\n                            </div>\n                            <img :src=\"file.url\" class=\"h-full w-full rounded object-cover\" alt=\"Image Preview\" />\n                            <!-- <video v-if=\"typeof file == 'string'\" class=\"h-32 w-32 rounded object-cover\" controls>\n                                <source :src=\"file\" />\n                                Your browser does not support the video tag.\n                            </video>\n                            <video v-else-if=\"file.type.startsWith('video/')\" class=\"h-32 w-32 rounded object-cover\" controls>\n                                <source :src=\"file.url\" :type=\"file.type\" />\n                                Your browser does not support the video tag.\n                            </video> -->\n                        </div>\n                    </TransitionGroup>\n                </div>\n                <div class=\"mt-2 flex justify-around\">\n                    <input type=\"file\" @change=\"handle_media\" accept=\"image/*\" class=\"hidden\" id=\"media_upload\" multiple>\n                    <label for=\"media_upload\" class=\"flex items-center gap-2 text-green-600/60 hover:text-green-600/80 cursor-pointer\">\n                        <i class=\"fas fa-paperclip\"></i>\n                        <span>Attach Media</span>\n                    </label>\n                    <Button type=\"submit\" class=\"bg-vue/80 hover:bg-vue text-white transition-all duration-300\" :disabled=\"isSubmitting\">\n                        Submit Post\n                    </Button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n<style>\n.mention-link {\n    --tw-text-opacity: 1;\n    color: rgb(42 97 70 / var(--tw-text-opacity, 1));\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    --tw-bg-opacity: 1;\n    background-color: rgb(209 235 223 / var(--tw-bg-opacity, 1));\n    border-radius: 0.25rem;\n}\n</style>","<script setup>\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { LucideChevronLeft, LucideChevronRight, LucideEllipsisVertical } from 'lucide-vue-next';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport { CardFooter } from '@/components/ui/card';\nimport PostForm from './PostForm.vue';\nimport { computed, onMounted, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useAuthStore } from '../../stores/auth';\n\nconst { post } = defineProps(['post'])\nconst element = ref(null)\nconst showDropdown = ref(false)\nconst isModalVisible = ref(false)\nconst emit = defineEmits(['load_more', 'fetch', 'delete_post', 'liked_action', 'share_url'])\nconst $router = useRouter();\nconst authStore = useAuthStore()\nconst post_url = computed(() => '/@' + post.user.username + '/' + post.post_code)\n\n// Gallery popup state:\nconst isGalleryVisible = ref(false)\nconst selectedImageIndex = ref(0)\n\nconst handleOpenGallery = (index) => {\n    selectedImageIndex.value = index;\n    isGalleryVisible.value = true;\n};\n\nconst closeGallery = () => {\n    isGalleryVisible.value = false;\n};\n\nconst nextImage = () => {\n    if (selectedImageIndex.value < post.media_urls.length - 1) {\n        selectedImageIndex.value++;\n    }\n};\n\nconst prevImage = () => {\n    if (selectedImageIndex.value > 0) {\n        selectedImageIndex.value--;\n    }\n};\n\nconst errorFallbackImage = (event) => {\n    event.target.src = '/placeholder.svg'\n}\n\nconst errorFallbackUserImage = (event) => {\n    event.target.src = '/assets/front/images/user.png'\n}\n\nconst edit_post = () => {\n    isModalVisible.value = true\n    showDropdown.value = false\n}\n\nconst action = async (type) => {\n    if (type === 'delete') {\n        showDropdown.value = false\n        await axios.delete(`/api/v1/posts/${post.post_code}`, authStore.config).then(() => {\n            emit('delete_post', post.post_code)\n        })\n    } else {\n        showDropdown.value = false\n        await axios.get(`/api/v1/posts/duplicate/${post.post_code}`, authStore.config).then(() => {\n            emit('fetch')\n        })\n    }\n}\n\nconst renderContent = (content) => {\n    return content.replace(/@(\\w+)/g, '<a href=\"/@$1\">@$1</a>');\n};\n\nconst checkItem = () => {\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n                emit('load_more')\n            }\n        });\n    });\n    observer.observe(element.value);\n}\n\nconst handleLike = async () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n    }\n    else {\n        const response = await axios.get(`/api/v1/posts/like-unlike/${post.post_code}`, authStore.config)\n        if (response.data.status == 'success') {\n            emit('liked_action', [post.post_code, response.data.liked])\n        }\n        else {\n            alert('Something went wrong')\n        }\n    }\n};\n\nconst handleComment = () => {\n    if (!authStore.isAuthenticated) {\n        $router.push('/login')\n    }\n    else {\n        $router.push(post_url.value)\n    }\n};\n\nconst handleShare = () => {\n    emit('share_url', post_url.value)\n};\n\nconst fetch = () => {\n    emit('fetch')\n}\n\nconst closeModal = () => {\n    isModalVisible.value = false\n};\n\nonMounted(() => {\n    if (element.value.classList.contains('last_item')) {\n        checkItem();\n    }\n});\n\n</script>\n<template>\n    <div ref=\"element\">\n        <div @click=\"$router.push(post_url)\" class=\"bg-gray-700/40 shadow-md rounded-lg overflow-hidden mb-4 hover:cursor-pointer hover:bg-gray-800/80 transition-all duration-350 ease-in\">\n            <div class=\"flex items-center p-4\">\n                <router-link :to=\"'/' + post.user.username\" @click.stop>\n                    <img v-if=\"post.user?.profile_photo\" :src=\"post.user?.profile_photo\" alt=\"User Avatar\"\n                        class=\"w-12 h-12 rounded-full\" @error=\"errorFallbackUserImage\" />\n                    <img v-else src=\"/assets/front/images/user.png\" alt=\"User Avatar\" class=\"w-12 h-12 rounded-full\" @error=\"errorFallbackUserImage\" />\n                </router-link>\n                <router-link @click.stop :to=\"'/' + post.user.username\" class=\"ml-3\">\n                    <p class=\"font-semibold text-white text-lg\">{{ post.user.name }}</p>\n                    <p class=\"text-sm text-gray-500\">@{{ post.user.username }}</p>\n                </router-link>\n                <div class=\"relative inline-block ml-auto self-start\" v-if=\"authStore.isAuthenticated && post.owner\">\n                    <i class=\"fas fa-ellipsis-v cursor-pointer text-white p-2\" @click.stop=\"showDropdown = !showDropdown\"></i>\n                    <transition enter-active-class=\"transition ease-out duration-100\"\n                        enter-from-class=\"transform opacity-0 scale-95\" enter-to-class=\"transform opacity-100 scale-100\"\n                        leave-active-class=\"transition ease-in duration-75\"\n                        leave-from-class=\"transform opacity-100 scale-100\"\n                        leave-to-class=\"transform opacity-0 scale-95\">\n                        <div v-if=\"showDropdown\"\n                            class=\"absolute right-0 z-10 w-32 origin-top-right divide-y divide-gray-100 ring-1 shadow-lg ring-black/5 focus:outline-hidden\"\n                            role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"menu-button\" tabindex=\"-1\">\n                            <div class=\"\" role=\"none\">\n                                <!-- Active: \"bg-gray-100 text-gray-900 outline-hidden\", Not Active: \"text-gray-700\" -->\n                                <div @click.stop=\"edit_post()\"\n                                    class=\"block px-4 py-2 text-sm text-gray-700 transition-all duration-150 ease-in-out rounded-md bg-white hover:bg-gray-200 mb-1\">\n                                    <i class=\"fas fa-pencil-alt mr-1\"></i>\n                                    Edit\n                                </div>\n                                <AlertDialog>\n                                    <AlertDialogTrigger as-child>\n                                        <div @click.stop\n                                            class=\"block px-4 py-2 text-sm text-gray-700 transition-all duration-150 ease-in-out rounded-md bg-white hover:bg-gray-200\">\n                                            <i class=\"fas fa-trash mr-1\"></i> Delete\n                                        </div>\n                                    </AlertDialogTrigger>\n                                    <AlertDialogContent>\n                                        <AlertDialogHeader>\n                                            <AlertDialogTitle>Are you absolutely sure?</AlertDialogTitle>\n                                            <AlertDialogDescription>\n                                                This action cannot be undone. This will delete your post.\n                                            </AlertDialogDescription>\n                                        </AlertDialogHeader>\n                                        <AlertDialogFooter>\n                                            <AlertDialogCancel>Cancel</AlertDialogCancel>\n                                            <AlertDialogAction @click.stop=\"action('delete')\">Continue</AlertDialogAction>\n                                        </AlertDialogFooter>\n                                    </AlertDialogContent>\n                                </AlertDialog>\n                            </div>\n                        </div>\n                    </transition>\n                </div>\n            </div>\n            <div class=\"px-4\">\n                <h3 class=\"font-bold text-xl text-white text-gray-800 mb-0\" v-if=\"post.title\">{{ post.title }}</h3>\n                <p class=\"text-gray-700 mb-2 text-white\" v-html=\"renderContent(post.content)\" @click.stop></p>\n                <div v-if=\"post.media_urls && post.media_urls.length\" class=\"grid gap-2 mb-4\">\n                    <img v-if=\"post.media_urls.length === 1\" :src=\"post.media_urls[0]\" alt=\"Post Media\"\n                        class=\"cursor-pointer rounded-lg object-cover w-full h-80\" @error=\"errorFallbackImage\" />\n                    <div v-else-if=\"post.media_urls.length === 2\" class=\"grid grid-cols-2 gap-2\">\n                        <template v-for=\"(media, index) in post.media_urls\" :key=\"media\">\n                            <img v-if=\"index < 2\" :src=\"media\" alt=\"Post Media\" class=\"cursor-pointer rounded-lg object-cover h-40 w-full\" @error=\"errorFallbackImage\" />\n                        </template>\n                    </div>\n                    <div v-else-if=\"post.media_urls.length === 3\" class=\"grid grid-cols-2 gap-2\">\n                        <template v-for=\"(media, index) in post.media_urls.slice(0, 2)\" :key=\"index\">\n                            <img :src=\"media\" alt=\"Post Media\" class=\"cursor-pointer rounded-lg object-cover h-40 w-full\" @error=\"errorFallbackImage\" />\n                        </template>\n                        <img :src=\"post.media_urls[2]\" alt=\"Post Media\" class=\"cursor-pointer col-span-2 rounded-lg object-cover h-40 w-full\" @error=\"errorFallbackImage\" />\n                    </div>\n                    <div v-else class=\"grid grid-cols-2 gap-2 relative\">\n                        <template v-for=\"(media, index) in post.media_urls.slice(0, 4)\" :key=\"index\">\n                            <img :src=\"media\" alt=\"Post Media\" class=\"cursor-pointer rounded-lg object-cover h-40 w-full\" @error=\"errorFallbackImage\" />\n                        </template>\n                        <div v-if=\"post.media_urls.length > 4\"\n                            class=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center text-white text-xl font-bold rounded-lg\"\n                            :style=\"{ gridArea: '2 / 2 / 3 / 3' }\">\n                            +{{ post.media_urls.length - 4 }} more\n                        </div>\n                    </div>\n                </div>\n                <CardFooter class=\"flex items-center justify-between py-2 px-4 pt-0\">\n                    <div class=\"flex items-center space-x-4\">\n                        <span :title=\"post.likes_count+' Likes'\" class=\"text-gray-500 cursor-pointer hover:text-red-400\"><i class=\"fa-heart\" :class=\"post.liked ? 'fas text-red-500':'far'\" @click.stop=\"handleLike\"></i>&nbsp;{{ post.likes_count }}</span>\n                        <span :title=\"post.comments_count+' Comments'\" class=\"text-gray-500 cursor-pointer hover:text-red-400\"><i class=\"far fa-messages\" @click.stop=\"handleComment\"></i>&nbsp;{{ post.comments_count }}</span>\n                        <span :title=\"post.views_count+' Views'\" class=\"text-gray-500 cursor-pointer hover:text-red-400\"><i class=\"far fa-chart-column\"></i>&nbsp;{{ post.views_count }}</span>\n                    </div>\n                    <div class=\"flex items-center space-x-2\">\n                        <span :title=\"'Posted At'\" class=\"text-gray-500 cursor-pointer text-sm\">{{ post.posted_at }}</span>\n                        <span class=\"bg-red-400 w-[5px] h-[5px] rounded\"></span>\n                        <span :title=\"'Share Post'\" class=\"text-gray-500 cursor-pointer hover:text-red-400\"><i class=\"far fa-paper-plane-top\" @click.stop=\"handleShare\"></i></span>\n                    </div>\n                </CardFooter>\n            </div>\n        </div>\n        <!-- <Transition name=\"fade\"> -->\n            <PostForm v-if=\"isModalVisible\" @close=\"closeModal\" @fetch=\"fetch\" :post=\"post\" />\n        <!-- </Transition> -->\n        <Dialog v-model:open=\"isGalleryVisible\">\n            <DialogContent class=\"max-w-4xl p-0 border-0 shadow-md shadow-white\">\n                <div class=\"relative\">\n                    <img :src=\"post.media_urls[selectedImageIndex]\" alt=\"Gallery image\" class=\"w-full h-auto object-contain rounded-lg\" />\n                    <button v-if=\"selectedImageIndex > 0\" @click=\"prevImage\" class=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-primary/20 text-white p-2 rounded-full\">\n                        <LucideChevronLeft class=\"w-5 h-5\" />\n                    </button>\n                    <button v-if=\"selectedImageIndex < post.media_urls.length - 1\" @click=\"nextImage\" class=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-primary/20 text-white p-2 rounded-full\">\n                        <LucideChevronRight class=\"w-5 h-5\" />\n                    </button>\n                </div>\n            </DialogContent>\n        </Dialog>\n    </div>\n</template>\n<style scoped>\n.mention-link {\n    --tw-text-opacity: 1;\n    color: rgb(42 97 70 / var(--tw-text-opacity, 1));\n    padding-left: 0.25rem;\n    padding-right: 0.25rem;\n    --tw-bg-opacity: 1;\n    background-color: rgb(209 235 223 / var(--tw-bg-opacity, 1));\n    border-radius: 0.25rem;\n}\n\n.mention-link:hover {\n    text-decoration: underline;\n}\n</style>\n"],"names":["ChevronLeft","createLucideIcon","ChevronRight","forwarded","useForwardPropsEmits","__props","__emit","props","delegatedProps","computed","_","delegated","emits","useMentions","mentionSuggestions","ref","mentionQuery","isMentioning","authStore","useAuthStore","searchMentions","query","response","axios","error","watch","newVal","mentionState","newPost","emit","deleted","previews","editor","expanded","isSubmitting","errors","expandCard","val","handleInput","detectMentionTrigger","handleKeyDown","e","sel","range","mentionNode","getMentionBeforeCursor","removeMention","node","offset","userId","parent","event","selection","textBeforeCursor","getTextBeforeCursor","atIndex","precedingChar","text","insertMention","user","startNode","startOffset","mentionEl","space","wrapper","newRange","m","resetForm","handle_media","file","existingFile","url","submitPost","formData","obj","index","err","_a","removeimage","id","type","closeModal","onMounted","nextTick","element","showDropdown","isModalVisible","$router","useRouter","post_url","isGalleryVisible","selectedImageIndex","nextImage","prevImage","errorFallbackImage","errorFallbackUserImage","edit_post","action","renderContent","content","checkItem","entries","entry","handleLike","handleComment","handleShare","fetch"],"mappings":"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","x_google_ignoreList":[0,1]}