import{c as Z,a as ie,O as Ee,b as g,o as i,d as f,m as fe,u as e,e as pe,y as Le,S as ze,f as N,w as k,r as ye,g as Ie,n as Be,h as Pe,i as Oe,v as Ve,j as me,k as he,l as W,p as S,q as ve,s as xe,_ as Ae,t as je,x as D,B as ke,z as n,A as b,C as A,D as r,X as ne,F as X,E as Y,G as Te,H as U,T as ue,I as ge,J as Fe,K as Ue,L as Ke,M as we,N as _e,P as He,Q as Je,R as We}from"./app-DI7wrdgO.js";import{_ as Ge}from"./Input-BAuh1Qyv.js";import{C as Qe}from"./check-CAH6no8O.js";import{u as Xe}from"./useNavbarSearch-pTKJD70Q.js";import{u as Ye}from"./index-DffnKYK4.js";import{S as de}from"./search-CGGjPpFd.js";import{Z as De}from"./zap-Cs3mERLY.js";import{L as Ce}from"./loader-circle-B1JyFQgb.js";import{C as Re}from"./clock-CBnw6V-b.js";import{F as Se}from"./file-text-SdSWpbmo.js";import{C as Ne}from"./chevron-right-CSsBz5at.js";import{M as Ze}from"./message-square-LHM10PKZ.js";import{U as et}from"./users-YnCQh0Uw.js";import{F as tt}from"./folder-open-KDihOt4H.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Z("MenuIcon",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=Z("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Z("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=Z("WifiOffIcon",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=Z("WifiIcon",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),it={class:"absolute left-0 top-full flex justify-center"},lt={__name:"NavigationMenuViewport",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(v){const y=v,s=ie(()=>{const{class:c,...u}=y;return u}),C=Ee(s);return(c,u)=>(i(),g("div",it,[f(e(Le),fe(e(C),{class:e(pe)("origin-top-center relative mt-1.5 h-[--radix-navigation-menu-viewport-height] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[--radix-navigation-menu-viewport-width]",y.class)}),null,16,["class"])]))}},ct={__name:"NavigationMenu",props:{modelValue:{type:String,required:!1},defaultValue:{type:String,required:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1},delayDuration:{type:Number,required:!1},skipDelayDuration:{type:Number,required:!1},disableClickTrigger:{type:Boolean,required:!1},disableHoverTrigger:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(v,{emit:y}){const s=v,C=y,c=ie(()=>{const{class:x,...h}=s;return h}),u=ze(c,C);return(x,h)=>(i(),N(e(Ie),fe(e(u),{class:e(pe)("relative z-10 flex max-w-max flex-1 items-center justify-center",s.class)}),{default:k(()=>[ye(x.$slots,"default"),f(lt)]),_:3},16,["class"]))}},dt={__name:"NavigationMenuItem",props:{value:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(v){const y=v;return(s,C)=>(i(),N(e(Oe),Be(Pe(y)),{default:k(()=>[ye(s.$slots,"default")]),_:3},16))}},ut={__name:"NavigationMenuList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(v){const y=v,s=ie(()=>{const{class:c,...u}=y;return u}),C=Ee(s);return(c,u)=>(i(),N(e(Ve),fe(e(C),{class:e(pe)("group flex flex-1 list-none items-center justify-center gap-x-1",y.class)}),{default:k(()=>[ye(c.$slots,"default")]),_:3},16,["class"]))}},O=S([]),z=S(0),G=S(!1),H=S(null);let J=null,Q=0;const $e=5,gt=3e3,oe=new Set;function ft(v=null,y=null){const s=me(),C=he(),c=()=>{var l;if(!window.Echo)return console.warn("[RealtimeNotifications] Echo not initialized"),H.value="Broadcasting not configured",!1;if(!s.isAuthenticated||!((l=s.user)!=null&&l.id))return console.warn("[RealtimeNotifications] User not authenticated"),!1;try{const a=s.user.id;return u(),J=window.Echo.private(`user.${a}`),J.listen(".notification.created",w=>{x(w)}),J.subscribed(()=>{G.value=!0,H.value=null,Q=0,console.log("[RealtimeNotifications] Connected to notification channel")}),J.error(w=>{console.error("[RealtimeNotifications] Channel error:",w),H.value=w.message||"Connection error",G.value=!1,R()}),!0}catch(a){return console.error("[RealtimeNotifications] Connection failed:",a),H.value=a.message||"Failed to connect",G.value=!1,!1}},u=()=>{var l;if(J)try{window.Echo.leave(`user.${(l=s.user)==null?void 0:l.id}`),J=null,G.value=!1,console.log("[RealtimeNotifications] Disconnected from notification channel")}catch(a){console.error("[RealtimeNotifications] Disconnect error:",a)}},x=l=>{try{if(O.value.some(w=>w.id===l.id)||oe.has(l.id))return;if(oe.add(l.id),O.value.unshift(l),!l.read){const w=z.value||0;z.value=w+1,I(z.value)}v&&typeof v=="function"&&v(l),Notification.permission==="granted"&&h(l),console.log("[RealtimeNotifications] Notification received:",l)}catch(a){console.error("[RealtimeNotifications] Error handling notification:",a)}},h=l=>{try{const a=new Notification(l.title,{body:l.message,icon:"/favicon.ico",badge:"/favicon.ico",tag:`notification-${l.id}`,data:l.data,requireInteraction:!1});a.onclick=()=>{var w;a.close(),(w=l.data)!=null&&w.url&&C.push(l.data.url)},setTimeout(()=>{a.close()},5e3)}catch(a){console.error("[RealtimeNotifications] Error showing browser notification:",a)}},R=()=>{if(Q>=$e){console.error("[RealtimeNotifications] Max reconnection attempts reached"),H.value="Failed to reconnect. Please refresh the page.";return}Q++;const l=gt*Q;console.log(`[RealtimeNotifications] Attempting to reconnect (${Q}/${$e}) in ${l}ms`),setTimeout(()=>{s.isAuthenticated&&c()},l)},I=l=>{z.value!==l&&(z.value=l,y&&typeof y=="function"&&y(l))},q=()=>{oe.clear()},L=l=>{const a=O.value.find(w=>w.id===l);a&&!a.read&&(a.read=!0,a.read_at=new Date().toISOString(),z.value>0&&z.value--)},E=l=>{const a=O.value.findIndex(w=>w.id===l);if(a!==-1){const w=O.value[a];O.value.splice(a,1),!w.read&&z.value>0&&z.value--}};return W(()=>s.isAuthenticated,l=>{l?c():(u(),O.value=[],z.value=0,oe.clear())},{immediate:!0}),ve(()=>{s.isAuthenticated&&c()}),xe(()=>{u()}),{notifications:O,unreadCount:z,isConnected:G,connectionError:H,connect:c,disconnect:u,updateUnreadCount:I,markAsRead:L,removeNotification:E,resetRealtimeTracking:q}}const pt={class:"flex items-center gap-2"},yt=["title"],mt={class:"max-h-[400px] overflow-y-auto"},ht={key:0,class:"p-8 text-center"},vt={key:1,class:"p-8 text-center"},xt=["onClick"],bt={class:"flex items-start gap-3"},kt={class:"flex-1 min-w-0"},wt={class:"flex items-start justify-between gap-2 mb-1"},_t={class:"flex items-center justify-between"},Dt=1e4,Ct={__name:"NotificationDropdown",setup(v){const y=me(),s=je(),C=he(),c=S(!1),u=S([]),x=S(0),h=S(!1),R=S(null),{unreadCount:I,isConnected:q,markAsRead:L,updateUnreadCount:E,resetRealtimeTracking:l}=ft(p=>{u.value.some(m=>m.id===p.id)||(u.value.unshift(p),u.value.length>6&&(u.value=u.value.slice(0,6)),p.read)},p=>{x.value!==p&&(x.value=p)}),a=async()=>{var p;if(y.isAuthenticated){h.value=!0;try{const _=await ge.get("/api/v1/notifications?per_page=6&unread_only=false",y.config);if(_.data.status==="success"){const m=_.data.data.notifications||[],j=new Set(u.value.map(o=>o.id)),F=m.filter(o=>!j.has(o.id));u.value=[...F,...u.value].slice(0,6);const d=((p=_.data.data.pagination)==null?void 0:p.unread_count)||0;x.value=d,E(d),l()}}catch(_){console.error("Error fetching notifications:",_)}finally{h.value=!1}}};W(I,p=>{p!=null&&p!==x.value&&(x.value=p)},{immediate:!0});const w=async(p,_)=>{_&&_.stopPropagation();const m=u.value.find(j=>j.id===p);m&&!m.read&&(m.read=!0,m.read_at=new Date().toISOString(),x.value>0&&x.value--,L(p));try{await ge.post(`/api/v1/notifications/${p}/read`,{},y.config)}catch(j){console.error("Error marking notification as read:",j),m&&(m.read=!1,m.read_at=null,x.value++)}},K=p=>{var _;p.read||w(p.id,{stopPropagation:()=>{}}),(_=p.data)!=null&&_.url&&(C.push(p.data.url),c.value=!1)},le=()=>{c.value=!c.value,c.value&&a()},ee=p=>{R.value&&!R.value.contains(p.target)&&(c.value=!1)},ce=()=>{C.push("/notifications"),c.value=!1},te=p=>({post_liked:"â¤ï¸",post_commented:"ðŸ’¬",comment_liked:"ðŸ‘",question_liked:"ðŸ‘",question_upvoted:"â¬†ï¸",question_answered:"ðŸ’¡",answer_upvoted:"â¬†ï¸",answer_replied:"ðŸ’¬",answer_accepted:"âœ…",mentioned:"ðŸ””",followed:"ðŸ‘¤"})[p]||"ðŸ””",ae=p=>({post_liked:s.isDark?"bg-red-900/30 text-red-400":"bg-red-100 text-red-600",post_commented:s.isDark?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600",comment_liked:s.isDark?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-600",question_liked:s.isDark?"bg-green-900/30 text-green-400":"bg-green-100 text-green-600",question_upvoted:s.isDark?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600",question_answered:s.isDark?"bg-indigo-900/30 text-indigo-400":"bg-indigo-100 text-indigo-600",answer_upvoted:s.isDark?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600",answer_replied:s.isDark?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600",answer_accepted:s.isDark?"bg-green-900/30 text-green-400":"bg-green-100 text-green-600",mentioned:s.isDark?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-600",followed:s.isDark?"bg-pink-900/30 text-pink-400":"bg-pink-100 text-pink-600"})[p]||(s.isDark?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-600"),B=p=>{const _=new Date(p),j=new Date-_,F=Math.floor(j/1e3),d=Math.floor(F/60),o=Math.floor(d/60),M=Math.floor(o/24);return M>0?`${M}d ago`:o>0?`${o}h ago`:d>0?`${d}m ago`:"Just now"};let V=null;const re=()=>{V||!y.isAuthenticated||(a(),V=setInterval(()=>{a()},Dt))},se=()=>{V&&(clearInterval(V),V=null)};return W(q,p=>{p?se():re()},{immediate:!0}),ve(()=>{y.isAuthenticated&&(q.value||re()),document.addEventListener("click",ee)}),xe(()=>{se(),document.removeEventListener("click",ee)}),(p,_)=>e(y).isAuthenticated?(i(),g("div",{key:0,ref_key:"dropdownRef",ref:R,class:"relative"},[f(e(A),{variant:"ghost",size:"icon",onClick:le,class:"relative hover:bg-transparent hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:k(()=>[f(e(ke),{class:"h-5 w-5"}),x.value>0?(i(),g("span",{key:0,class:n(["absolute -top-1 -right-1 h-5 w-5 rounded-full flex items-center justify-center text-xs font-bold text-white",e(s).isDark?"bg-red-600":"bg-red-500"])},b(x.value>9?"9+":x.value),3)):D("",!0)]),_:1}),f(ue,{name:"dropdown"},{default:k(()=>[c.value?(i(),g("div",{key:0,class:n(["absolute right-0 mt-2 w-96 max-h-[500px] rounded-xl shadow-2xl border backdrop-blur-xl overflow-hidden z-50",[e(s).isDark?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200"]])},[r("div",{class:n(["flex items-center justify-between px-4 py-2 border-b",[e(s).isDark?"border-gray-800":"border-gray-200"]])},[r("div",pt,[r("h3",{class:n(["font-semibold text-lg",[e(s).isDark?"text-white":"text-gray-900"]])}," Notifications ",2),r("div",{class:"flex items-center gap-1",title:e(q)?"Real-time connected":"Real-time disconnected"},[e(q)?(i(),N(e(nt),{key:0,class:n(["h-3 w-3",e(s).isDark?"text-green-400":"text-green-600"])},null,8,["class"])):(i(),N(e(ot),{key:1,class:n(["h-3 w-3",e(s).isDark?"text-gray-500":"text-gray-400"])},null,8,["class"]))],8,yt)]),f(e(A),{variant:"ghost",size:"icon",onClick:_[0]||(_[0]=m=>c.value=!1),class:"h-8 w-8"},{default:k(()=>[f(e(ne),{class:"h-4 w-4"})]),_:1})],2),r("div",mt,[h.value?(i(),g("div",ht,[r("div",{class:n(["animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-2",[e(s).isDark?"border-white":"border-gray-900"]])},null,2),r("p",{class:n(["text-sm",[e(s).isDark?"text-gray-400":"text-gray-600"]])},"Loading...",2)])):u.value.length===0?(i(),g("div",vt,[f(e(ke),{class:n(["h-12 w-12 mx-auto mb-3 opacity-50",[e(s).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"]),r("p",{class:n(["text-sm font-medium mb-1",[e(s).isDark?"text-white":"text-gray-900"]])},"No notifications",2),r("p",{class:n(["text-xs",[(e(s).isDark,"text-gray-500")]])},"You're all caught up!",2)])):(i(),g("div",{key:2,class:n(["divide-y",[e(s).isDark?"divide-gray-800":"divide-gray-100"]])},[(i(!0),g(X,null,Y(u.value,m=>(i(),g("div",{key:m.id,onClick:j=>K(m),class:n(["px-4 py-3 cursor-pointer transition-colors relative group",[m.read?e(s).isDark?"hover:bg-gray-800/50":"hover:bg-gray-50":e(s).isDark?"bg-blue-900/10 hover:bg-blue-900/20":"bg-blue-50/50 hover:bg-blue-50"]])},[m.read?D("",!0):(i(),g("div",{key:0,class:n(["absolute left-0 top-0 bottom-0 w-1",(e(s).isDark,"bg-blue-500")])},null,2)),r("div",bt,[r("div",{class:n(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center text-lg",ae(m.type)])},b(te(m.type)),3),r("div",kt,[r("div",wt,[r("p",{class:n(["text-sm font-medium line-clamp-2",[e(s).isDark?"text-white":"text-gray-900"]])},b(m.title),3),m.read?D("",!0):(i(),N(e(A),{key:0,variant:"ghost",size:"icon",onClick:Te(j=>w(m.id,j),["stop"]),class:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"},{default:k(()=>[f(e(Qe),{class:"h-3 w-3"})]),_:1},8,["onClick"]))]),r("p",{class:n(["text-xs mb-2 line-clamp-2",[e(s).isDark?"text-gray-400":"text-gray-600"]])},b(m.message),3),r("div",_t,[r("span",{class:n(["text-xs",[(e(s).isDark,"text-gray-500")]])},b(B(m.created_at)),3),m.notifiable?(i(),g("span",{key:0,class:n(["text-xs font-medium",[e(s).isDark?"text-gray-400":"text-gray-600"]])}," @"+b(m.notifiable.username),3)):D("",!0)])])])],10,xt))),128))],2))]),u.value.length>0?(i(),g("div",{key:0,class:n(["px-4 py-2 border-t",[e(s).isDark?"border-gray-800 bg-gray-900/50":"border-gray-200 bg-gray-50/50"]])},[f(e(A),{variant:"ghost",class:"w-full justify-center text-sm",onClick:ce},{default:k(()=>[..._[1]||(_[1]=[U(" View All Notifications ",-1)])]),_:1})],2)):D("",!0)],2)):D("",!0)]),_:1})],512)):D("",!0)}},Rt=Ae(Ct,[["__scopeId","data-v-da4970c2"]]),Me="recent_searches",qe=5;function St(){const v=S([]),y=()=>{try{const h=localStorage.getItem(Me);h?v.value=JSON.parse(h):v.value=[]}catch(h){console.error("Error loading recent searches:",h),v.value=[]}},s=()=>{try{localStorage.setItem(Me,JSON.stringify(v.value))}catch(h){console.error("Error saving recent searches:",h)}};return y(),{recentSearches:v,addRecentSearch:h=>{if(!h||h.trim().length<3)return;const R=h.trim();v.value=v.value.filter(I=>I.query.toLowerCase()!==R.toLowerCase()),v.value.unshift({query:R,timestamp:Date.now()}),v.value.length>qe&&(v.value=v.value.slice(0,qe)),s()},removeRecentSearch:h=>{v.value=v.value.filter(R=>R.query.toLowerCase()!==h.toLowerCase()),s()},clearRecentSearches:()=>{v.value=[],s()},getTimeAgo:h=>{const I=Date.now()-h,q=Math.floor(I/1e3),L=Math.floor(q/60),E=Math.floor(L/60),l=Math.floor(E/24);return l>0?`${l}d ago`:E>0?`${E}h ago`:L>0?`${L}m ago`:"Just now"},loadRecentSearches:y}}const Nt={class:"container mx-auto px-4"},$t={class:"flex h-16 items-center justify-between"},Mt={class:"flex items-center"},qt={class:"hidden lg:flex items-center space-x-1"},Et={key:0,class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-gradient-to-r from-primary to-primary/80 rounded-full"},At={class:"flex items-center space-x-3"},jt={class:"w-8 h-8 rounded-full bg-gradient-to-r from-primary to-primary/80 flex items-center justify-center text-white text-sm font-bold"},Tt={class:"space-y-2 px-4 py-6"},Lt={key:0,class:"flex flex-col space-y-3"},zt={key:1,class:"flex items-center justify-between"},It={class:"w-10 h-10 rounded-full bg-gradient-to-r from-primary to-primary/80 flex items-center justify-center text-primary-foreground font-bold"},Bt={class:"font-medium text-foreground"},Pt={class:"flex items-center gap-3 px-4 py-4"},Ot={class:"flex items-center gap-2"},Vt={key:0,class:"pt-2"},Ft={class:"flex items-center gap-2"},Ut=["onClick"],Kt={class:"flex-1 min-w-0"},Ht=["onClick"],Jt={key:1,class:"p-8 text-center"},Wt={key:2,class:"pt-2"},Gt={key:0,class:"text-xs normal-case font-normal"},Qt=["onClick"],Xt={class:"flex-1 min-w-0"},Yt={class:"flex items-center gap-2 mb-1"},Zt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},ea={key:1,class:"text-xs text-gray-500 dark:text-gray-400"},ta={key:0},aa={key:1},ra={key:2},sa={key:3},oa={key:3,class:"p-8 text-center"},na=Object.assign({name:"Navbar"},{__name:"Navbar",setup(v){const y=he(),s=Fe(),{showSearch:C,searchQuery:c}=Xe(),u=S([]),x=S(0),h=S(!1),R=S(!1),I=S(null),q=S(null),L=S(null),E=S(!1),l=me(),a=je(),{recentSearches:w,addRecentSearch:K,removeRecentSearch:le,clearRecentSearches:ee,getTimeAgo:ce}=St(),te=ie(()=>[{name:"Home",href:"/",current:s.path==="/"},{name:"About",href:"/about",current:s.path==="/about"},{name:"Projects",href:"/projects",current:s.path==="/projects"},{name:"Feed",href:"/feed",current:s.path==="/feed"},{name:"QNA",href:"/qna",current:s.path==="/qna"},{name:"Contact",href:"/contact",current:s.path==="/contact"}]),ae=Ye(async d=>{var o,M;if(d.length<3){u.value=[];return}R.value=!0;try{const t=await ge.get(`/api/v1/search?q=${encodeURIComponent(d)}&include_trending=false&include_recommended=false&limit=10`,l.config);if(t.data.status==="success"&&t.data.data){const $=t.data.data,T=[...($.posts||[]).map(P=>({...P,icon:Se})),...($.questions||[]).map(P=>({...P,icon:Ze})),...($.users||[]).map(P=>({...P,icon:et})),...($.projects||[]).map(P=>({...P,icon:tt}))];u.value=T.slice(0,10),x.value=((o=$.meta)==null?void 0:o.total_results)||0,h.value=((M=$.meta)==null?void 0:M.has_more)||T.length>10}else u.value=[],x.value=0,h.value=!1}catch(t){console.error("Search error:",t),u.value=[],x.value=0,h.value=!1}finally{R.value=!1}},500);W(c,d=>{d.length>=3?ae(d):u.value=[]});const B=()=>{C.value=!1,c.value="",u.value=[],x.value=0,h.value=!1},V=()=>{c.value.length>=3&&(K(c.value),y.push({name:"search-results",query:{q:c.value}}),B())},re=d=>{d.url?(y.push(d.url),c.value&&c.value.trim().length>=3&&K(c.value),B()):d.type==="user"&&d.username&&(y.push(`/@${d.username}`),c.value&&c.value.trim().length>=3&&K(c.value),B())},se=d=>{c.value=d,ae(d),K(d)},p=(d,o)=>{d.stopPropagation(),le(o)},_=d=>{d.stopPropagation(),ee()},m=d=>{d.key==="Escape"&&B()},j=d=>{(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),C.value||(C.value=!0))};W(C,async d=>{var o,M;if(d){await Ue();try{const t=(M=(o=q.value)==null?void 0:o.querySelector)==null?void 0:M.call(o,'input[type="text"]');t&&typeof t.focus=="function"&&t.focus()}catch(t){console.warn("Could not focus search input:",t)}document.addEventListener("keydown",m)}else document.removeEventListener("keydown",m)});const F=d=>{var M;const o=((M=L.value)==null?void 0:M.$el)||L.value;o&&typeof o.contains=="function"&&o.contains(d.target)||q.value&&typeof q.value.contains=="function"&&!q.value.contains(d.target)&&B()};return W(C,d=>{d?setTimeout(()=>{document.addEventListener("click",F)},100):document.removeEventListener("click",F)}),ve(()=>{a.initTheme(),document.addEventListener("keydown",j)}),xe(()=>{document.removeEventListener("click",F),document.removeEventListener("keydown",m),document.removeEventListener("keydown",j)}),(d,o)=>{const M=Ke("router-link");return i(),g("div",null,[r("nav",{class:n(["sticky top-0 z-50 w-full backdrop-blur-xl transition-all duration-300 border-b",e(a).isDark?"bg-gray-950/90 border-gray-800":"bg-white/90 border-gray-200"])},[r("div",{class:n(["absolute inset-0 -z-10",["transition-all duration-500",e(a).isDark?"bg-gradient-to-r from-gray-950/95 via-gray-900/90 to-gray-950/95":"bg-gradient-to-r from-white/95 via-gray-50/90 to-white/95"]])},null,2),r("div",Nt,[r("div",$t,[r("div",Mt,[f(M,{to:"/",class:"group flex items-center space-x-3 transition-all duration-300"},{default:k(()=>[...o[10]||(o[10]=[r("div",{class:"relative"},[r("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-primary to-primary/80 opacity-20 blur-sm group-hover:opacity-30 transition-opacity duration-300"}),r("img",{src:"/assets/front/logo/logo.png",class:"relative h-8 w-auto rounded-lg",alt:"LaraVue Logo"})],-1),r("div",{class:"hidden sm:block"},[r("span",{class:"text-xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent"},[r("span",{class:"text-primary"},"Lara"),r("span",{class:"text-secondary"},"Vue")]),r("div",{class:"text-xs text-muted-foreground font-medium"},"Community")],-1)])]),_:1})]),r("div",qt,[f(e(ct),null,{default:k(()=>[f(e(ut),{class:"space-x-1"},{default:k(()=>[(i(!0),g(X,null,Y(te.value,t=>(i(),N(e(dt),{key:t.name},{default:k(()=>[f(M,{to:t.href,class:n(["relative px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300","text-gray-700 dark:text-gray-300 dark:hover:text-white hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10","focus:outline-none focus:ring-2 focus:ring-primary/20",t.current?"bg-gradient-to-r from-primary/10 to-secondary/10 shadow-lg dark:text-white text-gray-900":"text-gray-700 dark:text-gray-300 dark:hover:text-white hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10"])},{default:k(()=>[U(b(t.name)+" ",1),t.current?(i(),g("div",Et)):D("",!0)]),_:2},1032,["to","class"])]),_:2},1024))),128))]),_:1})]),_:1})]),r("div",At,[f(e(A),{ref_key:"searchButtonRef",ref:L,variant:"ghost",size:"icon",onClick:o[0]||(o[0]=t=>C.value=!0),class:"relative overflow-hidden hover:bg-transparent hover:text-gray-700 hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:k(()=>[f(e(de),{class:"h-5 w-5 rotate-0 scale-100 transition-all duration-300"}),o[11]||(o[11]=r("span",{class:"sr-only"},"Search",-1))]),_:1},512),f(e(A),{variant:"ghost",size:"icon",onClick:o[1]||(o[1]=t=>e(a).toggleTheme()),class:"relative overflow-hidden hover:bg-transparent hover:text-gray-700 hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300 dark:hover:text-white"},{default:k(()=>[e(a).isDark?(i(),N(e(st),{key:0,class:"h-5 w-5 rotate-0 scale-100 transition-all duration-300"})):(i(),N(e(rt),{key:1,class:"h-5 w-5 rotate-0 scale-100 transition-all duration-300"})),o[12]||(o[12]=r("span",{class:"sr-only"},"Toggle theme",-1))]),_:1}),e(l).isAuthenticated?(i(),N(Rt,{key:0})):D("",!0),e(l).isAuthenticated?(i(),N(e(A),{key:1,variant:"ghost",onClick:o[2]||(o[2]=t=>e(y).push("/dashboard")),class:"flex items-center space-x-2 hover:bg-gray-100 dark:hover:bg-gradient-to-r dark:hover:from-primary/10 dark:hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300"},{default:k(()=>{var t,$,T;return[r("div",jt,b((T=($=(t=e(l))==null?void 0:t.user)==null?void 0:$.username)==null?void 0:T.charAt(0).toUpperCase()),1)]}),_:1})):(i(),N(e(A),{key:2,onClick:o[3]||(o[3]=t=>e(y).push("/login")),class:"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-white shadow-lg hover:shadow-xl transition-all duration-300"},{default:k(()=>[f(e(De),{class:"mr-50"}),o[13]||(o[13]=U(" Sign In ",-1))]),_:1})),f(e(A),{variant:"ghost",size:"icon",class:"lg:hidden hover:bg-gray-100 dark:hover:bg-gradient-to-r dark:hover:from-primary/10 dark:hover:to-secondary/10 transition-all duration-300 text-gray-700 dark:text-gray-300",onClick:o[4]||(o[4]=t=>E.value=!E.value)},{default:k(()=>[E.value?(i(),N(e(ne),{key:1,class:"h-6 w-6"})):(i(),N(e(at),{key:0,class:"h-6 w-6"})),o[14]||(o[14]=r("span",{class:"sr-only"},"Toggle menu",-1))]),_:1})])])]),we(r("div",{class:n(["lg:hidden backdrop-blur-xl border-t transition-all duration-300",[e(a).isDark?"bg-gray-950/95 border-gray-800":"bg-white/95 border-gray-200"]])},[r("div",{class:n(["absolute inset-0 -z-10",["transition-all duration-500",e(a).isDark?"bg-gradient-to-br from-gray-950/95 via-primary/10 to-gray-950/95":"bg-gradient-to-br from-white/95 via-primary/5 to-white/95"]])},null,2),r("div",Tt,[(i(!0),g(X,null,Y(te.value,t=>(i(),N(M,{key:t.name,to:t.href,class:n(["flex items-center px-4 py-3 rounded-lg text-base font-medium transition-all duration-300",[t.current?"text-foreground bg-gradient-to-r from-primary/10 to-secondary/10 shadow-lg":"text-muted-foreground hover:text-foreground hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10"]]),onClick:o[5]||(o[5]=$=>E.value=!1)},{default:k(()=>[U(b(t.name),1)]),_:2},1032,["to","class"]))),128))]),r("div",{class:n(["border-t px-4 py-4",e(a).isDark?"border-gray-800":"border-gray-200"])},[e(l).isAuthenticated?(i(),g("div",zt,[f(e(A),{variant:"ghost",onClick:o[8]||(o[8]=t=>{e(y).push("/dashboard"),E.value=!1}),class:"flex items-center space-x-3 w-full justify-start hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300"},{default:k(()=>{var t,$,T,P,be;return[r("div",It,b((T=($=(t=e(l))==null?void 0:t.user)==null?void 0:$.username)==null?void 0:T.charAt(0).toUpperCase()),1),r("div",null,[r("div",Bt,b((be=(P=e(l))==null?void 0:P.user)==null?void 0:be.username),1),o[17]||(o[17]=r("div",{class:"text-sm text-muted-foreground"},"Dashboard",-1))])]}),_:1})])):(i(),g("div",Lt,[f(e(A),{variant:"ghost",class:"w-full justify-center hover:bg-gradient-to-r hover:from-primary/10 hover:to-secondary/10 transition-all duration-300",onClick:o[6]||(o[6]=t=>e(y).push("/login"))},{default:k(()=>[...o[15]||(o[15]=[U(" Login ",-1)])]),_:1}),f(e(A),{class:"w-full justify-center bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 text-primary-foreground shadow-lg",onClick:o[7]||(o[7]=t=>e(y).push("/signup"))},{default:k(()=>[f(e(De),{class:"h-4 w-4 mr-2"}),o[16]||(o[16]=U(" Sign up ",-1))]),_:1})]))],2)],2),[[_e,E.value]])],2),f(ue,{name:"fade"},{default:k(()=>[we(r("div",{onClick:Te(B,["self"]),class:"fixed inset-0 z-50 flex items-start justify-center pt-20 px-4 bg-black/60 backdrop-blur-sm"},[r("div",{ref_key:"searchModalRef",ref:q,class:n(["relative w-full max-w-2xl transition-all duration-300 ease-out",e(C)?"opacity-100 scale-100":"opacity-0 scale-95"])},[r("div",{class:n(["relative rounded-2xl shadow-2xl border transition-all duration-300",[e(a).isDark?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200"]])},[r("div",Pt,[f(e(de),{class:n(["h-5 w-5 flex-shrink-0",[e(a).isDark?"text-gray-400":"text-gray-500"]])},null,8,["class"]),f(e(Ge),{ref_key:"searchInputRef",ref:I,modelValue:e(c),"onUpdate:modelValue":o[9]||(o[9]=t=>Je(c)?c.value=t:null),type:"text",placeholder:"Search posts, questions, projects, users...",class:n(["flex-1 border-0 bg-transparent text-base focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-gray-400",[e(a).isDark?"text-white":"text-gray-900"]]),onKeydown:He(B,["escape"])},null,8,["modelValue","class"]),r("div",Ot,[R.value?(i(),N(e(Ce),{key:0,class:"h-4 w-4 animate-spin text-gray-400"})):D("",!0),f(e(A),{variant:"ghost",size:"icon",onClick:B,class:n(["h-8 w-8 rounded-lg transition-colors",e(a).isDark?"hover:bg-gray-800/70":"hover:bg-gray-100"])},{default:k(()=>[f(e(ne),{class:"h-4 w-4"})]),_:1},8,["class"])])]),f(ue,{name:"slide-down"},{default:k(()=>[u.value.length>0||R.value||e(c).length===0&&e(w).length>0?(i(),g("div",{key:0,class:n(["absolute top-full left-0 right-0 mt-1 max-h-96 overflow-y-auto rounded-xl shadow-xl border backdrop-blur-xl transition-all duration-200 z-50",[e(a).isDark?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200"]])},[!R.value&&e(c).length===0&&e(w).length>0?(i(),g("div",Vt,[r("div",{class:n(["px-3 py-2 text-xs font-semibold uppercase tracking-wider flex items-center justify-between",[e(a).isDark?"text-gray-400":"text-gray-500"]])},[r("div",Ft,[f(e(Re),{class:"h-3.5 w-3.5"}),o[18]||(o[18]=r("span",null,"Recent Searches",-1))]),r("button",{onClick:_,class:n(["text-xs normal-case font-normal hover:underline transition-colors",[e(a).isDark?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"]])}," Clear all ",2)],2),(i(!0),g(X,null,Y(e(w),(t,$)=>(i(),g("div",{key:`recent-${t.query}-${t.timestamp}`,onClick:T=>se(t.query),class:n(["flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors duration-150 border-b last:border-b-0 group",[e(a).isDark?"border-gray-800 hover:bg-gray-800/70 hover:border-gray-700":"border-gray-100 hover:bg-gray-100"]])},[r("div",{class:n(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-colors",[e(a).isDark?"bg-gray-800/50 text-gray-400":"bg-gray-100 text-gray-500"]])},[f(e(Re),{class:"h-5 w-5"})],2),r("div",Kt,[r("p",{class:n(["text-sm font-medium truncate",[e(a).isDark?"text-white":"text-gray-900"]])},b(t.query),3),r("p",{class:n(["text-xs mt-0.5",[e(a).isDark?"text-gray-500":"text-gray-400"]])},b(e(ce)(t.timestamp)),3)]),r("button",{onClick:T=>p(T,t.query),class:n(["flex-shrink-0 p-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200",[e(a).isDark?"hover:bg-gray-700 text-gray-400 hover:text-gray-300":"hover:bg-gray-200 text-gray-400 hover:text-gray-600"]]),title:"Remove from recent searches"},[f(e(ne),{class:"h-4 w-4"})],10,Ht)],10,Ut))),128))])):R.value?(i(),g("div",Jt,[f(e(Ce),{class:n(["h-6 w-6 animate-spin mx-auto mb-2",[e(a).isDark?"text-gray-400":"text-gray-500"]])},null,8,["class"]),r("p",{class:n(["text-sm",[e(a).isDark?"text-gray-400":"text-gray-500"]])},"Searching...",2)])):u.value.length>0?(i(),g("div",Wt,[r("div",{class:n(["px-3 py-2 text-xs font-semibold uppercase tracking-wider flex items-center justify-between",[e(a).isDark?"text-gray-400":"text-gray-500"]])},[r("span",null,"Results ("+b(x.value>0?x.value:u.value.length)+")",1),u.value.length<x.value?(i(),g("span",Gt," Showing "+b(u.value.length)+" of "+b(x.value),1)):D("",!0)],2),(i(!0),g(X,null,Y(u.value,(t,$)=>(i(),g("div",{key:`${t.type}-${t.id||t.username||$}`,onClick:T=>re(t),class:n(["flex items-center gap-3 px-4 py-3 cursor-pointer transition-colors duration-150 border-b last:border-b-0",[e(a).isDark?"border-gray-800 hover:bg-gray-800/70 hover:border-gray-700":"border-gray-100 hover:bg-gray-100"]])},[r("div",{class:n(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-colors",[t.type==="post"?e(a).isDark?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600":t.type==="question"?e(a).isDark?"bg-green-900/30 text-green-400":"bg-green-100 text-green-600":t.type==="project"?e(a).isDark?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600":e(a).isDark?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-600"]])},[(i(),N(We(t.icon||e(Se)),{class:"h-5 w-5"}))],2),r("div",Xt,[r("div",Yt,[r("span",{class:n(["text-xs font-medium px-2 py-0.5 rounded capitalize transition-colors",[t.type==="post"?e(a).isDark?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600":t.type==="question"?e(a).isDark?"bg-green-900/30 text-green-400":"bg-green-100 text-green-600":t.type==="project"?e(a).isDark?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-600":e(a).isDark?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-600"]])},b(t.type),3),t.author&&typeof t.author=="object"&&t.author.username?(i(),g("span",Zt," @"+b(t.author.username),1)):t.author&&typeof t.author=="string"?(i(),g("span",ea," @"+b(t.author),1)):D("",!0)]),r("p",{class:n(["text-sm font-medium truncate",[e(a).isDark?"text-white":"text-gray-900"]])},b(t.title||t.name||t.username),3),t.content||t.description?(i(),g("p",{key:0,class:n(["text-xs mt-1 line-clamp-1",[e(a).isDark?"text-gray-400":"text-gray-500"]])},b(t.content||t.description),3)):D("",!0),t.stats?(i(),g("div",{key:1,class:n(["flex items-center gap-3 mt-1 text-xs",[e(a).isDark?"text-gray-500":"text-gray-400"]])},[t.stats.likes!==void 0?(i(),g("span",ta," â¤ï¸ "+b(t.stats.likes),1)):D("",!0),t.stats.comments!==void 0?(i(),g("span",aa," ðŸ’¬ "+b(t.stats.comments),1)):D("",!0),t.stats.answers!==void 0?(i(),g("span",ra," ðŸ’¡ "+b(t.stats.answers),1)):D("",!0),t.stats.views!==void 0?(i(),g("span",sa," ðŸ‘ï¸ "+b(t.stats.views),1)):D("",!0)],2)):D("",!0)]),f(e(Ne),{class:n(["h-4 w-4 flex-shrink-0",[e(a).isDark?"text-gray-500":"text-gray-400"]])},null,8,["class"])],10,Qt))),128)),h.value||x.value>u.value.length?(i(),g("div",{key:0,class:n(["px-4 py-3 border-t",[e(a).isDark?"border-gray-800":"border-gray-200"]])},[f(e(A),{onClick:V,variant:"outline",class:n(["w-full justify-center",[e(a).isDark?"hover:bg-gray-800":"hover:bg-gray-100"]])},{default:k(()=>[U(" View All Results ("+b(x.value)+") ",1),f(e(Ne),{class:"h-4 w-4 ml-2"})]),_:1},8,["class"])],2)):D("",!0)])):!R.value&&e(c).length>=3?(i(),g("div",oa,[f(e(de),{class:n(["h-8 w-8 mx-auto mb-2",[e(a).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"]),r("p",{class:n(["text-sm font-medium mb-1",[e(a).isDark?"text-gray-300":"text-gray-700"]])},"No results found",2),r("p",{class:n(["text-xs",[(e(a).isDark,"text-gray-500")]])},"Try different keywords",2)])):D("",!0)],2)):D("",!0)]),_:1}),e(c).length>0&&e(c).length<3?(i(),g("div",{key:0,class:n(["px-4 py-2 text-xs border-t",[e(a).isDark?"text-gray-400 border-gray-800 bg-gray-900/50":"text-gray-500 border-gray-200 bg-gray-50"]])}," Type at least 3 characters to search ",2)):D("",!0)],2)],2)],512),[[_e,e(C)]])]),_:1})])}}}),ka=Ae(na,[["__scopeId","data-v-916730c3"]]);export{ka as default};
//# sourceMappingURL=Navbar-DxS9z4zb.js.map
