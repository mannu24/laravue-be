import{t as C,j as S,p as _,q as P,b as g,D as r,x as q,d as a,w as m,H as B,u as s,C as N,z as d,I as w,R as T,ag as h,k as V,o as y}from"./app-Bvnl7d0n.js";import{_ as A}from"./Card-hOl-Usuy.js";import{_ as F}from"./CardContent-BNEtnmat.js";import{_ as R}from"./ProjectForm-BugzCw38.js";import{A as U}from"./arrow-left-Bc2-To4n.js";import"./CardDescription-D99rUoTk.js";import"./CardTitle-ITTEzIVV.js";import"./Input-CjQgemiQ.js";import"./index-B71ycLCJ.js";import"./Textarea-BT9UDReQ.js";import"./Label-Ds0Exrqp.js";import"./index-_SePG6eE.js";import"./Switch-BV02s58f.js";import"./CategorySelector-DWl1DBPu.js";import"./chevron-down-CF7e_OBe.js";import"./plus-Yokw-JHX.js";import"./code-xml-5bxqMtxa.js";import"./search-5LIDw_UH.js";import"./file-text-CMcMhd5a.js";import"./wrench-BjV2GE9v.js";import"./link-BUIWjCMY.js";import"./github-DmMj9Cen.js";import"./globe-CoObhFDW.js";import"./upload-CLCINb6L.js";import"./loader-circle-D-hWkZPx.js";const z={class:"min-h-screen"},L={class:"container mx-auto px-4 py-8 sm:px-6 lg:px-8"},H={class:"mb-8"},I={class:"text-center"},M={key:0,class:"max-w-4xl mx-auto"},G={key:1,class:"max-w-4xl mx-auto"},xe={__name:"EditProject",setup(J){const n=T(),l=V(),p=C(),u=S(),o=_(!1),c=_(null),x=_({}),E=async()=>{o.value=!0;try{const e=await w.get(`/api/v1/projects/${n.params.slug}`,u.config);c.value=e.data.data}catch(e){console.error("Error fetching project:",e),h({title:"Error",description:"Failed to load project",variant:"destructive"}),l.push(`/projects/${n.params.slug}`)}finally{o.value=!1}},$=async e=>{var i,f,b,j;o.value=!0,x.value={};try{const t=new FormData;t.append("title",e.title),t.append("description",e.description),t.append("project_type",e.project_type),t.append("is_sellable",e.is_sellable?1:0),e.short_description&&t.append("short_description",e.short_description),e.excerpt&&t.append("excerpt",e.excerpt),e.github_url&&t.append("github_url",e.github_url),e.demo_url&&t.append("demo_url",e.demo_url),e.category_id&&t.append("category_id",e.category_id),e.difficulty_level&&t.append("difficulty_level",e.difficulty_level),e.industry&&t.append("industry",e.industry),e.currency&&t.append("currency",e.currency),e.is_sellable&&(t.append("original_price",e.original_price),t.append("selling_price",e.selling_price),e.discount_percentage&&t.append("discount_percentage",e.discount_percentage),e.discount_start_date&&t.append("discount_start_date",e.discount_start_date),e.discount_end_date&&t.append("discount_end_date",e.discount_end_date),e.stock_quantity&&t.append("stock_quantity",e.stock_quantity),t.append("is_digital",e.is_digital?1:0)),e.technologies&&e.technologies.length>0&&e.technologies.forEach(k=>{t.append("technologies[]",k.name||k)}),e.featured_image&&t.append("featured_image",e.featured_image),t.append("_method","PUT");const K=await w.post(`/api/v1/projects/${n.params.slug}`,t,{...u.config,headers:{...u.config.headers,"Content-Type":"multipart/form-data"}});h({title:"Success",description:"Project updated successfully!"}),l.push(`/projects/${n.params.slug}`)}catch(t){console.error("Error updating project:",t),(f=(i=t.response)==null?void 0:i.data)!=null&&f.errors&&(x.value=t.response.data.errors),h({title:"Error",description:((j=(b=t.response)==null?void 0:b.data)==null?void 0:j.message)||"Failed to update project",variant:"destructive"})}finally{o.value=!1}},v=()=>{l.push(`/projects/${n.params.slug}`)};return P(()=>{E()}),(e,i)=>(y(),g("div",z,[r("div",L,[r("div",H,[a(s(N),{variant:"ghost",class:"mb-4",onClick:v},{default:m(()=>[a(s(U),{class:"h-4 w-4 mr-2"}),i[0]||(i[0]=B(" Back ",-1))]),_:1}),r("div",I,[r("h1",{class:d(["text-4xl font-bold mb-4",s(p).isDark?"text-white":"text-gray-900"])}," Edit Project ",2),r("p",{class:d(["text-lg",s(p).isDark?"text-gray-300":"text-gray-600"])}," Update your project information ",2)])]),o.value&&!c.value?(y(),g("div",M,[a(s(A),{class:d(["border-0 shadow-xl",s(p).isDark?"bg-gray-800":"bg-white"])},{default:m(()=>[a(s(F),{class:"p-12 text-center"},{default:m(()=>[i[1]||(i[1]=r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"},null,-1)),r("p",{class:d(["mt-4",s(p).isDark?"text-gray-300":"text-gray-600"])}," Loading project... ",2)]),_:1})]),_:1},8,["class"])])):c.value?(y(),g("div",G,[a(R,{project:c.value,loading:o.value,"submit-label":"Update Project",onSubmit:$,onCancel:v},null,8,["project","loading"])])):q("",!0)])]))}};export{xe as default};
//# sourceMappingURL=EditProject-FoV4-rv0.js.map
