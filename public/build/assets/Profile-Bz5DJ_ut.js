import{c as j,_ as S,t as L,j as U,aq as A,p as d,l as y,q as B,a as C,b as f,D as u,z as p,u as s,d as g,k as I,J as q,o as h,I as z}from"./app-DI7wrdgO.js";import{P as O}from"./ProfileTabs-33RfMQru.js";import{P as E}from"./ProfileCard-BmgXNnf5.js";import{C as N}from"./code-xml-DFQEz8zz.js";import{U as x}from"./users-YnCQh0Uw.js";import{B as R}from"./bookmark-DCReLjsF.js";import"./EmptyState-BuCmKXH_.js";import"./folder-open-KDihOt4H.js";import"./activity-2ShsfHsL.js";import"./file-text-SdSWpbmo.js";import"./search-CGGjPpFd.js";import"./ConfirmDialog-sezaA_kn.js";import"./AlertDialogTitle-D3Kkndyz.js";import"./InfiniteScroll-DdKMyJmZ.js";import"./PostCard-ClOV3R8I.js";import"./DialogContent-B6PFM62Y.js";import"./chevron-right-CSsBz5at.js";import"./message-square-LHM10PKZ.js";import"./Skeleton-MrCeb1Nk.js";import"./Card-gMLg_cpK.js";import"./CardContent-Di6FSwIo.js";import"./heart-C1iAJw3I.js";import"./arrow-right-omBG6BbG.js";import"./ProjectsInfiniteList-yxXESu5P.js";import"./index-DcI6fUKf.js";import"./user-BDkCPgtt.js";import"./calendar-Chf0rn6o.js";import"./star-5YtBMZ4W.js";import"./eye-B5fD1cDw.js";import"./loader-circle-B1JyFQgb.js";import"./TaskList-DE8fGpfk.js";import"./circle-alert-DQSH5bGf.js";import"./BadgeList-K9m8TPkr.js";import"./BadgeItem-p37rwNda.js";import"./square-pen-DDAOo5N9.js";import"./sparkles-B708j2qu.js";import"./mail-BSuJnYKa.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=j("LayoutDashboardIcon",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),V={class:"min-h-screen"},$={key:0,class:"flex items-center justify-center min-h-screen"},G={class:"text-center"},J={key:1},M={class:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-8"},X={key:2,class:"flex items-center justify-center min-h-screen"},F={class:"text-center"},H={__name:"Profile",emits:["share_url"],setup(K){const c=L(),t=U(),l=A(),m=I(),b=q(),r=d(null),o=d(!0),_=d([]),n=d([]),v=()=>{const a=l.user,e=t.user;return a?{...a,...e&&{...Object.fromEntries(Object.entries(e).filter(([i])=>!a.hasOwnProperty(i)))}}:e},k=()=>{var a,e;if(!t.isAuthenticated){m.push({name:"login"});return}if(o.value=!0,l.payload){const i=v();if(i){r.value=i,n.value=i.social_links||[],o.value=!1;return}}if(l.loading){t.user&&(r.value=t.user,n.value=((a=t.user)==null?void 0:a.social_links)||[]);return}t.user&&(r.value=t.user,n.value=((e=t.user)==null?void 0:e.social_links)||[]),o.value=!1},D=async()=>{o.value=!0;try{await z.get("/api/v1/logout",t.config),t.clearAuthData(),m.push("/login")}catch(a){console.error("Logout error:",a),t.clearAuthData(),m.push("/login")}finally{o.value=!1}};y(()=>l.user,a=>{if(a&&t.isAuthenticated){const e=v();e&&(r.value=e,n.value=e.social_links||[],o.value=!1)}},{immediate:!1}),y(()=>l.loading,a=>{if(!a&&l.payload&&t.isAuthenticated){const e=v();e&&(r.value=e,n.value=e.social_links||[],o.value=!1)}}),B(()=>{k()});const w=C(()=>l.gamificationSummary);return(a,e)=>{var i;return h(),f("div",V,[o.value?(h(),f("div",$,[u("div",G,[u("div",{class:p(["animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",[s(c).isDark?"border-white":"border-gray-900"]])},null,2),u("p",{class:p([s(c).isDark?"text-gray-400":"text-gray-600"])},"Loading profile...",2)])])):r.value?(h(),f("div",J,[g(E,{user:r.value,"social-links":n.value,"gamification-summary":w.value,"is-logging-out":o.value,onUpdateProfile:e[0]||(e[0]=P=>s(m).push("/profile/update")),onSettings:e[1]||(e[1]=P=>s(m).push("/settings")),onLogout:D},null,8,["user","social-links","gamification-summary","is-logging-out"]),u("div",M,[g(O,{"user-id":(i=r.value)==null?void 0:i.id,tabs:[{value:"dashboard",label:"Dashboard",icon:s(T)},{value:"projects",label:"Projects",icon:s(N)},{value:"activity",label:"Activity",icon:s(x)},{value:"saved",label:"Saved",icon:s(R)}],"default-tab":s(b).query.tab||"dashboard","is-own-profile":!0,projects:_.value},null,8,["user-id","tabs","default-tab","projects"])])])):(h(),f("div",X,[u("div",F,[g(s(x),{class:p(["h-16 w-16 mx-auto mb-4 opacity-50",[s(c).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"]),u("h2",{class:p(["text-2xl font-bold mb-2",[s(c).isDark?"text-white":"text-gray-900"]])},"Unable to Load Profile",2),u("p",{class:p([s(c).isDark?"text-gray-400":"text-gray-600"])},"Please try refreshing the page.",2)])]))])}}},Ie=S(H,[["__scopeId","data-v-23d35ead"]]);export{Ie as default};
//# sourceMappingURL=Profile-Bz5DJ_ut.js.map
