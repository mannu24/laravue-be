import{c as j,_ as S,t as L,j as U,as as A,p as d,l as y,q as B,a as C,b as f,D as u,z as p,u as o,d as g,k as I,R as z,o as h,I as O}from"./app-Bvnl7d0n.js";import{P as R}from"./ProfileTabs-C102N8Y0.js";import{P as q}from"./ProfileCard-B3buU333.js";import{C as E}from"./code-xml-5bxqMtxa.js";import{U as b}from"./users-BD_gwi77.js";import{B as N}from"./bookmark-Afub3nbE.js";import"./EmptyState-DVLWfdwK.js";import"./folder-open-BnUa1mLa.js";import"./activity-BXHlTU9J.js";import"./file-text-CMcMhd5a.js";import"./search-5LIDw_UH.js";import"./ConfirmDialog-Dd4Y7sL7.js";import"./InfiniteScroll-DLzqwnpV.js";import"./PostCard-6SO9_3tv.js";import"./useBookmark-MdNZIhAe.js";import"./DialogContent-QiX1Bk05.js";import"./Card-hOl-Usuy.js";import"./CardContent-BNEtnmat.js";import"./chevron-right-Cq0N1iJW.js";import"./QuestionCard-DKej05gX.js";import"./tag-6Idb4Hv2.js";import"./circle-check-BE19kObe.js";import"./message-square-I2NocKB-.js";import"./index-_SePG6eE.js";import"./flame-Dy2j6U5p.js";import"./calendar-TcdMNaSw.js";import"./external-link-CohcApp6.js";import"./Skeleton-wSYT3jvc.js";import"./LoadingSpinner-ekVe37eh.js";import"./heart-Do1kpZXc.js";import"./user-plus-C-bpvbmz.js";import"./arrow-right-D0W2HEgW.js";import"./loader-circle-D-hWkZPx.js";import"./TaskList-DN8NsiXc.js";import"./circle-alert-DO1FiHwh.js";import"./swiper-D25FrulS.js";import"./BadgeItem-C0HVxmUN.js";/* empty css                                                                  */import"./square-pen-Cv9EAJ2M.js";import"./message-circle-CUHMIlXk.js";import"./mail-COIIw_w6.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=j("LayoutDashboardIcon",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),V={class:"min-h-screen"},$={key:0,class:"flex items-center justify-center min-h-screen"},G={class:"text-center"},M={key:1},X={class:"mx-auto pb-5 lg:pb-16 lg:-mt-8"},F={key:2,class:"flex items-center justify-center min-h-screen"},H={class:"text-center"},J={__name:"Profile",emits:["share_url"],setup(K){const c=L(),t=U(),l=A(),m=I(),x=z(),r=d(null),s=d(!0),_=d([]),n=d([]),v=()=>{const a=l.user,e=t.user;return a?{...a,...e&&{...Object.fromEntries(Object.entries(e).filter(([i])=>!a.hasOwnProperty(i)))}}:e},k=()=>{var a,e;if(!t.isAuthenticated){m.push({name:"login"});return}if(s.value=!0,l.payload){const i=v();if(i){r.value=i,n.value=i.social_links||[],s.value=!1;return}}if(l.loading){t.user&&(r.value=t.user,n.value=((a=t.user)==null?void 0:a.social_links)||[]);return}t.user&&(r.value=t.user,n.value=((e=t.user)==null?void 0:e.social_links)||[]),s.value=!1},D=async()=>{s.value=!0;try{await O.get("/api/v1/logout",t.config),t.clearAuthData(),m.push("/login")}catch(a){console.error("Logout error:",a),t.clearAuthData(),m.push("/login")}finally{s.value=!1}};y(()=>l.user,a=>{if(a&&t.isAuthenticated){const e=v();e&&(r.value=e,n.value=e.social_links||[],s.value=!1)}},{immediate:!1}),y(()=>l.loading,a=>{if(!a&&l.payload&&t.isAuthenticated){const e=v();e&&(r.value=e,n.value=e.social_links||[],s.value=!1)}}),B(()=>{k()});const w=C(()=>l.gamificationSummary);return(a,e)=>{var i;return h(),f("div",V,[s.value?(h(),f("div",$,[u("div",G,[u("div",{class:p(["animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",[o(c).isDark?"border-white":"border-gray-900"]])},null,2),u("p",{class:p([o(c).isDark?"text-gray-400":"text-gray-600"])},"Loading profile...",2)])])):r.value?(h(),f("div",M,[g(q,{user:r.value,"social-links":n.value,"gamification-summary":w.value,"is-logging-out":s.value,onUpdateProfile:e[0]||(e[0]=P=>o(m).push("/profile/update")),onSettings:e[1]||(e[1]=P=>o(m).push("/settings")),onLogout:D},null,8,["user","social-links","gamification-summary","is-logging-out"]),u("div",X,[g(R,{"user-id":(i=r.value)==null?void 0:i.id,tabs:[{value:"dashboard",label:"Dashboard",icon:o(T)},{value:"projects",label:"Projects",icon:o(E)},{value:"activity",label:"Activity",icon:o(b)},{value:"saved",label:"Saved",icon:o(N)}],"default-tab":o(x).query.tab||"dashboard","is-own-profile":!0,projects:_.value},null,8,["user-id","tabs","default-tab","projects"])])])):(h(),f("div",F,[u("div",H,[g(o(b),{class:p(["h-16 w-16 mx-auto mb-4 opacity-50",[o(c).isDark?"text-gray-600":"text-gray-400"]])},null,8,["class"]),u("h2",{class:p(["text-2xl font-bold mb-2",[o(c).isDark?"text-white":"text-gray-900"]])},"Unable to Load Profile",2),u("p",{class:p([o(c).isDark?"text-gray-400":"text-gray-600"])},"Please try refreshing the page.",2)])]))])}}},qe=S(J,[["__scopeId","data-v-05098187"]]);export{qe as default};
//# sourceMappingURL=Profile-DqOp5DgF.js.map
